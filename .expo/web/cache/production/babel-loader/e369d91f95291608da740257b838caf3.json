{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import{useState,useEffect}from\"react\";export function useUserMedia(requestedMedia){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),mediaStream=_useState2[0],setMediaStream=_useState2[1];useEffect(function(){function enableStream(){var stream;return _regeneratorRuntime.async(function enableStream$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _regeneratorRuntime.awrap(navigator.mediaDevices.getUserMedia(requestedMedia));case 3:stream=_context.sent;setMediaStream(stream);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},null,null,[[0,7]],Promise);}if(!mediaStream){enableStream();}else{return function cleanup(){mediaStream.getTracks().forEach(function(track){track.stop();});};}},[mediaStream,requestedMedia]);return mediaStream;}","map":{"version":3,"sources":["C:/Users/arnol/code/entroprise/src/components/UsersPage/useUserMedia.js"],"names":["useState","useEffect","useUserMedia","requestedMedia","mediaStream","setMediaStream","enableStream","navigator","mediaDevices","getUserMedia","stream","console","log","cleanup","getTracks","forEach","track","stop"],"mappings":"6HAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CAEA,MAAO,SAASC,CAAAA,YAAT,CAAsBC,cAAtB,CAAsC,eACLH,QAAQ,CAAC,IAAD,CADH,wCACpCI,WADoC,eACvBC,cADuB,eAG3CJ,SAAS,CAAC,UAAM,CACd,QAAeK,CAAAA,YAAf,qMAEyBC,SAAS,CAACC,YAAV,CAAuBC,YAAvB,CAAoCN,cAApC,CAFzB,SAEUO,MAFV,eAGIL,cAAc,CAACK,MAAD,CAAd,CAHJ,+EAKIC,OAAO,CAACC,GAAR,cALJ,yEASA,GAAI,CAACR,WAAL,CAAkB,CAChBE,YAAY,GACb,CAFD,IAEO,CACL,MAAO,SAASO,CAAAA,OAAT,EAAmB,CACxBT,WAAW,CAACU,SAAZ,GAAwBC,OAAxB,CAAgC,SAAAC,KAAK,CAAI,CACvCA,KAAK,CAACC,IAAN,GACD,CAFD,EAGD,CAJD,CAKD,CACF,CAnBQ,CAmBN,CAACb,WAAD,CAAcD,cAAd,CAnBM,CAAT,CAqBA,MAAOC,CAAAA,WAAP,CACD","sourcesContent":["import { useState, useEffect } from \"react\"\r\n\r\nexport function useUserMedia(requestedMedia) {\r\n  const [mediaStream, setMediaStream] = useState(null)\r\n\r\n  useEffect(() => {\r\n    async function enableStream() {\r\n      try {\r\n        const stream = await navigator.mediaDevices.getUserMedia(requestedMedia)\r\n        setMediaStream(stream)\r\n      } catch (err) {\r\n        console.log(err)\r\n      }\r\n    }\r\n\r\n    if (!mediaStream) {\r\n      enableStream()\r\n    } else {\r\n      return function cleanup() {\r\n        mediaStream.getTracks().forEach(track => {\r\n          track.stop()\r\n        })\r\n      }\r\n    }\r\n  }, [mediaStream, requestedMedia])\r\n\r\n  return mediaStream\r\n}\r\n"]},"metadata":{},"sourceType":"module"}