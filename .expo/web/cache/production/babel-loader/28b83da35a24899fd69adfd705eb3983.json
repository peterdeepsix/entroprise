{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React from\"react\";import firebase from\"gatsby-plugin-firebase\";import{useCollection}from\"react-firebase-hooks/firestore\";import{Badge,Avatar,Card,List,CardHeader,ListItem,ListItemText,ListItemAvatar}from\"@material-ui/core\";import{makeStyles,withStyles}from\"@material-ui/core/styles\";var StyledBadge=withStyles(function(theme){return{badge:{backgroundColor:\"#44b700\",color:\"#44b700\",boxShadow:\"0 0 0 2px \"+theme.palette.background.paper,\"&::after\":{position:\"absolute\",top:0,left:0,width:\"100%\",height:\"100%\",borderRadius:\"50%\",animation:\"$ripple 1.2s infinite ease-in-out\",border:\"1px solid currentColor\",content:'\"\"'}},\"@keyframes ripple\":{\"0%\":{transform:\"scale(.8)\",opacity:1},\"100%\":{transform:\"scale(2.4)\",opacity:0}}};})(Badge);var useStyles=makeStyles(function(theme){return{root:{width:\"100%\"}};});var UsersList=function UsersList(_ref){var handleClickUser=_ref.handleClickUser;var classes=useStyles();var _useCollection=useCollection(firebase.firestore().collection(\"users\"),{snapshotListenOptions:{includeMetadataChanges:true}}),_useCollection2=_slicedToArray(_useCollection,1),users=_useCollection2[0];return React.createElement(Card,{variant:\"outlined\"},React.createElement(CardHeader,{title:\"User List\"}),React.createElement(List,{className:classes.root},users&&React.createElement(React.Fragment,null,users.docs.map(function(doc){var data=doc.data();if(data.status){if(data.displayName==null&&data.status.state==\"offline\")return;}return React.createElement(ListItem,{button:true,key:doc.id,onClick:function onClick(){handleClickUser(doc);}},doc.data().status&&React.createElement(React.Fragment,null,doc.data().status.state==\"online\"&&React.createElement(ListItemAvatar,null,React.createElement(StyledBadge,{overlap:\"circle\",anchorOrigin:{vertical:\"bottom\",horizontal:\"right\"},variant:\"dot\"},React.createElement(Avatar,{src:data.photoURL,alt:data.displayName})))||React.createElement(ListItemAvatar,null,React.createElement(Avatar,{src:data.photoURL,alt:data.displayName}))),React.createElement(ListItemText,{primary:data.isAnonymous&&\"Anonymous User\"||data.displayName,secondary:doc.id}));}))));};export default UsersList;","map":{"version":3,"sources":["C:/Users/arnol/code/entroprise/src/components/ServicePage/UsersList.js"],"names":["React","firebase","useCollection","Badge","Avatar","Card","List","CardHeader","ListItem","ListItemText","ListItemAvatar","makeStyles","withStyles","StyledBadge","theme","badge","backgroundColor","color","boxShadow","palette","background","paper","position","top","left","width","height","borderRadius","animation","border","content","transform","opacity","useStyles","root","UsersList","handleClickUser","classes","firestore","collection","snapshotListenOptions","includeMetadataChanges","users","docs","map","doc","data","status","displayName","state","id","vertical","horizontal","photoURL","isAnonymous"],"mappings":"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","sourcesContent":["import React from \"react\"\r\nimport firebase from \"gatsby-plugin-firebase\"\r\nimport { useCollection } from \"react-firebase-hooks/firestore\"\r\n\r\nimport {\r\n  Badge,\r\n  Avatar,\r\n  Card,\r\n  List,\r\n  CardHeader,\r\n  ListItem,\r\n  ListItemText,\r\n  ListItemAvatar,\r\n} from \"@material-ui/core\"\r\n\r\nimport { makeStyles, withStyles } from \"@material-ui/core/styles\"\r\n\r\nconst StyledBadge = withStyles(theme => ({\r\n  badge: {\r\n    backgroundColor: \"#44b700\",\r\n    color: \"#44b700\",\r\n    boxShadow: `0 0 0 2px ${theme.palette.background.paper}`,\r\n    \"&::after\": {\r\n      position: \"absolute\",\r\n      top: 0,\r\n      left: 0,\r\n      width: \"100%\",\r\n      height: \"100%\",\r\n      borderRadius: \"50%\",\r\n      animation: \"$ripple 1.2s infinite ease-in-out\",\r\n      border: \"1px solid currentColor\",\r\n      content: '\"\"',\r\n    },\r\n  },\r\n  \"@keyframes ripple\": {\r\n    \"0%\": {\r\n      transform: \"scale(.8)\",\r\n      opacity: 1,\r\n    },\r\n    \"100%\": {\r\n      transform: \"scale(2.4)\",\r\n      opacity: 0,\r\n    },\r\n  },\r\n}))(Badge)\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n}))\r\n\r\nconst UsersList = ({ handleClickUser }) => {\r\n  const classes = useStyles()\r\n\r\n  const [users] = useCollection(firebase.firestore().collection(\"users\"), {\r\n    snapshotListenOptions: { includeMetadataChanges: true },\r\n  })\r\n\r\n  return (\r\n    <Card variant=\"outlined\">\r\n      <CardHeader title=\"User List\" />\r\n      <List className={classes.root}>\r\n        {users && (\r\n          <>\r\n            {users.docs.map(doc => {\r\n              const data = doc.data()\r\n              if (data.status) {\r\n                if (data.displayName == null && data.status.state == \"offline\")\r\n                  return\r\n              }\r\n              return (\r\n                <ListItem\r\n                  button\r\n                  key={doc.id}\r\n                  onClick={() => {\r\n                    handleClickUser(doc)\r\n                  }}\r\n                >\r\n                  {doc.data().status && (\r\n                    <>\r\n                      {(doc.data().status.state == \"online\" && (\r\n                        <ListItemAvatar>\r\n                          <StyledBadge\r\n                            overlap=\"circle\"\r\n                            anchorOrigin={{\r\n                              vertical: \"bottom\",\r\n                              horizontal: \"right\",\r\n                            }}\r\n                            variant=\"dot\"\r\n                          >\r\n                            <Avatar\r\n                              src={data.photoURL}\r\n                              alt={data.displayName}\r\n                            />\r\n                          </StyledBadge>\r\n                        </ListItemAvatar>\r\n                      )) || (\r\n                        <ListItemAvatar>\r\n                          <Avatar src={data.photoURL} alt={data.displayName} />\r\n                        </ListItemAvatar>\r\n                      )}\r\n                    </>\r\n                  )}\r\n                  <ListItemText\r\n                    primary={\r\n                      (data.isAnonymous && \"Anonymous User\") || data.displayName\r\n                    }\r\n                    secondary={doc.id}\r\n                  />\r\n                </ListItem>\r\n              )\r\n            })}\r\n          </>\r\n        )}\r\n      </List>\r\n    </Card>\r\n  )\r\n}\r\nexport default UsersList\r\n"]},"metadata":{},"sourceType":"module"}