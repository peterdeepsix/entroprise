{"ast":null,"code":"import _extends2 from\"@babel/runtime/helpers/extends\";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}import Batchinator from\"../Batchinator\";import FillRateHelper from\"../FillRateHelper\";import PropTypes from'prop-types';import React from'react';import RefreshControl from\"../../../exports/RefreshControl\";import ScrollView from\"../../../exports/ScrollView\";import StyleSheet from\"../../../exports/StyleSheet\";import UIManager from\"../../../exports/UIManager\";import View from\"../../../exports/View\";import ViewabilityHelper from\"../ViewabilityHelper\";import{computeWindowedRenderLimits}from\"../VirtualizeUtils\";import findNodeHandle from\"../../../exports/findNodeHandle\";import infoLog from\"../infoLog\";import invariant from'fbjs/lib/invariant';import warning from'fbjs/lib/warning';var flattenStyle=StyleSheet.flatten;var __DEV__=process.env.NODE_ENV!=='production';var _usedIndexForKey=false;var VirtualizedList=function(_React$PureComponent){_inherits(VirtualizedList,_React$PureComponent);VirtualizedList.prototype.scrollToEnd=function scrollToEnd(params){var animated=params?params.animated:true;var veryLast=this.props.getItemCount(this.props.data)-1;var frame=this._getFrameMetricsApprox(veryLast);var offset=Math.max(0,frame.offset+frame.length+this._footerLength-this._scrollMetrics.visibleLength);this._scrollRef.scrollTo(this.props.horizontal?{x:offset,animated:animated}:{y:offset,animated:animated});};VirtualizedList.prototype.scrollToIndex=function scrollToIndex(params){var _props=this.props,data=_props.data,horizontal=_props.horizontal,getItemCount=_props.getItemCount,getItemLayout=_props.getItemLayout,onScrollToIndexFailed=_props.onScrollToIndexFailed;var animated=params.animated,index=params.index,viewOffset=params.viewOffset,viewPosition=params.viewPosition;invariant(index>=0&&index<getItemCount(data),'scrollToIndex out of range: '+index+' vs '+(getItemCount(data)-1));if(!getItemLayout&&index>this._highestMeasuredFrameIndex){invariant(!!onScrollToIndexFailed,'scrollToIndex should be used in conjunction with getItemLayout or onScrollToIndexFailed, '+'otherwise there is no way to know the location of offscreen indices or handle failures.');onScrollToIndexFailed({averageItemLength:this._averageCellLength,highestMeasuredFrameIndex:this._highestMeasuredFrameIndex,index:index});return;}var frame=this._getFrameMetricsApprox(index);var offset=Math.max(0,frame.offset-(viewPosition||0)*(this._scrollMetrics.visibleLength-frame.length))-(viewOffset||0);this._scrollRef.scrollTo(horizontal?{x:offset,animated:animated}:{y:offset,animated:animated});};VirtualizedList.prototype.scrollToItem=function scrollToItem(params){var item=params.item;var _props2=this.props,data=_props2.data,getItem=_props2.getItem,getItemCount=_props2.getItemCount;var itemCount=getItemCount(data);for(var _index=0;_index<itemCount;_index++){if(getItem(data,_index)===item){this.scrollToIndex(_extends2({},params,{index:_index}));break;}}};VirtualizedList.prototype.scrollToOffset=function scrollToOffset(params){var animated=params.animated,offset=params.offset;this._scrollRef.scrollTo(this.props.horizontal?{x:offset,animated:animated}:{y:offset,animated:animated});};VirtualizedList.prototype.recordInteraction=function recordInteraction(){this._nestedChildLists.forEach(function(childList){childList.ref&&childList.ref.recordInteraction();});this._viewabilityTuples.forEach(function(t){t.viewabilityHelper.recordInteraction();});this._updateViewableItems(this.props.data);};VirtualizedList.prototype.flashScrollIndicators=function flashScrollIndicators(){this._scrollRef.flashScrollIndicators();};VirtualizedList.prototype.getScrollResponder=function getScrollResponder(){if(this._scrollRef&&this._scrollRef.getScrollResponder){return this._scrollRef.getScrollResponder();}};VirtualizedList.prototype.getScrollableNode=function getScrollableNode(){if(this._scrollRef&&this._scrollRef.getScrollableNode){return this._scrollRef.getScrollableNode();}else{return findNodeHandle(this._scrollRef);}};VirtualizedList.prototype.setNativeProps=function setNativeProps(props){if(this._scrollRef){this._scrollRef.setNativeProps(props);}};VirtualizedList.prototype.getChildContext=function getChildContext(){return{virtualizedList:{getScrollMetrics:this._getScrollMetrics,horizontal:this.props.horizontal,getOutermostParentListRef:this._getOutermostParentListRef,getNestedChildState:this._getNestedChildState,registerAsNestedChild:this._registerAsNestedChild,unregisterAsNestedChild:this._unregisterAsNestedChild}};};VirtualizedList.prototype._getCellKey=function _getCellKey(){return this.context.virtualizedCell&&this.context.virtualizedCell.cellKey||'rootList';};VirtualizedList.prototype.hasMore=function hasMore(){return this._hasMore;};function VirtualizedList(props,context){_classCallCheck(this,VirtualizedList);var _this=_possibleConstructorReturn(this,_React$PureComponent.call(this,props,context));_initialiseProps.call(_this);invariant(!props.onScroll||!props.onScroll.__isNative,'Components based on VirtualizedList must be wrapped with Animated.createAnimatedComponent '+'to support native onScroll events with useNativeDriver');invariant(props.windowSize>0,'VirtualizedList: The windowSize prop must be present and set to a value greater than 0.');_this._fillRateHelper=new FillRateHelper(_this._getFrameMetrics);_this._updateCellsToRenderBatcher=new Batchinator(_this._updateCellsToRender,_this.props.updateCellsBatchingPeriod);if(_this.props.viewabilityConfigCallbackPairs){_this._viewabilityTuples=_this.props.viewabilityConfigCallbackPairs.map(function(pair){return{viewabilityHelper:new ViewabilityHelper(pair.viewabilityConfig),onViewableItemsChanged:pair.onViewableItemsChanged};});}else if(_this.props.onViewableItemsChanged){_this._viewabilityTuples.push({viewabilityHelper:new ViewabilityHelper(_this.props.viewabilityConfig),onViewableItemsChanged:_this.props.onViewableItemsChanged});}var initialState={first:_this.props.initialScrollIndex||0,last:Math.min(_this.props.getItemCount(_this.props.data),(_this.props.initialScrollIndex||0)+_this.props.initialNumToRender)-1};if(_this._isNestedWithSameOrientation()){var storedState=_this.context.virtualizedList.getNestedChildState(_this.props.listKey||_this._getCellKey());if(storedState){initialState=storedState;_this.state=storedState;_this._frames=storedState.frames;}}_this.state=initialState;return _this;}VirtualizedList.prototype.componentDidMount=function componentDidMount(){if(this._isNestedWithSameOrientation()){this.context.virtualizedList.registerAsNestedChild({cellKey:this._getCellKey(),key:this.props.listKey||this._getCellKey(),ref:this});}};VirtualizedList.prototype.componentWillUnmount=function componentWillUnmount(){if(this._isNestedWithSameOrientation()){this.context.virtualizedList.unregisterAsNestedChild({key:this.props.listKey||this._getCellKey(),state:{first:this.state.first,last:this.state.last,frames:this._frames}});}this._updateViewableItems(null);this._updateCellsToRenderBatcher.dispose({abort:true});this._viewabilityTuples.forEach(function(tuple){tuple.viewabilityHelper.dispose();});this._fillRateHelper.deactivateAndFlush();};VirtualizedList.getDerivedStateFromProps=function getDerivedStateFromProps(newProps,prevState){var data=newProps.data,extraData=newProps.extraData,getItemCount=newProps.getItemCount,maxToRenderPerBatch=newProps.maxToRenderPerBatch;return{first:Math.max(0,Math.min(prevState.first,getItemCount(data)-1-maxToRenderPerBatch)),last:Math.max(0,Math.min(prevState.last,getItemCount(data)-1))};};VirtualizedList.prototype._pushCells=function _pushCells(cells,stickyHeaderIndices,stickyIndicesFromProps,first,last,inversionStyle){var _this2=this;var _props3=this.props,CellRendererComponent=_props3.CellRendererComponent,ItemSeparatorComponent=_props3.ItemSeparatorComponent,data=_props3.data,getItem=_props3.getItem,getItemCount=_props3.getItemCount,horizontal=_props3.horizontal,keyExtractor=_props3.keyExtractor;var stickyOffset=this.props.ListHeaderComponent?1:0;var end=getItemCount(data)-1;var prevCellKey=void 0;last=Math.min(end,last);var _loop=function _loop(ii){var item=getItem(data,ii);var key=keyExtractor(item,ii);_this2._indicesToKeys.set(ii,key);if(stickyIndicesFromProps.has(ii+stickyOffset)){stickyHeaderIndices.push(cells.length);}cells.push(React.createElement(CellRenderer,{CellRendererComponent:CellRendererComponent,ItemSeparatorComponent:ii<end?ItemSeparatorComponent:undefined,cellKey:key,fillRateHelper:_this2._fillRateHelper,horizontal:horizontal,index:ii,inversionStyle:inversionStyle,item:item,key:key,prevCellKey:prevCellKey,onUpdateSeparators:_this2._onUpdateSeparators,onLayout:function onLayout(e){return _this2._onCellLayout(e,key,ii);},onUnmount:_this2._onCellUnmount,parentProps:_this2.props,ref:function(_ref){function ref(_x){return _ref.apply(this,arguments);}ref.toString=function(){return _ref.toString();};return ref;}(function(ref){_this2._cellRefs[key]=ref;})}));prevCellKey=key;};for(var ii=first;ii<=last;ii++){_loop(ii);}};VirtualizedList.prototype._isVirtualizationDisabled=function _isVirtualizationDisabled(){return this.props.disableVirtualization;};VirtualizedList.prototype._isNestedWithSameOrientation=function _isNestedWithSameOrientation(){var nestedContext=this.context.virtualizedList;return!!(nestedContext&&!!nestedContext.horizontal===!!this.props.horizontal);};VirtualizedList.prototype.render=function render(){if(__DEV__){var flatStyles=flattenStyle(this.props.contentContainerStyle);warning(flatStyles==null||flatStyles.flexWrap!=='wrap','`flexWrap: `wrap`` is not supported with the `VirtualizedList` components.'+'Consider using `numColumns` with `FlatList` instead.');}var _props4=this.props,ListEmptyComponent=_props4.ListEmptyComponent,ListFooterComponent=_props4.ListFooterComponent,ListHeaderComponent=_props4.ListHeaderComponent;var _props5=this.props,data=_props5.data,horizontal=_props5.horizontal;var isVirtualizationDisabled=this._isVirtualizationDisabled();var inversionStyle=this.props.inverted?this.props.horizontal?styles.horizontallyInverted:styles.verticallyInverted:null;var cells=[];var stickyIndicesFromProps=new Set(this.props.stickyHeaderIndices);var stickyHeaderIndices=[];if(ListHeaderComponent){if(stickyIndicesFromProps.has(0)){stickyHeaderIndices.push(0);}var element=React.isValidElement(ListHeaderComponent)?ListHeaderComponent:React.createElement(ListHeaderComponent,null);cells.push(React.createElement(VirtualizedCellWrapper,{cellKey:this._getCellKey()+'-header',key:'$header'},React.createElement(View,{onLayout:this._onLayoutHeader,style:inversionStyle},element)));}var itemCount=this.props.getItemCount(data);if(itemCount>0){_usedIndexForKey=false;var spacerKey=!horizontal?'height':'width';var lastInitialIndex=this.props.initialScrollIndex?-1:this.props.initialNumToRender-1;var _state=this.state,_first=_state.first,_last=_state.last;this._pushCells(cells,stickyHeaderIndices,stickyIndicesFromProps,0,lastInitialIndex,inversionStyle);var firstAfterInitial=Math.max(lastInitialIndex+1,_first);if(!isVirtualizationDisabled&&_first>lastInitialIndex+1){var insertedStickySpacer=false;if(stickyIndicesFromProps.size>0){var stickyOffset=ListHeaderComponent?1:0;for(var ii=firstAfterInitial-1;ii>lastInitialIndex;ii--){if(stickyIndicesFromProps.has(ii+stickyOffset)){var _ref2,_ref3;var initBlock=this._getFrameMetricsApprox(lastInitialIndex);var stickyBlock=this._getFrameMetricsApprox(ii);var leadSpace=stickyBlock.offset-(initBlock.offset+initBlock.length);cells.push(React.createElement(View,{key:'$sticky_lead',style:(_ref2={},_ref2[spacerKey]=leadSpace,_ref2)}));this._pushCells(cells,stickyHeaderIndices,stickyIndicesFromProps,ii,ii,inversionStyle);var trailSpace=this._getFrameMetricsApprox(_first).offset-(stickyBlock.offset+stickyBlock.length);cells.push(React.createElement(View,{key:'$sticky_trail',style:(_ref3={},_ref3[spacerKey]=trailSpace,_ref3)}));insertedStickySpacer=true;break;}}}if(!insertedStickySpacer){var _ref4;var _initBlock=this._getFrameMetricsApprox(lastInitialIndex);var firstSpace=this._getFrameMetricsApprox(_first).offset-(_initBlock.offset+_initBlock.length);cells.push(React.createElement(View,{key:'$lead_spacer',style:(_ref4={},_ref4[spacerKey]=firstSpace,_ref4)}));}}this._pushCells(cells,stickyHeaderIndices,stickyIndicesFromProps,firstAfterInitial,_last,inversionStyle);if(!this._hasWarned.keys&&_usedIndexForKey){console.warn('VirtualizedList: missing keys for items, make sure to specify a key property on each '+'item or provide a custom keyExtractor.');this._hasWarned.keys=true;}if(!isVirtualizationDisabled&&_last<itemCount-1){var _ref5;var lastFrame=this._getFrameMetricsApprox(_last);var end=this.props.getItemLayout?itemCount-1:Math.min(itemCount-1,this._highestMeasuredFrameIndex);var endFrame=this._getFrameMetricsApprox(end);var tailSpacerLength=endFrame.offset+endFrame.length-(lastFrame.offset+lastFrame.length);cells.push(React.createElement(View,{key:'$tail_spacer',style:(_ref5={},_ref5[spacerKey]=tailSpacerLength,_ref5)}));}}else if(ListEmptyComponent){var _element=React.isValidElement(ListEmptyComponent)?ListEmptyComponent:React.createElement(ListEmptyComponent,null);cells.push(React.createElement(View,{key:'$empty',onLayout:this._onLayoutEmpty,style:inversionStyle},_element));}if(ListFooterComponent){var _element2=React.isValidElement(ListFooterComponent)?ListFooterComponent:React.createElement(ListFooterComponent,null);cells.push(React.createElement(VirtualizedCellWrapper,{cellKey:this._getCellKey()+'-footer',key:'$footer'},React.createElement(View,{onLayout:this._onLayoutFooter,style:inversionStyle},_element2)));}var scrollProps=_extends2({},this.props,{onContentSizeChange:this._onContentSizeChange,onLayout:this._onLayout,onScroll:this._onScroll,onScrollBeginDrag:this._onScrollBeginDrag,onScrollEndDrag:this._onScrollEndDrag,onMomentumScrollEnd:this._onMomentumScrollEnd,scrollEventThrottle:this.props.scrollEventThrottle,invertStickyHeaders:this.props.invertStickyHeaders!==undefined?this.props.invertStickyHeaders:this.props.inverted,stickyHeaderIndices:stickyHeaderIndices});if(inversionStyle){scrollProps.style=[inversionStyle,this.props.style];}this._hasMore=this.state.last<this.props.getItemCount(this.props.data)-1;var ret=React.cloneElement((this.props.renderScrollComponent||this._defaultRenderScrollComponent)(scrollProps),{ref:this._captureScrollRef},cells);if(this.props.debug){return React.createElement(View,{style:{flex:1}},ret,this._renderDebugOverlay());}else{return ret;}};VirtualizedList.prototype.componentDidUpdate=function componentDidUpdate(prevProps){var _props6=this.props,data=_props6.data,extraData=_props6.extraData;if(data!==prevProps.data||extraData!==prevProps.extraData){this._hasDataChangedSinceEndReached=true;this._viewabilityTuples.forEach(function(tuple){tuple.viewabilityHelper.resetViewableIndices();});}this._scheduleCellsToRenderUpdate();};VirtualizedList.prototype._computeBlankness=function _computeBlankness(){this._fillRateHelper.computeBlankness(this.props,this.state,this._scrollMetrics);};VirtualizedList.prototype._onCellLayout=function _onCellLayout(e,cellKey,index){var layout=e.nativeEvent.layout;var next={offset:this._selectOffset(layout),length:this._selectLength(layout),index:index,inLayout:true};var curr=this._frames[cellKey];if(!curr||next.offset!==curr.offset||next.length!==curr.length||index!==curr.index){this._totalCellLength+=next.length-(curr?curr.length:0);this._totalCellsMeasured+=curr?0:1;this._averageCellLength=this._totalCellLength/this._totalCellsMeasured;this._frames[cellKey]=next;this._highestMeasuredFrameIndex=Math.max(this._highestMeasuredFrameIndex,index);this._scheduleCellsToRenderUpdate();}else{this._frames[cellKey].inLayout=true;}this._computeBlankness();};VirtualizedList.prototype._measureLayoutRelativeToContainingList=function _measureLayoutRelativeToContainingList(){var _this3=this;UIManager.measureLayout(findNodeHandle(this),findNodeHandle(this.context.virtualizedList.getOutermostParentListRef()),function(error){console.warn(\"VirtualizedList: Encountered an error while measuring a list's\"+' offset from its containing VirtualizedList.');},function(x,y,width,height){_this3._offsetFromParentVirtualizedList=_this3._selectOffset({x:x,y:y});_this3._scrollMetrics.contentLength=_this3._selectLength({width:width,height:height});var scrollMetrics=_this3._convertParentScrollMetrics(_this3.context.virtualizedList.getScrollMetrics());_this3._scrollMetrics.visibleLength=scrollMetrics.visibleLength;_this3._scrollMetrics.offset=scrollMetrics.offset;});};VirtualizedList.prototype._renderDebugOverlay=function _renderDebugOverlay(){var normalize=this._scrollMetrics.visibleLength/this._scrollMetrics.contentLength;var framesInLayout=[];var itemCount=this.props.getItemCount(this.props.data);for(var ii=0;ii<itemCount;ii++){var frame=this._getFrameMetricsApprox(ii);if(frame.inLayout){framesInLayout.push(frame);}}var windowTop=this._getFrameMetricsApprox(this.state.first).offset;var frameLast=this._getFrameMetricsApprox(this.state.last);var windowLen=frameLast.offset+frameLast.length-windowTop;var visTop=this._scrollMetrics.offset;var visLen=this._scrollMetrics.visibleLength;var baseStyle={position:'absolute',top:0,right:0};return React.createElement(View,{style:_extends2({},baseStyle,{bottom:0,width:20,borderColor:'blue',borderWidth:1})},framesInLayout.map(function(f,ii){return React.createElement(View,{key:'f'+ii,style:_extends2({},baseStyle,{left:0,top:f.offset*normalize,height:f.length*normalize,backgroundColor:'orange'})});}),React.createElement(View,{style:_extends2({},baseStyle,{left:0,top:windowTop*normalize,height:windowLen*normalize,borderColor:'green',borderWidth:2})}),React.createElement(View,{style:_extends2({},baseStyle,{left:0,top:visTop*normalize,height:visLen*normalize,borderColor:'red',borderWidth:2})}));};VirtualizedList.prototype._selectLength=function _selectLength(metrics){return!this.props.horizontal?metrics.height:metrics.width;};VirtualizedList.prototype._selectOffset=function _selectOffset(metrics){return!this.props.horizontal?metrics.y:metrics.x;};VirtualizedList.prototype._maybeCallOnEndReached=function _maybeCallOnEndReached(){var _props7=this.props,data=_props7.data,getItemCount=_props7.getItemCount,onEndReached=_props7.onEndReached,onEndReachedThreshold=_props7.onEndReachedThreshold;var _scrollMetrics=this._scrollMetrics,contentLength=_scrollMetrics.contentLength,visibleLength=_scrollMetrics.visibleLength,offset=_scrollMetrics.offset;var distanceFromEnd=contentLength-visibleLength-offset;if(onEndReached&&this.state.last===getItemCount(data)-1&&distanceFromEnd<onEndReachedThreshold*visibleLength&&(this._hasDataChangedSinceEndReached||this._scrollMetrics.contentLength!==this._sentEndForContentLength)){this._hasDataChangedSinceEndReached=false;this._sentEndForContentLength=this._scrollMetrics.contentLength;onEndReached({distanceFromEnd:distanceFromEnd});}};VirtualizedList.prototype._scheduleCellsToRenderUpdate=function _scheduleCellsToRenderUpdate(){var _state2=this.state,first=_state2.first,last=_state2.last;var _scrollMetrics2=this._scrollMetrics,offset=_scrollMetrics2.offset,visibleLength=_scrollMetrics2.visibleLength,velocity=_scrollMetrics2.velocity;var itemCount=this.props.getItemCount(this.props.data);var hiPri=false;if(first>0||last<itemCount-1){var distTop=offset-this._getFrameMetricsApprox(first).offset;var distBottom=this._getFrameMetricsApprox(last).offset-(offset+visibleLength);var scrollingThreshold=this.props.onEndReachedThreshold*visibleLength/2;hiPri=Math.min(distTop,distBottom)<0||velocity<-2&&distTop<scrollingThreshold||velocity>2&&distBottom<scrollingThreshold;}if(hiPri&&this._averageCellLength){this._updateCellsToRenderBatcher.dispose({abort:true});this._updateCellsToRender();return;}else{this._updateCellsToRenderBatcher.schedule();}};VirtualizedList.prototype._updateViewableItems=function _updateViewableItems(data){var _this4=this;var getItemCount=this.props.getItemCount;this._viewabilityTuples.forEach(function(tuple){tuple.viewabilityHelper.onUpdate(getItemCount(data),_this4._scrollMetrics.offset,_this4._scrollMetrics.visibleLength,_this4._getFrameMetrics,_this4._createViewToken,tuple.onViewableItemsChanged,_this4.state);});};return VirtualizedList;}(React.PureComponent);VirtualizedList.defaultProps={disableVirtualization:process.env.NODE_ENV==='test',horizontal:false,initialNumToRender:10,keyExtractor:function keyExtractor(item,index){if(item.key!=null){return item.key;}_usedIndexForKey=true;return String(index);},maxToRenderPerBatch:10,onEndReachedThreshold:2,scrollEventThrottle:50,updateCellsBatchingPeriod:50,windowSize:21};VirtualizedList.contextTypes={virtualizedCell:PropTypes.shape({cellKey:PropTypes.string}),virtualizedList:PropTypes.shape({getScrollMetrics:PropTypes.func,horizontal:PropTypes.bool,getOutermostParentListRef:PropTypes.func,getNestedChildState:PropTypes.func,registerAsNestedChild:PropTypes.func,unregisterAsNestedChild:PropTypes.func})};VirtualizedList.childContextTypes={virtualizedList:PropTypes.shape({getScrollMetrics:PropTypes.func,horizontal:PropTypes.bool,getOutermostParentListRef:PropTypes.func,getNestedChildState:PropTypes.func,registerAsNestedChild:PropTypes.func,unregisterAsNestedChild:PropTypes.func})};var _initialiseProps=function _initialiseProps(){var _this7=this;this._getScrollMetrics=function(){return _this7._scrollMetrics;};this._getOutermostParentListRef=function(){if(_this7._isNestedWithSameOrientation()){return _this7.context.virtualizedList.getOutermostParentListRef();}else{return _this7;}};this._getNestedChildState=function(key){var existingChildData=_this7._nestedChildLists.get(key);return existingChildData&&existingChildData.state;};this._registerAsNestedChild=function(childList){var childListsInCell=_this7._cellKeysToChildListKeys.get(childList.cellKey)||new Set();childListsInCell.add(childList.key);_this7._cellKeysToChildListKeys.set(childList.cellKey,childListsInCell);var existingChildData=_this7._nestedChildLists.get(childList.key);invariant(!(existingChildData&&existingChildData.ref!==null),'A VirtualizedList contains a cell which itself contains '+'more than one VirtualizedList of the same orientation as the parent '+'list. You must pass a unique listKey prop to each sibling list.');_this7._nestedChildLists.set(childList.key,{ref:childList.ref,state:null});if(_this7._hasInteracted){childList.ref.recordInteraction();}};this._unregisterAsNestedChild=function(childList){_this7._nestedChildLists.set(childList.key,{ref:null,state:childList.state});};this._onUpdateSeparators=function(keys,newProps){keys.forEach(function(key){var ref=key!=null&&_this7._cellRefs[key];ref&&ref.updateSeparatorProps(newProps);});};this._averageCellLength=0;this._cellKeysToChildListKeys=new Map();this._cellRefs={};this._frames={};this._footerLength=0;this._hasDataChangedSinceEndReached=true;this._hasInteracted=false;this._hasMore=false;this._hasWarned={};this._highestMeasuredFrameIndex=0;this._headerLength=0;this._indicesToKeys=new Map();this._hasDoneInitialScroll=false;this._nestedChildLists=new Map();this._offsetFromParentVirtualizedList=0;this._prevParentOffset=0;this._scrollMetrics={contentLength:0,dOffset:0,dt:10,offset:0,timestamp:0,velocity:0,visibleLength:0};this._scrollRef=null;this._sentEndForContentLength=0;this._totalCellLength=0;this._totalCellsMeasured=0;this._viewabilityTuples=[];this._captureScrollRef=function(ref){_this7._scrollRef=ref;};this._defaultRenderScrollComponent=function(props){if(_this7._isNestedWithSameOrientation()){return React.createElement(View,props);}else if(props.onRefresh){invariant(typeof props.refreshing==='boolean','`refreshing` prop must be set as a boolean in order to use `onRefresh`, but got `'+JSON.stringify(props.refreshing)+'`');return React.createElement(ScrollView,_extends({},props,{refreshControl:React.createElement(RefreshControl,{refreshing:props.refreshing,onRefresh:props.onRefresh,progressViewOffset:props.progressViewOffset})}));}else{return React.createElement(ScrollView,props);}};this._onCellUnmount=function(cellKey){var curr=_this7._frames[cellKey];if(curr){_this7._frames[cellKey]=_extends2({},curr,{inLayout:false});}};this._onLayout=function(e){if(_this7._isNestedWithSameOrientation()){_this7._measureLayoutRelativeToContainingList();}else{_this7._scrollMetrics.visibleLength=_this7._selectLength(e.nativeEvent.layout);}_this7.props.onLayout&&_this7.props.onLayout(e);_this7._scheduleCellsToRenderUpdate();_this7._maybeCallOnEndReached();};this._onLayoutEmpty=function(e){_this7.props.onLayout&&_this7.props.onLayout(e);};this._onLayoutFooter=function(e){_this7._footerLength=_this7._selectLength(e.nativeEvent.layout);};this._onLayoutHeader=function(e){_this7._headerLength=_this7._selectLength(e.nativeEvent.layout);};this._onContentSizeChange=function(width,height){if(width>0&&height>0&&_this7.props.initialScrollIndex!=null&&_this7.props.initialScrollIndex>0&&!_this7._hasDoneInitialScroll){_this7.scrollToIndex({animated:false,index:_this7.props.initialScrollIndex});_this7._hasDoneInitialScroll=true;}if(_this7.props.onContentSizeChange){_this7.props.onContentSizeChange(width,height);}_this7._scrollMetrics.contentLength=_this7._selectLength({height:height,width:width});_this7._scheduleCellsToRenderUpdate();_this7._maybeCallOnEndReached();};this._convertParentScrollMetrics=function(metrics){var offset=metrics.offset-_this7._offsetFromParentVirtualizedList;var visibleLength=metrics.visibleLength;var dOffset=offset-_this7._scrollMetrics.offset;var contentLength=_this7._scrollMetrics.contentLength;return{visibleLength:visibleLength,contentLength:contentLength,offset:offset,dOffset:dOffset};};this._onScroll=function(e){_this7._nestedChildLists.forEach(function(childList){childList.ref&&childList.ref._onScroll(e);});if(_this7.props.onScroll){_this7.props.onScroll(e);}var timestamp=e.timeStamp;var visibleLength=_this7._selectLength(e.nativeEvent.layoutMeasurement);var contentLength=_this7._selectLength(e.nativeEvent.contentSize);var offset=_this7._selectOffset(e.nativeEvent.contentOffset);var dOffset=offset-_this7._scrollMetrics.offset;if(_this7._isNestedWithSameOrientation()){if(_this7._scrollMetrics.contentLength===0){return;}var _convertParentScrollM=_this7._convertParentScrollMetrics({visibleLength:visibleLength,offset:offset});visibleLength=_convertParentScrollM.visibleLength;contentLength=_convertParentScrollM.contentLength;offset=_convertParentScrollM.offset;dOffset=_convertParentScrollM.dOffset;}var dt=_this7._scrollMetrics.timestamp?Math.max(1,timestamp-_this7._scrollMetrics.timestamp):1;var velocity=dOffset/dt;if(dt>500&&_this7._scrollMetrics.dt>500&&contentLength>5*visibleLength&&!_this7._hasWarned.perf){infoLog('VirtualizedList: You have a large list that is slow to update - make sure your '+'renderItem function renders components that follow React performance best practices '+'like PureComponent, shouldComponentUpdate, etc.',{dt:dt,prevDt:_this7._scrollMetrics.dt,contentLength:contentLength});_this7._hasWarned.perf=true;}_this7._scrollMetrics={contentLength:contentLength,dt:dt,dOffset:dOffset,offset:offset,timestamp:timestamp,velocity:velocity,visibleLength:visibleLength};_this7._updateViewableItems(_this7.props.data);if(!_this7.props){return;}_this7._maybeCallOnEndReached();if(velocity!==0){_this7._fillRateHelper.activate();}_this7._computeBlankness();_this7._scheduleCellsToRenderUpdate();};this._onScrollBeginDrag=function(e){_this7._nestedChildLists.forEach(function(childList){childList.ref&&childList.ref._onScrollBeginDrag(e);});_this7._viewabilityTuples.forEach(function(tuple){tuple.viewabilityHelper.recordInteraction();});_this7._hasInteracted=true;_this7.props.onScrollBeginDrag&&_this7.props.onScrollBeginDrag(e);};this._onScrollEndDrag=function(e){var velocity=e.nativeEvent.velocity;if(velocity){_this7._scrollMetrics.velocity=_this7._selectOffset(velocity);}_this7._computeBlankness();_this7.props.onScrollEndDrag&&_this7.props.onScrollEndDrag(e);};this._onMomentumScrollEnd=function(e){_this7._scrollMetrics.velocity=0;_this7._computeBlankness();_this7.props.onMomentumScrollEnd&&_this7.props.onMomentumScrollEnd(e);};this._updateCellsToRender=function(){var _props9=_this7.props,data=_props9.data,getItemCount=_props9.getItemCount,onEndReachedThreshold=_props9.onEndReachedThreshold;var isVirtualizationDisabled=_this7._isVirtualizationDisabled();_this7._updateViewableItems(data);if(!data){return;}_this7.setState(function(state){var newState=void 0;if(!isVirtualizationDisabled){if(_this7._scrollMetrics.visibleLength){if(!_this7.props.initialScrollIndex||_this7._scrollMetrics.offset){newState=computeWindowedRenderLimits(_this7.props,state,_this7._getFrameMetricsApprox,_this7._scrollMetrics);}}}else{var _scrollMetrics3=_this7._scrollMetrics,contentLength=_scrollMetrics3.contentLength,_offset=_scrollMetrics3.offset,visibleLength=_scrollMetrics3.visibleLength;var _distanceFromEnd=contentLength-visibleLength-_offset;var renderAhead=_distanceFromEnd<onEndReachedThreshold*visibleLength?_this7.props.maxToRenderPerBatch:0;newState={first:0,last:Math.min(state.last+renderAhead,getItemCount(data)-1)};}if(newState&&_this7._nestedChildLists.size>0){var newFirst=newState.first;var newLast=newState.last;for(var ii=newFirst;ii<=newLast;ii++){var cellKeyForIndex=_this7._indicesToKeys.get(ii);var childListKeys=cellKeyForIndex&&_this7._cellKeysToChildListKeys.get(cellKeyForIndex);if(!childListKeys){continue;}var someChildHasMore=false;for(var _iterator=childListKeys,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();;){var _ref6;if(_isArray){if(_i>=_iterator.length)break;_ref6=_iterator[_i++];}else{_i=_iterator.next();if(_i.done)break;_ref6=_i.value;}var childKey=_ref6;var childList=_this7._nestedChildLists.get(childKey);if(childList&&childList.ref&&childList.ref.hasMore()){someChildHasMore=true;break;}}if(someChildHasMore){newState.last=ii;break;}}}return newState;});};this._createViewToken=function(index,isViewable){var _props10=_this7.props,data=_props10.data,getItem=_props10.getItem,keyExtractor=_props10.keyExtractor;var item=getItem(data,index);return{index:index,item:item,key:keyExtractor(item,index),isViewable:isViewable};};this._getFrameMetricsApprox=function(index){var frame=_this7._getFrameMetrics(index);if(frame&&frame.index===index){return frame;}else{var _getItemLayout=_this7.props.getItemLayout;invariant(!_getItemLayout,'Should not have to estimate frames when a measurement metrics function is provided');return{length:_this7._averageCellLength,offset:_this7._averageCellLength*index};}};this._getFrameMetrics=function(index){var _props11=_this7.props,data=_props11.data,getItem=_props11.getItem,getItemCount=_props11.getItemCount,getItemLayout=_props11.getItemLayout,keyExtractor=_props11.keyExtractor;invariant(getItemCount(data)>index,'Tried to get frame for out of range index '+index);var item=getItem(data,index);var frame=item&&_this7._frames[keyExtractor(item,index)];if(!frame||frame.index!==index){if(getItemLayout){frame=getItemLayout(data,index);if(__DEV__){var frameType=PropTypes.shape({length:PropTypes.number.isRequired,offset:PropTypes.number.isRequired,index:PropTypes.number.isRequired}).isRequired;PropTypes.checkPropTypes({frame:frameType},{frame:frame},'frame','VirtualizedList.getItemLayout');}}}return frame;};};var CellRenderer=function(_React$Component){_inherits(CellRenderer,_React$Component);function CellRenderer(){var _temp,_this5,_ret2;_classCallCheck(this,CellRenderer);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret2=(_temp=(_this5=_possibleConstructorReturn(this,_React$Component.call.apply(_React$Component,[this].concat(args))),_this5),_this5.state={separatorProps:{highlighted:false,leadingItem:_this5.props.item}},_this5._separators={highlight:function highlight(){var _this5$props=_this5.props,cellKey=_this5$props.cellKey,prevCellKey=_this5$props.prevCellKey;_this5.props.onUpdateSeparators([cellKey,prevCellKey],{highlighted:true});},unhighlight:function unhighlight(){var _this5$props2=_this5.props,cellKey=_this5$props2.cellKey,prevCellKey=_this5$props2.prevCellKey;_this5.props.onUpdateSeparators([cellKey,prevCellKey],{highlighted:false});},updateProps:function updateProps(select,newProps){var _this5$props3=_this5.props,cellKey=_this5$props3.cellKey,prevCellKey=_this5$props3.prevCellKey;_this5.props.onUpdateSeparators([select==='leading'?prevCellKey:cellKey],newProps);}},_temp),_possibleConstructorReturn(_this5,_ret2);}CellRenderer.prototype.getChildContext=function getChildContext(){return{virtualizedCell:{cellKey:this.props.cellKey}};};CellRenderer.prototype.updateSeparatorProps=function updateSeparatorProps(newProps){this.setState(function(state){return{separatorProps:_extends2({},state.separatorProps,newProps)};});};CellRenderer.prototype.componentWillUnmount=function componentWillUnmount(){this.props.onUnmount(this.props.cellKey);};CellRenderer.prototype.render=function render(){var _props8=this.props,CellRendererComponent=_props8.CellRendererComponent,ItemSeparatorComponent=_props8.ItemSeparatorComponent,fillRateHelper=_props8.fillRateHelper,horizontal=_props8.horizontal,item=_props8.item,index=_props8.index,inversionStyle=_props8.inversionStyle,parentProps=_props8.parentProps;var renderItem=parentProps.renderItem,getItemLayout=parentProps.getItemLayout;invariant(renderItem,'no renderItem!');var element=renderItem({item:item,index:index,separators:this._separators});var onLayout=getItemLayout&&!parentProps.debug&&!fillRateHelper.enabled()?undefined:this.props.onLayout;var itemSeparator=ItemSeparatorComponent&&React.createElement(ItemSeparatorComponent,this.state.separatorProps);var cellStyle=inversionStyle?horizontal?[styles.rowReverse,inversionStyle]:[styles.columnReverse,inversionStyle]:horizontal?[styles.row,inversionStyle]:inversionStyle;if(!CellRendererComponent){return React.createElement(View,{style:cellStyle,onLayout:onLayout},element,itemSeparator);}return React.createElement(CellRendererComponent,_extends({},this.props,{style:cellStyle,onLayout:onLayout}),element,itemSeparator);};return CellRenderer;}(React.Component);CellRenderer.childContextTypes={virtualizedCell:PropTypes.shape({cellKey:PropTypes.string})};var VirtualizedCellWrapper=function(_React$Component2){_inherits(VirtualizedCellWrapper,_React$Component2);function VirtualizedCellWrapper(){_classCallCheck(this,VirtualizedCellWrapper);return _possibleConstructorReturn(this,_React$Component2.apply(this,arguments));}VirtualizedCellWrapper.prototype.getChildContext=function getChildContext(){return{virtualizedCell:{cellKey:this.props.cellKey}};};VirtualizedCellWrapper.prototype.render=function render(){return this.props.children;};return VirtualizedCellWrapper;}(React.Component);VirtualizedCellWrapper.childContextTypes={virtualizedCell:PropTypes.shape({cellKey:PropTypes.string})};var styles=StyleSheet.create({verticallyInverted:{transform:[{scaleY:-1}]},horizontallyInverted:{transform:[{scaleX:-1}]},row:{flexDirection:'row'},rowReverse:{flexDirection:'row-reverse'},columnReverse:{flexDirection:'column-reverse'}});export default VirtualizedList;","map":{"version":3,"sources":["C:/Users/arnol/code/entroprise/node_modules/react-web-gifted-chat/node_modules/react-native-web/dist/vendor/react-native/VirtualizedList/index.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","Batchinator","FillRateHelper","PropTypes","React","RefreshControl","ScrollView","StyleSheet","UIManager","View","ViewabilityHelper","computeWindowedRenderLimits","findNodeHandle","infoLog","invariant","warning","flattenStyle","flatten","__DEV__","process","env","NODE_ENV","_usedIndexForKey","VirtualizedList","_React$PureComponent","scrollToEnd","params","animated","veryLast","props","getItemCount","data","frame","_getFrameMetricsApprox","offset","Math","max","_footerLength","_scrollMetrics","visibleLength","_scrollRef","scrollTo","horizontal","x","y","scrollToIndex","_props","getItemLayout","onScrollToIndexFailed","index","viewOffset","viewPosition","_highestMeasuredFrameIndex","averageItemLength","_averageCellLength","highestMeasuredFrameIndex","scrollToItem","item","_props2","getItem","itemCount","_index","scrollToOffset","recordInteraction","_nestedChildLists","forEach","childList","ref","_viewabilityTuples","t","viewabilityHelper","_updateViewableItems","flashScrollIndicators","getScrollResponder","getScrollableNode","setNativeProps","getChildContext","virtualizedList","getScrollMetrics","_getScrollMetrics","getOutermostParentListRef","_getOutermostParentListRef","getNestedChildState","_getNestedChildState","registerAsNestedChild","_registerAsNestedChild","unregisterAsNestedChild","_unregisterAsNestedChild","_getCellKey","context","virtualizedCell","cellKey","hasMore","_hasMore","_this","_initialiseProps","onScroll","__isNative","windowSize","_fillRateHelper","_getFrameMetrics","_updateCellsToRenderBatcher","_updateCellsToRender","updateCellsBatchingPeriod","viewabilityConfigCallbackPairs","map","pair","viewabilityConfig","onViewableItemsChanged","push","initialState","first","initialScrollIndex","last","min","initialNumToRender","_isNestedWithSameOrientation","storedState","listKey","state","_frames","frames","componentDidMount","componentWillUnmount","dispose","abort","tuple","deactivateAndFlush","getDerivedStateFromProps","newProps","prevState","extraData","maxToRenderPerBatch","_pushCells","cells","stickyHeaderIndices","stickyIndicesFromProps","inversionStyle","_this2","_props3","CellRendererComponent","ItemSeparatorComponent","keyExtractor","stickyOffset","ListHeaderComponent","end","prevCellKey","_loop","ii","_indicesToKeys","set","has","createElement","CellRenderer","undefined","fillRateHelper","onUpdateSeparators","_onUpdateSeparators","onLayout","e","_onCellLayout","onUnmount","_onCellUnmount","parentProps","_ref","_x","apply","toString","_cellRefs","_isVirtualizationDisabled","disableVirtualization","nestedContext","render","flatStyles","contentContainerStyle","flexWrap","_props4","ListEmptyComponent","ListFooterComponent","_props5","isVirtualizationDisabled","inverted","styles","horizontallyInverted","verticallyInverted","Set","element","isValidElement","VirtualizedCellWrapper","_onLayoutHeader","style","spacerKey","lastInitialIndex","_state","_first","_last","firstAfterInitial","insertedStickySpacer","size","_ref2","_ref3","initBlock","stickyBlock","leadSpace","trailSpace","_ref4","_initBlock","firstSpace","_hasWarned","keys","console","warn","_ref5","lastFrame","endFrame","tailSpacerLength","_element","_onLayoutEmpty","_element2","_onLayoutFooter","scrollProps","onContentSizeChange","_onContentSizeChange","_onLayout","_onScroll","onScrollBeginDrag","_onScrollBeginDrag","onScrollEndDrag","_onScrollEndDrag","onMomentumScrollEnd","_onMomentumScrollEnd","scrollEventThrottle","invertStickyHeaders","ret","cloneElement","renderScrollComponent","_defaultRenderScrollComponent","_captureScrollRef","debug","flex","_renderDebugOverlay","componentDidUpdate","prevProps","_props6","_hasDataChangedSinceEndReached","resetViewableIndices","_scheduleCellsToRenderUpdate","_computeBlankness","computeBlankness","layout","nativeEvent","next","_selectOffset","_selectLength","inLayout","curr","_totalCellLength","_totalCellsMeasured","_measureLayoutRelativeToContainingList","_this3","measureLayout","error","width","height","_offsetFromParentVirtualizedList","contentLength","scrollMetrics","_convertParentScrollMetrics","normalize","framesInLayout","windowTop","frameLast","windowLen","visTop","visLen","baseStyle","position","top","right","bottom","borderColor","borderWidth","f","left","backgroundColor","metrics","_maybeCallOnEndReached","_props7","onEndReached","onEndReachedThreshold","distanceFromEnd","_sentEndForContentLength","_state2","_scrollMetrics2","velocity","hiPri","distTop","distBottom","scrollingThreshold","schedule","_this4","onUpdate","_createViewToken","PureComponent","defaultProps","String","contextTypes","shape","string","func","bool","childContextTypes","_this7","existingChildData","get","childListsInCell","_cellKeysToChildListKeys","add","_hasInteracted","updateSeparatorProps","Map","_headerLength","_hasDoneInitialScroll","_prevParentOffset","dOffset","dt","timestamp","onRefresh","refreshing","JSON","stringify","refreshControl","progressViewOffset","timeStamp","layoutMeasurement","contentSize","contentOffset","_convertParentScrollM","perf","prevDt","activate","_props9","setState","newState","_scrollMetrics3","_offset","_distanceFromEnd","renderAhead","newFirst","newLast","cellKeyForIndex","childListKeys","someChildHasMore","_iterator","_isArray","Array","isArray","_i","Symbol","iterator","_ref6","done","childKey","isViewable","_props10","_getItemLayout","_props11","frameType","number","isRequired","checkPropTypes","_React$Component","_temp","_this5","_ret2","_len","args","_key","concat","separatorProps","highlighted","leadingItem","_separators","highlight","_this5$props","unhighlight","_this5$props2","updateProps","select","_this5$props3","_props8","renderItem","separators","enabled","itemSeparator","cellStyle","rowReverse","columnReverse","row","Component","_React$Component2","children","transform","scaleY","scaleX","flexDirection"],"mappings":"sDAAA,GAAIA,CAAAA,QAAQ,CAAGC,MAAM,CAACC,MAAP,EAAiB,SAAUC,MAAV,CAAkB,CAAE,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGC,SAAS,CAACC,MAA9B,CAAsCF,CAAC,EAAvC,CAA2C,CAAE,GAAIG,CAAAA,MAAM,CAAGF,SAAS,CAACD,CAAD,CAAtB,CAA2B,IAAK,GAAII,CAAAA,GAAT,GAAgBD,CAAAA,MAAhB,CAAwB,CAAE,GAAIN,MAAM,CAACQ,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCJ,MAArC,CAA6CC,GAA7C,CAAJ,CAAuD,CAAEL,MAAM,CAACK,GAAD,CAAN,CAAcD,MAAM,CAACC,GAAD,CAApB,CAA4B,CAAE,CAAE,CAAC,MAAOL,CAAAA,MAAP,CAAgB,CAAhQ,CAEA,QAASS,CAAAA,eAAT,CAAyBC,QAAzB,CAAmCC,WAAnC,CAAgD,CAAE,GAAI,EAAED,QAAQ,WAAYC,CAAAA,WAAtB,CAAJ,CAAwC,CAAE,KAAM,IAAIC,CAAAA,SAAJ,CAAc,mCAAd,CAAN,CAA2D,CAAE,CAEzJ,QAASC,CAAAA,0BAAT,CAAoCC,IAApC,CAA0CN,IAA1C,CAAgD,CAAE,GAAI,CAACM,IAAL,CAAW,CAAE,KAAM,IAAIC,CAAAA,cAAJ,CAAmB,2DAAnB,CAAN,CAAwF,CAAC,MAAOP,CAAAA,IAAI,GAAK,MAAOA,CAAAA,IAAP,GAAgB,QAAhB,EAA4B,MAAOA,CAAAA,IAAP,GAAgB,UAAjD,CAAJ,CAAmEA,IAAnE,CAA0EM,IAAjF,CAAwF,CAEhP,QAASE,CAAAA,SAAT,CAAmBC,QAAnB,CAA6BC,UAA7B,CAAyC,CAAE,GAAI,MAAOA,CAAAA,UAAP,GAAsB,UAAtB,EAAoCA,UAAU,GAAK,IAAvD,CAA6D,CAAE,KAAM,IAAIN,CAAAA,SAAJ,CAAc,2DAA6D,MAAOM,CAAAA,UAAlF,CAAN,CAAsG,CAACD,QAAQ,CAACX,SAAT,CAAqBR,MAAM,CAACqB,MAAP,CAAcD,UAAU,EAAIA,UAAU,CAACZ,SAAvC,CAAkD,CAAEc,WAAW,CAAE,CAAEC,KAAK,CAAEJ,QAAT,CAAmBK,UAAU,CAAE,KAA/B,CAAsCC,QAAQ,CAAE,IAAhD,CAAsDC,YAAY,CAAE,IAApE,CAAf,CAAlD,CAArB,CAAqK,GAAIN,UAAJ,CAAgBpB,MAAM,CAAC2B,cAAP,CAAwB3B,MAAM,CAAC2B,cAAP,CAAsBR,QAAtB,CAAgCC,UAAhC,CAAxB,CAAsED,QAAQ,CAACS,SAAT,CAAqBR,UAA3F,CAAwG,CAW9e,MAAOS,CAAAA,WAAP,sBACA,MAAOC,CAAAA,cAAP,yBACA,MAAOC,CAAAA,SAAP,KAAsB,YAAtB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,cAAP,uCACA,MAAOC,CAAAA,UAAP,mCACA,MAAOC,CAAAA,UAAP,mCACA,MAAOC,CAAAA,SAAP,kCACA,MAAOC,CAAAA,IAAP,6BACA,MAAOC,CAAAA,iBAAP,4BACA,OAASC,2BAAT,0BACA,MAAOC,CAAAA,cAAP,uCACA,MAAOC,CAAAA,OAAP,kBACA,MAAOC,CAAAA,SAAP,KAAsB,oBAAtB,CACA,MAAOC,CAAAA,OAAP,KAAoB,kBAApB,CAEA,GAAIC,CAAAA,YAAY,CAAGT,UAAU,CAACU,OAA9B,CACA,GAAIC,CAAAA,OAAO,CAAGC,OAAO,CAACC,GAAR,CAAYC,QAAZ,GAAyB,YAAvC,CAKA,GAAIC,CAAAA,gBAAgB,CAAG,KAAvB,CA8BA,GAAIC,CAAAA,eAAe,CAAG,SAAUC,oBAAV,CAAgC,CACpDlC,SAAS,CAACiC,eAAD,CAAkBC,oBAAlB,CAAT,CAGAD,eAAe,CAAC3C,SAAhB,CAA0B6C,WAA1B,CAAwC,QAASA,CAAAA,WAAT,CAAqBC,MAArB,CAA6B,CACnE,GAAIC,CAAAA,QAAQ,CAAGD,MAAM,CAAGA,MAAM,CAACC,QAAV,CAAqB,IAA1C,CACA,GAAIC,CAAAA,QAAQ,CAAG,KAAKC,KAAL,CAAWC,YAAX,CAAwB,KAAKD,KAAL,CAAWE,IAAnC,EAA2C,CAA1D,CACA,GAAIC,CAAAA,KAAK,CAAG,KAAKC,sBAAL,CAA4BL,QAA5B,CAAZ,CACA,GAAIM,CAAAA,MAAM,CAAGC,IAAI,CAACC,GAAL,CAAS,CAAT,CAAYJ,KAAK,CAACE,MAAN,CAAeF,KAAK,CAACvD,MAArB,CAA8B,KAAK4D,aAAnC,CAAmD,KAAKC,cAAL,CAAoBC,aAAnF,CAAb,CAIA,KAAKC,UAAL,CAAgBC,QAAhB,CAIA,KAAKZ,KAAL,CAAWa,UAAX,CAAwB,CAAEC,CAAC,CAAET,MAAL,CAAaP,QAAQ,CAAEA,QAAvB,CAAxB,CAA4D,CAAEiB,CAAC,CAAEV,MAAL,CAAaP,QAAQ,CAAEA,QAAvB,CAJ5D,EAKD,CAbD,CAkBAJ,eAAe,CAAC3C,SAAhB,CAA0BiE,aAA1B,CAA0C,QAASA,CAAAA,aAAT,CAAuBnB,MAAvB,CAA+B,CACvE,GAAIoB,CAAAA,MAAM,CAAG,KAAKjB,KAAlB,CACIE,IAAI,CAAGe,MAAM,CAACf,IADlB,CAEIW,UAAU,CAAGI,MAAM,CAACJ,UAFxB,CAGIZ,YAAY,CAAGgB,MAAM,CAAChB,YAH1B,CAIIiB,aAAa,CAAGD,MAAM,CAACC,aAJ3B,CAKIC,qBAAqB,CAAGF,MAAM,CAACE,qBALnC,CAMA,GAAIrB,CAAAA,QAAQ,CAAGD,MAAM,CAACC,QAAtB,CACIsB,KAAK,CAAGvB,MAAM,CAACuB,KADnB,CAEIC,UAAU,CAAGxB,MAAM,CAACwB,UAFxB,CAGIC,YAAY,CAAGzB,MAAM,CAACyB,YAH1B,CAKArC,SAAS,CAACmC,KAAK,EAAI,CAAT,EAAcA,KAAK,CAAGnB,YAAY,CAACC,IAAD,CAAnC,CAA2C,+BAAiCkB,KAAjC,CAAyC,MAAzC,EAAmDnB,YAAY,CAACC,IAAD,CAAZ,CAAqB,CAAxE,CAA3C,CAAT,CACA,GAAI,CAACgB,aAAD,EAAkBE,KAAK,CAAG,KAAKG,0BAAnC,CAA+D,CAC7DtC,SAAS,CAAC,CAAC,CAACkC,qBAAH,CAA0B,4FAA8F,yFAAxH,CAAT,CACAA,qBAAqB,CAAC,CACpBK,iBAAiB,CAAE,KAAKC,kBADJ,CAEpBC,yBAAyB,CAAE,KAAKH,0BAFZ,CAGpBH,KAAK,CAAEA,KAHa,CAAD,CAArB,CAKA,OACD,CACD,GAAIjB,CAAAA,KAAK,CAAG,KAAKC,sBAAL,CAA4BgB,KAA5B,CAAZ,CACA,GAAIf,CAAAA,MAAM,CAAGC,IAAI,CAACC,GAAL,CAAS,CAAT,CAAYJ,KAAK,CAACE,MAAN,CAAe,CAACiB,YAAY,EAAI,CAAjB,GAAuB,KAAKb,cAAL,CAAoBC,aAApB,CAAoCP,KAAK,CAACvD,MAAjE,CAA3B,GAAwGyE,UAAU,EAAI,CAAtH,CAAb,CAIA,KAAKV,UAAL,CAAgBC,QAAhB,CAIAC,UAAU,CAAG,CAAEC,CAAC,CAAET,MAAL,CAAaP,QAAQ,CAAEA,QAAvB,CAAH,CAAuC,CAAEiB,CAAC,CAAEV,MAAL,CAAaP,QAAQ,CAAEA,QAAvB,CAJjD,EAKD,CAhCD,CAsCAJ,eAAe,CAAC3C,SAAhB,CAA0B4E,YAA1B,CAAyC,QAASA,CAAAA,YAAT,CAAsB9B,MAAtB,CAA8B,CACrE,GAAI+B,CAAAA,IAAI,CAAG/B,MAAM,CAAC+B,IAAlB,CACA,GAAIC,CAAAA,OAAO,CAAG,KAAK7B,KAAnB,CACIE,IAAI,CAAG2B,OAAO,CAAC3B,IADnB,CAEI4B,OAAO,CAAGD,OAAO,CAACC,OAFtB,CAGI7B,YAAY,CAAG4B,OAAO,CAAC5B,YAH3B,CAKA,GAAI8B,CAAAA,SAAS,CAAG9B,YAAY,CAACC,IAAD,CAA5B,CACA,IAAK,GAAI8B,CAAAA,MAAM,CAAG,CAAlB,CAAqBA,MAAM,CAAGD,SAA9B,CAAyCC,MAAM,EAA/C,CAAmD,CACjD,GAAIF,OAAO,CAAC5B,IAAD,CAAO8B,MAAP,CAAP,GAA0BJ,IAA9B,CAAoC,CAClC,KAAKZ,aAAL,CAAmB,UAAc,EAAd,CAAkBnB,MAAlB,CAA0B,CAAEuB,KAAK,CAAEY,MAAT,CAA1B,CAAnB,EACA,MACD,CACF,CACF,CAdD,CA4BAtC,eAAe,CAAC3C,SAAhB,CAA0BkF,cAA1B,CAA2C,QAASA,CAAAA,cAAT,CAAwBpC,MAAxB,CAAgC,CACzE,GAAIC,CAAAA,QAAQ,CAAGD,MAAM,CAACC,QAAtB,CACIO,MAAM,CAAGR,MAAM,CAACQ,MADpB,CAMA,KAAKM,UAAL,CAAgBC,QAAhB,CAIA,KAAKZ,KAAL,CAAWa,UAAX,CAAwB,CAAEC,CAAC,CAAET,MAAL,CAAaP,QAAQ,CAAEA,QAAvB,CAAxB,CAA4D,CAAEiB,CAAC,CAAEV,MAAL,CAAaP,QAAQ,CAAEA,QAAvB,CAJ5D,EAKD,CAZD,CAcAJ,eAAe,CAAC3C,SAAhB,CAA0BmF,iBAA1B,CAA8C,QAASA,CAAAA,iBAAT,EAA6B,CACzE,KAAKC,iBAAL,CAAuBC,OAAvB,CAA+B,SAAUC,SAAV,CAAqB,CAClDA,SAAS,CAACC,GAAV,EAAiBD,SAAS,CAACC,GAAV,CAAcJ,iBAAd,EAAjB,CACD,CAFD,EAGA,KAAKK,kBAAL,CAAwBH,OAAxB,CAAgC,SAAUI,CAAV,CAAa,CAC3CA,CAAC,CAACC,iBAAF,CAAoBP,iBAApB,GACD,CAFD,EAGA,KAAKQ,oBAAL,CAA0B,KAAK1C,KAAL,CAAWE,IAArC,EACD,CARD,CAUAR,eAAe,CAAC3C,SAAhB,CAA0B4F,qBAA1B,CAAkD,QAASA,CAAAA,qBAAT,EAAiC,CAIjF,KAAKhC,UAAL,CAAgBgC,qBAAhB,GACD,CALD,CAcAjD,eAAe,CAAC3C,SAAhB,CAA0B6F,kBAA1B,CAA+C,QAASA,CAAAA,kBAAT,EAA8B,CAC3E,GAAI,KAAKjC,UAAL,EAAmB,KAAKA,UAAL,CAAgBiC,kBAAvC,CAA2D,CACzD,MAAO,MAAKjC,UAAL,CAAgBiC,kBAAhB,EAAP,CACD,CACF,CAJD,CAMAlD,eAAe,CAAC3C,SAAhB,CAA0B8F,iBAA1B,CAA8C,QAASA,CAAAA,iBAAT,EAA6B,CACzE,GAAI,KAAKlC,UAAL,EAAmB,KAAKA,UAAL,CAAgBkC,iBAAvC,CAA0D,CACxD,MAAO,MAAKlC,UAAL,CAAgBkC,iBAAhB,EAAP,CACD,CAFD,IAEO,CACL,MAAO9D,CAAAA,cAAc,CAAC,KAAK4B,UAAN,CAArB,CACD,CACF,CAND,CAQAjB,eAAe,CAAC3C,SAAhB,CAA0B+F,cAA1B,CAA2C,QAASA,CAAAA,cAAT,CAAwB9C,KAAxB,CAA+B,CACxE,GAAI,KAAKW,UAAT,CAAqB,CACnB,KAAKA,UAAL,CAAgBmC,cAAhB,CAA+B9C,KAA/B,EACD,CACF,CAJD,CAMAN,eAAe,CAAC3C,SAAhB,CAA0BgG,eAA1B,CAA4C,QAASA,CAAAA,eAAT,EAA2B,CACrE,MAAO,CACLC,eAAe,CAAE,CACfC,gBAAgB,CAAE,KAAKC,iBADR,CAEfrC,UAAU,CAAE,KAAKb,KAAL,CAAWa,UAFR,CAGfsC,yBAAyB,CAAE,KAAKC,0BAHjB,CAIfC,mBAAmB,CAAE,KAAKC,oBAJX,CAKfC,qBAAqB,CAAE,KAAKC,sBALb,CAMfC,uBAAuB,CAAE,KAAKC,wBANf,CADZ,CAAP,CAUD,CAXD,CAaAhE,eAAe,CAAC3C,SAAhB,CAA0B4G,WAA1B,CAAwC,QAASA,CAAAA,WAAT,EAAuB,CAC7D,MAAO,MAAKC,OAAL,CAAaC,eAAb,EAAgC,KAAKD,OAAL,CAAaC,eAAb,CAA6BC,OAA7D,EAAwE,UAA/E,CACD,CAFD,CAIApE,eAAe,CAAC3C,SAAhB,CAA0BgH,OAA1B,CAAoC,QAASA,CAAAA,OAAT,EAAmB,CACrD,MAAO,MAAKC,QAAZ,CACD,CAFD,CAIA,QAAStE,CAAAA,eAAT,CAAyBM,KAAzB,CAAgC4D,OAAhC,CAAyC,CACvC1G,eAAe,CAAC,IAAD,CAAOwC,eAAP,CAAf,CAEA,GAAIuE,CAAAA,KAAK,CAAG3G,0BAA0B,CAAC,IAAD,CAAOqC,oBAAoB,CAAC1C,IAArB,CAA0B,IAA1B,CAAgC+C,KAAhC,CAAuC4D,OAAvC,CAAP,CAAtC,CAEAM,gBAAgB,CAACjH,IAAjB,CAAsBgH,KAAtB,EAEAhF,SAAS,CAAC,CAACe,KAAK,CAACmE,QAAP,EAAmB,CAACnE,KAAK,CAACmE,QAAN,CAAeC,UAApC,CAAgD,6FAA+F,wDAA/I,CAAT,CAEAnF,SAAS,CAACe,KAAK,CAACqE,UAAN,CAAmB,CAApB,CAAuB,yFAAvB,CAAT,CAEAJ,KAAK,CAACK,eAAN,CAAwB,GAAIjG,CAAAA,cAAJ,CAAmB4F,KAAK,CAACM,gBAAzB,CAAxB,CACAN,KAAK,CAACO,2BAAN,CAAoC,GAAIpG,CAAAA,WAAJ,CAAgB6F,KAAK,CAACQ,oBAAtB,CAA4CR,KAAK,CAACjE,KAAN,CAAY0E,yBAAxD,CAApC,CAEA,GAAIT,KAAK,CAACjE,KAAN,CAAY2E,8BAAhB,CAAgD,CAC9CV,KAAK,CAAC1B,kBAAN,CAA2B0B,KAAK,CAACjE,KAAN,CAAY2E,8BAAZ,CAA2CC,GAA3C,CAA+C,SAAUC,IAAV,CAAgB,CACxF,MAAO,CACLpC,iBAAiB,CAAE,GAAI5D,CAAAA,iBAAJ,CAAsBgG,IAAI,CAACC,iBAA3B,CADd,CAELC,sBAAsB,CAAEF,IAAI,CAACE,sBAFxB,CAAP,CAID,CAL0B,CAA3B,CAMD,CAPD,IAOO,IAAId,KAAK,CAACjE,KAAN,CAAY+E,sBAAhB,CAAwC,CAC7Cd,KAAK,CAAC1B,kBAAN,CAAyByC,IAAzB,CAA8B,CAC5BvC,iBAAiB,CAAE,GAAI5D,CAAAA,iBAAJ,CAAsBoF,KAAK,CAACjE,KAAN,CAAY8E,iBAAlC,CADS,CAE5BC,sBAAsB,CAAEd,KAAK,CAACjE,KAAN,CAAY+E,sBAFR,CAA9B,EAID,CAED,GAAIE,CAAAA,YAAY,CAAG,CACjBC,KAAK,CAAEjB,KAAK,CAACjE,KAAN,CAAYmF,kBAAZ,EAAkC,CADxB,CAEjBC,IAAI,CAAE9E,IAAI,CAAC+E,GAAL,CAASpB,KAAK,CAACjE,KAAN,CAAYC,YAAZ,CAAyBgE,KAAK,CAACjE,KAAN,CAAYE,IAArC,CAAT,CAAqD,CAAC+D,KAAK,CAACjE,KAAN,CAAYmF,kBAAZ,EAAkC,CAAnC,EAAwClB,KAAK,CAACjE,KAAN,CAAYsF,kBAAzG,EAA+H,CAFpH,CAAnB,CAKA,GAAIrB,KAAK,CAACsB,4BAAN,EAAJ,CAA0C,CACxC,GAAIC,CAAAA,WAAW,CAAGvB,KAAK,CAACL,OAAN,CAAcZ,eAAd,CAA8BK,mBAA9B,CAAkDY,KAAK,CAACjE,KAAN,CAAYyF,OAAZ,EAAuBxB,KAAK,CAACN,WAAN,EAAzE,CAAlB,CACA,GAAI6B,WAAJ,CAAiB,CACfP,YAAY,CAAGO,WAAf,CACAvB,KAAK,CAACyB,KAAN,CAAcF,WAAd,CACAvB,KAAK,CAAC0B,OAAN,CAAgBH,WAAW,CAACI,MAA5B,CACD,CACF,CAED3B,KAAK,CAACyB,KAAN,CAAcT,YAAd,CACA,MAAOhB,CAAAA,KAAP,CACD,CAEDvE,eAAe,CAAC3C,SAAhB,CAA0B8I,iBAA1B,CAA8C,QAASA,CAAAA,iBAAT,EAA6B,CACzE,GAAI,KAAKN,4BAAL,EAAJ,CAAyC,CACvC,KAAK3B,OAAL,CAAaZ,eAAb,CAA6BO,qBAA7B,CAAmD,CACjDO,OAAO,CAAE,KAAKH,WAAL,EADwC,CAEjD7G,GAAG,CAAE,KAAKkD,KAAL,CAAWyF,OAAX,EAAsB,KAAK9B,WAAL,EAFsB,CAGjDrB,GAAG,CAAE,IAH4C,CAAnD,EAKD,CACF,CARD,CAUA5C,eAAe,CAAC3C,SAAhB,CAA0B+I,oBAA1B,CAAiD,QAASA,CAAAA,oBAAT,EAAgC,CAC/E,GAAI,KAAKP,4BAAL,EAAJ,CAAyC,CACvC,KAAK3B,OAAL,CAAaZ,eAAb,CAA6BS,uBAA7B,CAAqD,CACnD3G,GAAG,CAAE,KAAKkD,KAAL,CAAWyF,OAAX,EAAsB,KAAK9B,WAAL,EADwB,CAEnD+B,KAAK,CAAE,CACLR,KAAK,CAAE,KAAKQ,KAAL,CAAWR,KADb,CAELE,IAAI,CAAE,KAAKM,KAAL,CAAWN,IAFZ,CAGLQ,MAAM,CAAE,KAAKD,OAHR,CAF4C,CAArD,EAQD,CACD,KAAKjD,oBAAL,CAA0B,IAA1B,EACA,KAAK8B,2BAAL,CAAiCuB,OAAjC,CAAyC,CAAEC,KAAK,CAAE,IAAT,CAAzC,EACA,KAAKzD,kBAAL,CAAwBH,OAAxB,CAAgC,SAAU6D,KAAV,CAAiB,CAC/CA,KAAK,CAACxD,iBAAN,CAAwBsD,OAAxB,GACD,CAFD,EAGA,KAAKzB,eAAL,CAAqB4B,kBAArB,GACD,CAjBD,CAmBAxG,eAAe,CAACyG,wBAAhB,CAA2C,QAASA,CAAAA,wBAAT,CAAkCC,QAAlC,CAA4CC,SAA5C,CAAuD,CAChG,GAAInG,CAAAA,IAAI,CAAGkG,QAAQ,CAAClG,IAApB,CACIoG,SAAS,CAAGF,QAAQ,CAACE,SADzB,CAEIrG,YAAY,CAAGmG,QAAQ,CAACnG,YAF5B,CAGIsG,mBAAmB,CAAGH,QAAQ,CAACG,mBAHnC,CAOA,MAAO,CACLrB,KAAK,CAAE5E,IAAI,CAACC,GAAL,CAAS,CAAT,CAAYD,IAAI,CAAC+E,GAAL,CAASgB,SAAS,CAACnB,KAAnB,CAA0BjF,YAAY,CAACC,IAAD,CAAZ,CAAqB,CAArB,CAAyBqG,mBAAnD,CAAZ,CADF,CAELnB,IAAI,CAAE9E,IAAI,CAACC,GAAL,CAAS,CAAT,CAAYD,IAAI,CAAC+E,GAAL,CAASgB,SAAS,CAACjB,IAAnB,CAAyBnF,YAAY,CAACC,IAAD,CAAZ,CAAqB,CAA9C,CAAZ,CAFD,CAAP,CAID,CAZD,CAcAR,eAAe,CAAC3C,SAAhB,CAA0ByJ,UAA1B,CAAuC,QAASA,CAAAA,UAAT,CAAoBC,KAApB,CAA2BC,mBAA3B,CAAgDC,sBAAhD,CAAwEzB,KAAxE,CAA+EE,IAA/E,CAAqFwB,cAArF,CAAqG,CAC1I,GAAIC,CAAAA,MAAM,CAAG,IAAb,CAEA,GAAIC,CAAAA,OAAO,CAAG,KAAK9G,KAAnB,CACI+G,qBAAqB,CAAGD,OAAO,CAACC,qBADpC,CAEIC,sBAAsB,CAAGF,OAAO,CAACE,sBAFrC,CAGI9G,IAAI,CAAG4G,OAAO,CAAC5G,IAHnB,CAII4B,OAAO,CAAGgF,OAAO,CAAChF,OAJtB,CAKI7B,YAAY,CAAG6G,OAAO,CAAC7G,YAL3B,CAMIY,UAAU,CAAGiG,OAAO,CAACjG,UANzB,CAOIoG,YAAY,CAAGH,OAAO,CAACG,YAP3B,CASA,GAAIC,CAAAA,YAAY,CAAG,KAAKlH,KAAL,CAAWmH,mBAAX,CAAiC,CAAjC,CAAqC,CAAxD,CACA,GAAIC,CAAAA,GAAG,CAAGnH,YAAY,CAACC,IAAD,CAAZ,CAAqB,CAA/B,CACA,GAAImH,CAAAA,WAAW,CAAG,IAAK,EAAvB,CACAjC,IAAI,CAAG9E,IAAI,CAAC+E,GAAL,CAAS+B,GAAT,CAAchC,IAAd,CAAP,CAEA,GAAIkC,CAAAA,KAAK,CAAG,QAASA,CAAAA,KAAT,CAAeC,EAAf,CAAmB,CAC7B,GAAI3F,CAAAA,IAAI,CAAGE,OAAO,CAAC5B,IAAD,CAAOqH,EAAP,CAAlB,CACA,GAAIzK,CAAAA,GAAG,CAAGmK,YAAY,CAACrF,IAAD,CAAO2F,EAAP,CAAtB,CACAV,MAAM,CAACW,cAAP,CAAsBC,GAAtB,CAA0BF,EAA1B,CAA8BzK,GAA9B,EACA,GAAI6J,sBAAsB,CAACe,GAAvB,CAA2BH,EAAE,CAAGL,YAAhC,CAAJ,CAAmD,CACjDR,mBAAmB,CAAC1B,IAApB,CAAyByB,KAAK,CAAC7J,MAA/B,EACD,CACD6J,KAAK,CAACzB,IAAN,CAAWzG,KAAK,CAACoJ,aAAN,CAAoBC,YAApB,CAAkC,CAC3Cb,qBAAqB,CAAEA,qBADoB,CAE3CC,sBAAsB,CAAEO,EAAE,CAAGH,GAAL,CAAWJ,sBAAX,CAAoCa,SAFjB,CAG3C/D,OAAO,CAAEhH,GAHkC,CAI3CgL,cAAc,CAAEjB,MAAM,CAACvC,eAJoB,CAK3CzD,UAAU,CAAEA,UAL+B,CAM3CO,KAAK,CAAEmG,EANoC,CAO3CX,cAAc,CAAEA,cAP2B,CAQ3ChF,IAAI,CAAEA,IARqC,CAS3C9E,GAAG,CAAEA,GATsC,CAU3CuK,WAAW,CAAEA,WAV8B,CAW3CU,kBAAkB,CAAElB,MAAM,CAACmB,mBAXgB,CAY3CC,QAAQ,CAAE,QAASA,CAAAA,QAAT,CAAkBC,CAAlB,CAAqB,CAC7B,MAAOrB,CAAAA,MAAM,CAACsB,aAAP,CAAqBD,CAArB,CAAwBpL,GAAxB,CAA6ByK,EAA7B,CAAP,CACD,CAd0C,CAe3Ca,SAAS,CAAEvB,MAAM,CAACwB,cAfyB,CAgB3CC,WAAW,CAAEzB,MAAM,CAAC7G,KAhBuB,CAiB3CsC,GAAG,CAAE,SAAUiG,IAAV,CAAgB,CACnB,QAASjG,CAAAA,GAAT,CAAakG,EAAb,CAAiB,CACf,MAAOD,CAAAA,IAAI,CAACE,KAAL,CAAW,IAAX,CAAiB9L,SAAjB,CAAP,CACD,CAED2F,GAAG,CAACoG,QAAJ,CAAe,UAAY,CACzB,MAAOH,CAAAA,IAAI,CAACG,QAAL,EAAP,CACD,CAFD,CAIA,MAAOpG,CAAAA,GAAP,CACD,CAVI,CAUH,SAAUA,GAAV,CAAe,CACfuE,MAAM,CAAC8B,SAAP,CAAiB7L,GAAjB,EAAwBwF,GAAxB,CACD,CAZI,CAjBsC,CAAlC,CAAX,EA+BA+E,WAAW,CAAGvK,GAAd,CACD,CAvCD,CAyCA,IAAK,GAAIyK,CAAAA,EAAE,CAAGrC,KAAd,CAAqBqC,EAAE,EAAInC,IAA3B,CAAiCmC,EAAE,EAAnC,CAAuC,CACrCD,KAAK,CAACC,EAAD,CAAL,CACD,CACF,CA7DD,CA+DA7H,eAAe,CAAC3C,SAAhB,CAA0B6L,yBAA1B,CAAsD,QAASA,CAAAA,yBAAT,EAAqC,CACzF,MAAO,MAAK5I,KAAL,CAAW6I,qBAAlB,CACD,CAFD,CAIAnJ,eAAe,CAAC3C,SAAhB,CAA0BwI,4BAA1B,CAAyD,QAASA,CAAAA,4BAAT,EAAwC,CAC/F,GAAIuD,CAAAA,aAAa,CAAG,KAAKlF,OAAL,CAAaZ,eAAjC,CACA,MAAO,CAAC,EAAE8F,aAAa,EAAI,CAAC,CAACA,aAAa,CAACjI,UAAhB,GAA+B,CAAC,CAAC,KAAKb,KAAL,CAAWa,UAA/D,CAAR,CACD,CAHD,CAKAnB,eAAe,CAAC3C,SAAhB,CAA0BgM,MAA1B,CAAmC,QAASA,CAAAA,MAAT,EAAkB,CACnD,GAAI1J,OAAJ,CAAa,CACX,GAAI2J,CAAAA,UAAU,CAAG7J,YAAY,CAAC,KAAKa,KAAL,CAAWiJ,qBAAZ,CAA7B,CACA/J,OAAO,CAAC8J,UAAU,EAAI,IAAd,EAAsBA,UAAU,CAACE,QAAX,GAAwB,MAA/C,CAAuD,6EAA+E,sDAAtI,CAAP,CACD,CACD,GAAIC,CAAAA,OAAO,CAAG,KAAKnJ,KAAnB,CACIoJ,kBAAkB,CAAGD,OAAO,CAACC,kBADjC,CAEIC,mBAAmB,CAAGF,OAAO,CAACE,mBAFlC,CAGIlC,mBAAmB,CAAGgC,OAAO,CAAChC,mBAHlC,CAIA,GAAImC,CAAAA,OAAO,CAAG,KAAKtJ,KAAnB,CACIE,IAAI,CAAGoJ,OAAO,CAACpJ,IADnB,CAEIW,UAAU,CAAGyI,OAAO,CAACzI,UAFzB,CAIA,GAAI0I,CAAAA,wBAAwB,CAAG,KAAKX,yBAAL,EAA/B,CACA,GAAIhC,CAAAA,cAAc,CAAG,KAAK5G,KAAL,CAAWwJ,QAAX,CAAsB,KAAKxJ,KAAL,CAAWa,UAAX,CAAwB4I,MAAM,CAACC,oBAA/B,CAAsDD,MAAM,CAACE,kBAAnF,CAAwG,IAA7H,CACA,GAAIlD,CAAAA,KAAK,CAAG,EAAZ,CACA,GAAIE,CAAAA,sBAAsB,CAAG,GAAIiD,CAAAA,GAAJ,CAAQ,KAAK5J,KAAL,CAAW0G,mBAAnB,CAA7B,CACA,GAAIA,CAAAA,mBAAmB,CAAG,EAA1B,CACA,GAAIS,mBAAJ,CAAyB,CACvB,GAAIR,sBAAsB,CAACe,GAAvB,CAA2B,CAA3B,CAAJ,CAAmC,CACjChB,mBAAmB,CAAC1B,IAApB,CAAyB,CAAzB,EACD,CACD,GAAI6E,CAAAA,OAAO,CAAGtL,KAAK,CAACuL,cAAN,CAAqB3C,mBAArB,EAA4CA,mBAA5C,CAEd5I,KAAK,CAACoJ,aAAN,CAAoBR,mBAApB,CAAyC,IAAzC,CAFA,CAGAV,KAAK,CAACzB,IAAN,CAAWzG,KAAK,CAACoJ,aAAN,CACToC,sBADS,CAET,CACEjG,OAAO,CAAE,KAAKH,WAAL,GAAqB,SADhC,CAEE7G,GAAG,CAAE,SAFP,CAFS,CAKTyB,KAAK,CAACoJ,aAAN,CACE/I,IADF,CAEE,CAAEqJ,QAAQ,CAAE,KAAK+B,eAAjB,CAAkCC,KAAK,CAAErD,cAAzC,CAFF,CAGEiD,OAHF,CALS,CAAX,EAWD,CACD,GAAI9H,CAAAA,SAAS,CAAG,KAAK/B,KAAL,CAAWC,YAAX,CAAwBC,IAAxB,CAAhB,CACA,GAAI6B,SAAS,CAAG,CAAhB,CAAmB,CACjBtC,gBAAgB,CAAG,KAAnB,CACA,GAAIyK,CAAAA,SAAS,CAAG,CAACrJ,UAAD,CAAc,QAAd,CAAyB,OAAzC,CACA,GAAIsJ,CAAAA,gBAAgB,CAAG,KAAKnK,KAAL,CAAWmF,kBAAX,CAAgC,CAAC,CAAjC,CAAqC,KAAKnF,KAAL,CAAWsF,kBAAX,CAAgC,CAA5F,CACA,GAAI8E,CAAAA,MAAM,CAAG,KAAK1E,KAAlB,CACI2E,MAAM,CAAGD,MAAM,CAAClF,KADpB,CAEIoF,KAAK,CAAGF,MAAM,CAAChF,IAFnB,CAIA,KAAKoB,UAAL,CAAgBC,KAAhB,CAAuBC,mBAAvB,CAA4CC,sBAA5C,CAAoE,CAApE,CAAuEwD,gBAAvE,CAAyFvD,cAAzF,EACA,GAAI2D,CAAAA,iBAAiB,CAAGjK,IAAI,CAACC,GAAL,CAAS4J,gBAAgB,CAAG,CAA5B,CAA+BE,MAA/B,CAAxB,CACA,GAAI,CAACd,wBAAD,EAA6Bc,MAAM,CAAGF,gBAAgB,CAAG,CAA7D,CAAgE,CAC9D,GAAIK,CAAAA,oBAAoB,CAAG,KAA3B,CACA,GAAI7D,sBAAsB,CAAC8D,IAAvB,CAA8B,CAAlC,CAAqC,CACnC,GAAIvD,CAAAA,YAAY,CAAGC,mBAAmB,CAAG,CAAH,CAAO,CAA7C,CAEA,IAAK,GAAII,CAAAA,EAAE,CAAGgD,iBAAiB,CAAG,CAAlC,CAAqChD,EAAE,CAAG4C,gBAA1C,CAA4D5C,EAAE,EAA9D,CAAkE,CAChE,GAAIZ,sBAAsB,CAACe,GAAvB,CAA2BH,EAAE,CAAGL,YAAhC,CAAJ,CAAmD,CACjD,GAAIwD,CAAAA,KAAJ,CAAWC,KAAX,CAEA,GAAIC,CAAAA,SAAS,CAAG,KAAKxK,sBAAL,CAA4B+J,gBAA5B,CAAhB,CACA,GAAIU,CAAAA,WAAW,CAAG,KAAKzK,sBAAL,CAA4BmH,EAA5B,CAAlB,CACA,GAAIuD,CAAAA,SAAS,CAAGD,WAAW,CAACxK,MAAZ,EAAsBuK,SAAS,CAACvK,MAAV,CAAmBuK,SAAS,CAAChO,MAAnD,CAAhB,CACA6J,KAAK,CAACzB,IAAN,CAAWzG,KAAK,CAACoJ,aAAN,CAAoB/I,IAApB,CAA0B,CAAE9B,GAAG,CAAE,cAAP,CAAuBmN,KAAK,EAAGS,KAAK,CAAG,EAAR,CAAYA,KAAK,CAACR,SAAD,CAAL,CAAmBY,SAA/B,CAA0CJ,KAA7C,CAA5B,CAA1B,CAAX,EACA,KAAKlE,UAAL,CAAgBC,KAAhB,CAAuBC,mBAAvB,CAA4CC,sBAA5C,CAAoEY,EAApE,CAAwEA,EAAxE,CAA4EX,cAA5E,EACA,GAAImE,CAAAA,UAAU,CAAG,KAAK3K,sBAAL,CAA4BiK,MAA5B,EAAoChK,MAApC,EAA8CwK,WAAW,CAACxK,MAAZ,CAAqBwK,WAAW,CAACjO,MAA/E,CAAjB,CACA6J,KAAK,CAACzB,IAAN,CAAWzG,KAAK,CAACoJ,aAAN,CAAoB/I,IAApB,CAA0B,CAAE9B,GAAG,CAAE,eAAP,CAAwBmN,KAAK,EAAGU,KAAK,CAAG,EAAR,CAAYA,KAAK,CAACT,SAAD,CAAL,CAAmBa,UAA/B,CAA2CJ,KAA9C,CAA7B,CAA1B,CAAX,EACAH,oBAAoB,CAAG,IAAvB,CACA,MACD,CACF,CACF,CACD,GAAI,CAACA,oBAAL,CAA2B,CACzB,GAAIQ,CAAAA,KAAJ,CAEA,GAAIC,CAAAA,UAAU,CAAG,KAAK7K,sBAAL,CAA4B+J,gBAA5B,CAAjB,CACA,GAAIe,CAAAA,UAAU,CAAG,KAAK9K,sBAAL,CAA4BiK,MAA5B,EAAoChK,MAApC,EAA8C4K,UAAU,CAAC5K,MAAX,CAAoB4K,UAAU,CAACrO,MAA7E,CAAjB,CACA6J,KAAK,CAACzB,IAAN,CAAWzG,KAAK,CAACoJ,aAAN,CAAoB/I,IAApB,CAA0B,CAAE9B,GAAG,CAAE,cAAP,CAAuBmN,KAAK,EAAGe,KAAK,CAAG,EAAR,CAAYA,KAAK,CAACd,SAAD,CAAL,CAAmBgB,UAA/B,CAA2CF,KAA9C,CAA5B,CAA1B,CAAX,EACD,CACF,CACD,KAAKxE,UAAL,CAAgBC,KAAhB,CAAuBC,mBAAvB,CAA4CC,sBAA5C,CAAoE4D,iBAApE,CAAuFD,KAAvF,CAA8F1D,cAA9F,EACA,GAAI,CAAC,KAAKuE,UAAL,CAAgBC,IAAjB,EAAyB3L,gBAA7B,CAA+C,CAC7C4L,OAAO,CAACC,IAAR,CAAa,wFAA0F,wCAAvG,EACA,KAAKH,UAAL,CAAgBC,IAAhB,CAAuB,IAAvB,CACD,CACD,GAAI,CAAC7B,wBAAD,EAA6Be,KAAK,CAAGvI,SAAS,CAAG,CAArD,CAAwD,CACtD,GAAIwJ,CAAAA,KAAJ,CAEA,GAAIC,CAAAA,SAAS,CAAG,KAAKpL,sBAAL,CAA4BkK,KAA5B,CAAhB,CAIA,GAAIlD,CAAAA,GAAG,CAAG,KAAKpH,KAAL,CAAWkB,aAAX,CAA2Ba,SAAS,CAAG,CAAvC,CAA2CzB,IAAI,CAAC+E,GAAL,CAAStD,SAAS,CAAG,CAArB,CAAwB,KAAKR,0BAA7B,CAArD,CACA,GAAIkK,CAAAA,QAAQ,CAAG,KAAKrL,sBAAL,CAA4BgH,GAA5B,CAAf,CACA,GAAIsE,CAAAA,gBAAgB,CAAGD,QAAQ,CAACpL,MAAT,CAAkBoL,QAAQ,CAAC7O,MAA3B,EAAqC4O,SAAS,CAACnL,MAAV,CAAmBmL,SAAS,CAAC5O,MAAlE,CAAvB,CACA6J,KAAK,CAACzB,IAAN,CAAWzG,KAAK,CAACoJ,aAAN,CAAoB/I,IAApB,CAA0B,CAAE9B,GAAG,CAAE,cAAP,CAAuBmN,KAAK,EAAGsB,KAAK,CAAG,EAAR,CAAYA,KAAK,CAACrB,SAAD,CAAL,CAAmBwB,gBAA/B,CAAiDH,KAApD,CAA5B,CAA1B,CAAX,EACD,CACF,CAxDD,IAwDO,IAAInC,kBAAJ,CAAwB,CAC7B,GAAIuC,CAAAA,QAAQ,CAAGpN,KAAK,CAACuL,cAAN,CAAqBV,kBAArB,EAA2CA,kBAA3C,CAEf7K,KAAK,CAACoJ,aAAN,CAAoByB,kBAApB,CAAwC,IAAxC,CAFA,CAGA3C,KAAK,CAACzB,IAAN,CAAWzG,KAAK,CAACoJ,aAAN,CACT/I,IADS,CAET,CACE9B,GAAG,CAAE,QADP,CAEEmL,QAAQ,CAAE,KAAK2D,cAFjB,CAGE3B,KAAK,CAAErD,cAHT,CAFS,CAMT+E,QANS,CAAX,EAQD,CACD,GAAItC,mBAAJ,CAAyB,CACvB,GAAIwC,CAAAA,SAAS,CAAGtN,KAAK,CAACuL,cAAN,CAAqBT,mBAArB,EAA4CA,mBAA5C,CAEhB9K,KAAK,CAACoJ,aAAN,CAAoB0B,mBAApB,CAAyC,IAAzC,CAFA,CAGA5C,KAAK,CAACzB,IAAN,CAAWzG,KAAK,CAACoJ,aAAN,CACToC,sBADS,CAET,CACEjG,OAAO,CAAE,KAAKH,WAAL,GAAqB,SADhC,CAEE7G,GAAG,CAAE,SAFP,CAFS,CAKTyB,KAAK,CAACoJ,aAAN,CACE/I,IADF,CAEE,CAAEqJ,QAAQ,CAAE,KAAK6D,eAAjB,CAAkC7B,KAAK,CAAErD,cAAzC,CAFF,CAGEiF,SAHF,CALS,CAAX,EAWD,CACD,GAAIE,CAAAA,WAAW,CAAG,UAAc,EAAd,CAAkB,KAAK/L,KAAvB,CAA8B,CAC9CgM,mBAAmB,CAAE,KAAKC,oBADoB,CAE9ChE,QAAQ,CAAE,KAAKiE,SAF+B,CAG9C/H,QAAQ,CAAE,KAAKgI,SAH+B,CAI9CC,iBAAiB,CAAE,KAAKC,kBAJsB,CAK9CC,eAAe,CAAE,KAAKC,gBALwB,CAM9CC,mBAAmB,CAAE,KAAKC,oBANoB,CAO9CC,mBAAmB,CAAE,KAAK1M,KAAL,CAAW0M,mBAPc,CAQ9CC,mBAAmB,CAAE,KAAK3M,KAAL,CAAW2M,mBAAX,GAAmC9E,SAAnC,CAA+C,KAAK7H,KAAL,CAAW2M,mBAA1D,CAAgF,KAAK3M,KAAL,CAAWwJ,QARlE,CAS9C9C,mBAAmB,CAAEA,mBATyB,CAA9B,CAAlB,CAWA,GAAIE,cAAJ,CAAoB,CAClBmF,WAAW,CAAC9B,KAAZ,CAAoB,CAACrD,cAAD,CAAiB,KAAK5G,KAAL,CAAWiK,KAA5B,CAApB,CACD,CAED,KAAKjG,QAAL,CAAgB,KAAK0B,KAAL,CAAWN,IAAX,CAAkB,KAAKpF,KAAL,CAAWC,YAAX,CAAwB,KAAKD,KAAL,CAAWE,IAAnC,EAA2C,CAA7E,CAEA,GAAI0M,CAAAA,GAAG,CAAGrO,KAAK,CAACsO,YAAN,CAAmB,CAAC,KAAK7M,KAAL,CAAW8M,qBAAX,EAAoC,KAAKC,6BAA1C,EAAyEhB,WAAzE,CAAnB,CAA0G,CAClHzJ,GAAG,CAAE,KAAK0K,iBADwG,CAA1G,CAEPvG,KAFO,CAAV,CAGA,GAAI,KAAKzG,KAAL,CAAWiN,KAAf,CAAsB,CACpB,MAAO1O,CAAAA,KAAK,CAACoJ,aAAN,CACL/I,IADK,CAEL,CAAEqL,KAAK,CAAE,CAAEiD,IAAI,CAAE,CAAR,CAAT,CAFK,CAGLN,GAHK,CAIL,KAAKO,mBAAL,EAJK,CAAP,CAMD,CAPD,IAOO,CACL,MAAOP,CAAAA,GAAP,CACD,CACF,CAzJD,CA2JAlN,eAAe,CAAC3C,SAAhB,CAA0BqQ,kBAA1B,CAA+C,QAASA,CAAAA,kBAAT,CAA4BC,SAA5B,CAAuC,CACpF,GAAIC,CAAAA,OAAO,CAAG,KAAKtN,KAAnB,CACIE,IAAI,CAAGoN,OAAO,CAACpN,IADnB,CAEIoG,SAAS,CAAGgH,OAAO,CAAChH,SAFxB,CAIA,GAAIpG,IAAI,GAAKmN,SAAS,CAACnN,IAAnB,EAA2BoG,SAAS,GAAK+G,SAAS,CAAC/G,SAAvD,CAAkE,CAChE,KAAKiH,8BAAL,CAAsC,IAAtC,CAIA,KAAKhL,kBAAL,CAAwBH,OAAxB,CAAgC,SAAU6D,KAAV,CAAiB,CAC/CA,KAAK,CAACxD,iBAAN,CAAwB+K,oBAAxB,GACD,CAFD,EAGD,CACD,KAAKC,4BAAL,GACD,CAfD,CAmBA/N,eAAe,CAAC3C,SAAhB,CAA0B2Q,iBAA1B,CAA8C,QAASA,CAAAA,iBAAT,EAA6B,CACzE,KAAKpJ,eAAL,CAAqBqJ,gBAArB,CAAsC,KAAK3N,KAA3C,CAAkD,KAAK0F,KAAvD,CAA8D,KAAKjF,cAAnE,EACD,CAFD,CAIAf,eAAe,CAAC3C,SAAhB,CAA0BoL,aAA1B,CAA0C,QAASA,CAAAA,aAAT,CAAuBD,CAAvB,CAA0BpE,OAA1B,CAAmC1C,KAAnC,CAA0C,CAClF,GAAIwM,CAAAA,MAAM,CAAG1F,CAAC,CAAC2F,WAAF,CAAcD,MAA3B,CACA,GAAIE,CAAAA,IAAI,CAAG,CACTzN,MAAM,CAAE,KAAK0N,aAAL,CAAmBH,MAAnB,CADC,CAEThR,MAAM,CAAE,KAAKoR,aAAL,CAAmBJ,MAAnB,CAFC,CAGTxM,KAAK,CAAEA,KAHE,CAIT6M,QAAQ,CAAE,IAJD,CAAX,CAMA,GAAIC,CAAAA,IAAI,CAAG,KAAKvI,OAAL,CAAa7B,OAAb,CAAX,CACA,GAAI,CAACoK,IAAD,EAASJ,IAAI,CAACzN,MAAL,GAAgB6N,IAAI,CAAC7N,MAA9B,EAAwCyN,IAAI,CAAClR,MAAL,GAAgBsR,IAAI,CAACtR,MAA7D,EAAuEwE,KAAK,GAAK8M,IAAI,CAAC9M,KAA1F,CAAiG,CAC/F,KAAK+M,gBAAL,EAAyBL,IAAI,CAAClR,MAAL,EAAesR,IAAI,CAAGA,IAAI,CAACtR,MAAR,CAAiB,CAApC,CAAzB,CACA,KAAKwR,mBAAL,EAA4BF,IAAI,CAAG,CAAH,CAAO,CAAvC,CACA,KAAKzM,kBAAL,CAA0B,KAAK0M,gBAAL,CAAwB,KAAKC,mBAAvD,CACA,KAAKzI,OAAL,CAAa7B,OAAb,EAAwBgK,IAAxB,CACA,KAAKvM,0BAAL,CAAkCjB,IAAI,CAACC,GAAL,CAAS,KAAKgB,0BAAd,CAA0CH,KAA1C,CAAlC,CACA,KAAKqM,4BAAL,GACD,CAPD,IAOO,CACL,KAAK9H,OAAL,CAAa7B,OAAb,EAAsBmK,QAAtB,CAAiC,IAAjC,CACD,CACD,KAAKP,iBAAL,GACD,CApBD,CAsBAhO,eAAe,CAAC3C,SAAhB,CAA0BsR,sCAA1B,CAAmE,QAASA,CAAAA,sCAAT,EAAkD,CACnH,GAAIC,CAAAA,MAAM,CAAG,IAAb,CAEA3P,SAAS,CAAC4P,aAAV,CAAwBxP,cAAc,CAAC,IAAD,CAAtC,CAA8CA,cAAc,CAAC,KAAK6E,OAAL,CAAaZ,eAAb,CAA6BG,yBAA7B,EAAD,CAA5D,CAAwH,SAAUqL,KAAV,CAAiB,CACvInD,OAAO,CAACC,IAAR,CAAa,iEAAmE,8CAAhF,EACD,CAFD,CAEG,SAAUxK,CAAV,CAAaC,CAAb,CAAgB0N,KAAhB,CAAuBC,MAAvB,CAA+B,CAChCJ,MAAM,CAACK,gCAAP,CAA0CL,MAAM,CAACP,aAAP,CAAqB,CAAEjN,CAAC,CAAEA,CAAL,CAAQC,CAAC,CAAEA,CAAX,CAArB,CAA1C,CACAuN,MAAM,CAAC7N,cAAP,CAAsBmO,aAAtB,CAAsCN,MAAM,CAACN,aAAP,CAAqB,CAAES,KAAK,CAAEA,KAAT,CAAgBC,MAAM,CAAEA,MAAxB,CAArB,CAAtC,CAEA,GAAIG,CAAAA,aAAa,CAAGP,MAAM,CAACQ,2BAAP,CAAmCR,MAAM,CAAC1K,OAAP,CAAeZ,eAAf,CAA+BC,gBAA/B,EAAnC,CAApB,CACAqL,MAAM,CAAC7N,cAAP,CAAsBC,aAAtB,CAAsCmO,aAAa,CAACnO,aAApD,CACA4N,MAAM,CAAC7N,cAAP,CAAsBJ,MAAtB,CAA+BwO,aAAa,CAACxO,MAA7C,CACD,CATD,EAUD,CAbD,CAeAX,eAAe,CAAC3C,SAAhB,CAA0BoQ,mBAA1B,CAAgD,QAASA,CAAAA,mBAAT,EAA+B,CAC7E,GAAI4B,CAAAA,SAAS,CAAG,KAAKtO,cAAL,CAAoBC,aAApB,CAAoC,KAAKD,cAAL,CAAoBmO,aAAxE,CACA,GAAII,CAAAA,cAAc,CAAG,EAArB,CACA,GAAIjN,CAAAA,SAAS,CAAG,KAAK/B,KAAL,CAAWC,YAAX,CAAwB,KAAKD,KAAL,CAAWE,IAAnC,CAAhB,CACA,IAAK,GAAIqH,CAAAA,EAAE,CAAG,CAAd,CAAiBA,EAAE,CAAGxF,SAAtB,CAAiCwF,EAAE,EAAnC,CAAuC,CACrC,GAAIpH,CAAAA,KAAK,CAAG,KAAKC,sBAAL,CAA4BmH,EAA5B,CAAZ,CACA,GAAIpH,KAAK,CAAC8N,QAAV,CAAoB,CAClBe,cAAc,CAAChK,IAAf,CAAoB7E,KAApB,EACD,CACF,CACD,GAAI8O,CAAAA,SAAS,CAAG,KAAK7O,sBAAL,CAA4B,KAAKsF,KAAL,CAAWR,KAAvC,EAA8C7E,MAA9D,CACA,GAAI6O,CAAAA,SAAS,CAAG,KAAK9O,sBAAL,CAA4B,KAAKsF,KAAL,CAAWN,IAAvC,CAAhB,CACA,GAAI+J,CAAAA,SAAS,CAAGD,SAAS,CAAC7O,MAAV,CAAmB6O,SAAS,CAACtS,MAA7B,CAAsCqS,SAAtD,CACA,GAAIG,CAAAA,MAAM,CAAG,KAAK3O,cAAL,CAAoBJ,MAAjC,CACA,GAAIgP,CAAAA,MAAM,CAAG,KAAK5O,cAAL,CAAoBC,aAAjC,CACA,GAAI4O,CAAAA,SAAS,CAAG,CAAEC,QAAQ,CAAE,UAAZ,CAAwBC,GAAG,CAAE,CAA7B,CAAgCC,KAAK,CAAE,CAAvC,CAAhB,CACA,MAAOlR,CAAAA,KAAK,CAACoJ,aAAN,CACL/I,IADK,CAEL,CACEqL,KAAK,CAAE,UAAc,EAAd,CAAkBqF,SAAlB,CAA6B,CAClCI,MAAM,CAAE,CAD0B,CAElCjB,KAAK,CAAE,EAF2B,CAGlCkB,WAAW,CAAE,MAHqB,CAIlCC,WAAW,CAAE,CAJqB,CAA7B,CADT,CAFK,CASLZ,cAAc,CAACpK,GAAf,CAAmB,SAAUiL,CAAV,CAAatI,EAAb,CAAiB,CAClC,MAAOhJ,CAAAA,KAAK,CAACoJ,aAAN,CAAoB/I,IAApB,CAA0B,CAC/B9B,GAAG,CAAE,IAAMyK,EADoB,CAE/B0C,KAAK,CAAE,UAAc,EAAd,CAAkBqF,SAAlB,CAA6B,CAClCQ,IAAI,CAAE,CAD4B,CAElCN,GAAG,CAAEK,CAAC,CAACxP,MAAF,CAAW0O,SAFkB,CAGlCL,MAAM,CAAEmB,CAAC,CAACjT,MAAF,CAAWmS,SAHe,CAIlCgB,eAAe,CAAE,QAJiB,CAA7B,CAFwB,CAA1B,CAAP,CASD,CAVD,CATK,CAoBLxR,KAAK,CAACoJ,aAAN,CAAoB/I,IAApB,CAA0B,CACxBqL,KAAK,CAAE,UAAc,EAAd,CAAkBqF,SAAlB,CAA6B,CAClCQ,IAAI,CAAE,CAD4B,CAElCN,GAAG,CAAEP,SAAS,CAAGF,SAFiB,CAGlCL,MAAM,CAAES,SAAS,CAAGJ,SAHc,CAIlCY,WAAW,CAAE,OAJqB,CAKlCC,WAAW,CAAE,CALqB,CAA7B,CADiB,CAA1B,CApBK,CA6BLrR,KAAK,CAACoJ,aAAN,CAAoB/I,IAApB,CAA0B,CACxBqL,KAAK,CAAE,UAAc,EAAd,CAAkBqF,SAAlB,CAA6B,CAClCQ,IAAI,CAAE,CAD4B,CAElCN,GAAG,CAAEJ,MAAM,CAAGL,SAFoB,CAGlCL,MAAM,CAAEW,MAAM,CAAGN,SAHiB,CAIlCY,WAAW,CAAE,KAJqB,CAKlCC,WAAW,CAAE,CALqB,CAA7B,CADiB,CAA1B,CA7BK,CAAP,CAuCD,CAvDD,CAyDAlQ,eAAe,CAAC3C,SAAhB,CAA0BiR,aAA1B,CAA0C,QAASA,CAAAA,aAAT,CAAuBgC,OAAvB,CAAgC,CACxE,MAAO,CAAC,KAAKhQ,KAAL,CAAWa,UAAZ,CAAyBmP,OAAO,CAACtB,MAAjC,CAA0CsB,OAAO,CAACvB,KAAzD,CACD,CAFD,CAIA/O,eAAe,CAAC3C,SAAhB,CAA0BgR,aAA1B,CAA0C,QAASA,CAAAA,aAAT,CAAuBiC,OAAvB,CAAgC,CACxE,MAAO,CAAC,KAAKhQ,KAAL,CAAWa,UAAZ,CAAyBmP,OAAO,CAACjP,CAAjC,CAAqCiP,OAAO,CAAClP,CAApD,CACD,CAFD,CAIApB,eAAe,CAAC3C,SAAhB,CAA0BkT,sBAA1B,CAAmD,QAASA,CAAAA,sBAAT,EAAkC,CACnF,GAAIC,CAAAA,OAAO,CAAG,KAAKlQ,KAAnB,CACIE,IAAI,CAAGgQ,OAAO,CAAChQ,IADnB,CAEID,YAAY,CAAGiQ,OAAO,CAACjQ,YAF3B,CAGIkQ,YAAY,CAAGD,OAAO,CAACC,YAH3B,CAIIC,qBAAqB,CAAGF,OAAO,CAACE,qBAJpC,CAKA,GAAI3P,CAAAA,cAAc,CAAG,KAAKA,cAA1B,CACImO,aAAa,CAAGnO,cAAc,CAACmO,aADnC,CAEIlO,aAAa,CAAGD,cAAc,CAACC,aAFnC,CAGIL,MAAM,CAAGI,cAAc,CAACJ,MAH5B,CAKA,GAAIgQ,CAAAA,eAAe,CAAGzB,aAAa,CAAGlO,aAAhB,CAAgCL,MAAtD,CACA,GAAI8P,YAAY,EAAI,KAAKzK,KAAL,CAAWN,IAAX,GAAoBnF,YAAY,CAACC,IAAD,CAAZ,CAAqB,CAAzD,EAIJmQ,eAAe,CAAGD,qBAAqB,CAAG1P,aAJtC,GAIwD,KAAK6M,8BAAL,EAAuC,KAAK9M,cAAL,CAAoBmO,aAApB,GAAsC,KAAK0B,wBAJ1I,CAAJ,CAIyK,CAEvK,KAAK/C,8BAAL,CAAsC,KAAtC,CACA,KAAK+C,wBAAL,CAAgC,KAAK7P,cAAL,CAAoBmO,aAApD,CACAuB,YAAY,CAAC,CAAEE,eAAe,CAAEA,eAAnB,CAAD,CAAZ,CACD,CACF,CAtBD,CA6BA3Q,eAAe,CAAC3C,SAAhB,CAA0B0Q,4BAA1B,CAAyD,QAASA,CAAAA,4BAAT,EAAwC,CAC/F,GAAI8C,CAAAA,OAAO,CAAG,KAAK7K,KAAnB,CACIR,KAAK,CAAGqL,OAAO,CAACrL,KADpB,CAEIE,IAAI,CAAGmL,OAAO,CAACnL,IAFnB,CAGA,GAAIoL,CAAAA,eAAe,CAAG,KAAK/P,cAA3B,CACIJ,MAAM,CAAGmQ,eAAe,CAACnQ,MAD7B,CAEIK,aAAa,CAAG8P,eAAe,CAAC9P,aAFpC,CAGI+P,QAAQ,CAAGD,eAAe,CAACC,QAH/B,CAKA,GAAI1O,CAAAA,SAAS,CAAG,KAAK/B,KAAL,CAAWC,YAAX,CAAwB,KAAKD,KAAL,CAAWE,IAAnC,CAAhB,CACA,GAAIwQ,CAAAA,KAAK,CAAG,KAAZ,CACA,GAAIxL,KAAK,CAAG,CAAR,EAAaE,IAAI,CAAGrD,SAAS,CAAG,CAApC,CAAuC,CACrC,GAAI4O,CAAAA,OAAO,CAAGtQ,MAAM,CAAG,KAAKD,sBAAL,CAA4B8E,KAA5B,EAAmC7E,MAA1D,CACA,GAAIuQ,CAAAA,UAAU,CAAG,KAAKxQ,sBAAL,CAA4BgF,IAA5B,EAAkC/E,MAAlC,EAA4CA,MAAM,CAAGK,aAArD,CAAjB,CACA,GAAImQ,CAAAA,kBAAkB,CAItB,KAAK7Q,KAAL,CAAWoQ,qBAAX,CAAmC1P,aAAnC,CAAmD,CAJnD,CAKAgQ,KAAK,CAAGpQ,IAAI,CAAC+E,GAAL,CAASsL,OAAT,CAAkBC,UAAlB,EAAgC,CAAhC,EAAqCH,QAAQ,CAAG,CAAC,CAAZ,EAAiBE,OAAO,CAAGE,kBAAhE,EAAsFJ,QAAQ,CAAG,CAAX,EAAgBG,UAAU,CAAGC,kBAA3H,CACD,CAMD,GAAIH,KAAK,EAAI,KAAKjP,kBAAlB,CAAsC,CAGpC,KAAK+C,2BAAL,CAAiCuB,OAAjC,CAAyC,CAAEC,KAAK,CAAE,IAAT,CAAzC,EACA,KAAKvB,oBAAL,GACA,OACD,CAND,IAMO,CACL,KAAKD,2BAAL,CAAiCsM,QAAjC,GACD,CACF,CAnCD,CAqCApR,eAAe,CAAC3C,SAAhB,CAA0B2F,oBAA1B,CAAiD,QAASA,CAAAA,oBAAT,CAA8BxC,IAA9B,CAAoC,CACnF,GAAI6Q,CAAAA,MAAM,CAAG,IAAb,CAEA,GAAI9Q,CAAAA,YAAY,CAAG,KAAKD,KAAL,CAAWC,YAA9B,CAGA,KAAKsC,kBAAL,CAAwBH,OAAxB,CAAgC,SAAU6D,KAAV,CAAiB,CAC/CA,KAAK,CAACxD,iBAAN,CAAwBuO,QAAxB,CAAiC/Q,YAAY,CAACC,IAAD,CAA7C,CAAqD6Q,MAAM,CAACtQ,cAAP,CAAsBJ,MAA3E,CAAmF0Q,MAAM,CAACtQ,cAAP,CAAsBC,aAAzG,CAAwHqQ,MAAM,CAACxM,gBAA/H,CAAiJwM,MAAM,CAACE,gBAAxJ,CAA0KhL,KAAK,CAAClB,sBAAhL,CAAwMgM,MAAM,CAACrL,KAA/M,EACD,CAFD,EAGD,CATD,CAWA,MAAOhG,CAAAA,eAAP,CACD,CA9qBqB,CA8qBpBnB,KAAK,CAAC2S,aA9qBc,CAAtB,CAgrBAxR,eAAe,CAACyR,YAAhB,CAA+B,CAC7BtI,qBAAqB,CAAEvJ,OAAO,CAACC,GAAR,CAAYC,QAAZ,GAAyB,MADnB,CAE7BqB,UAAU,CAAE,KAFiB,CAG7ByE,kBAAkB,CAAE,EAHS,CAI7B2B,YAAY,CAAE,QAASA,CAAAA,YAAT,CAAsBrF,IAAtB,CAA4BR,KAA5B,CAAmC,CAC/C,GAAIQ,IAAI,CAAC9E,GAAL,EAAY,IAAhB,CAAsB,CACpB,MAAO8E,CAAAA,IAAI,CAAC9E,GAAZ,CACD,CACD2C,gBAAgB,CAAG,IAAnB,CACA,MAAO2R,CAAAA,MAAM,CAAChQ,KAAD,CAAb,CACD,CAV4B,CAW7BmF,mBAAmB,CAAE,EAXQ,CAY7B6J,qBAAqB,CAAE,CAZM,CAa7B1D,mBAAmB,CAAE,EAbQ,CAc7BhI,yBAAyB,CAAE,EAdE,CAe7BL,UAAU,CAAE,EAfiB,CAA/B,CAiBA3E,eAAe,CAAC2R,YAAhB,CAA+B,CAC7BxN,eAAe,CAAEvF,SAAS,CAACgT,KAAV,CAAgB,CAC/BxN,OAAO,CAAExF,SAAS,CAACiT,MADY,CAAhB,CADY,CAI7BvO,eAAe,CAAE1E,SAAS,CAACgT,KAAV,CAAgB,CAC/BrO,gBAAgB,CAAE3E,SAAS,CAACkT,IADG,CAE/B3Q,UAAU,CAAEvC,SAAS,CAACmT,IAFS,CAG/BtO,yBAAyB,CAAE7E,SAAS,CAACkT,IAHN,CAI/BnO,mBAAmB,CAAE/E,SAAS,CAACkT,IAJA,CAK/BjO,qBAAqB,CAAEjF,SAAS,CAACkT,IALF,CAM/B/N,uBAAuB,CAAEnF,SAAS,CAACkT,IANJ,CAAhB,CAJY,CAA/B,CAaA9R,eAAe,CAACgS,iBAAhB,CAAoC,CAClC1O,eAAe,CAAE1E,SAAS,CAACgT,KAAV,CAAgB,CAC/BrO,gBAAgB,CAAE3E,SAAS,CAACkT,IADG,CAE/B3Q,UAAU,CAAEvC,SAAS,CAACmT,IAFS,CAG/BtO,yBAAyB,CAAE7E,SAAS,CAACkT,IAHN,CAI/BnO,mBAAmB,CAAE/E,SAAS,CAACkT,IAJA,CAK/BjO,qBAAqB,CAAEjF,SAAS,CAACkT,IALF,CAM/B/N,uBAAuB,CAAEnF,SAAS,CAACkT,IANJ,CAAhB,CADiB,CAApC,CAWA,GAAItN,CAAAA,gBAAgB,CAAG,QAASA,CAAAA,gBAAT,EAA4B,CACjD,GAAIyN,CAAAA,MAAM,CAAG,IAAb,CAEA,KAAKzO,iBAAL,CAAyB,UAAY,CACnC,MAAOyO,CAAAA,MAAM,CAAClR,cAAd,CACD,CAFD,CAIA,KAAK2C,0BAAL,CAAkC,UAAY,CAC5C,GAAIuO,MAAM,CAACpM,4BAAP,EAAJ,CAA2C,CACzC,MAAOoM,CAAAA,MAAM,CAAC/N,OAAP,CAAeZ,eAAf,CAA+BG,yBAA/B,EAAP,CACD,CAFD,IAEO,CACL,MAAOwO,CAAAA,MAAP,CACD,CACF,CAND,CAQA,KAAKrO,oBAAL,CAA4B,SAAUxG,GAAV,CAAe,CACzC,GAAI8U,CAAAA,iBAAiB,CAAGD,MAAM,CAACxP,iBAAP,CAAyB0P,GAAzB,CAA6B/U,GAA7B,CAAxB,CACA,MAAO8U,CAAAA,iBAAiB,EAAIA,iBAAiB,CAAClM,KAA9C,CACD,CAHD,CAKA,KAAKlC,sBAAL,CAA8B,SAAUnB,SAAV,CAAqB,CAEjD,GAAIyP,CAAAA,gBAAgB,CAAGH,MAAM,CAACI,wBAAP,CAAgCF,GAAhC,CAAoCxP,SAAS,CAACyB,OAA9C,GAA0D,GAAI8F,CAAAA,GAAJ,EAAjF,CACAkI,gBAAgB,CAACE,GAAjB,CAAqB3P,SAAS,CAACvF,GAA/B,EACA6U,MAAM,CAACI,wBAAP,CAAgCtK,GAAhC,CAAoCpF,SAAS,CAACyB,OAA9C,CAAuDgO,gBAAvD,EAEA,GAAIF,CAAAA,iBAAiB,CAAGD,MAAM,CAACxP,iBAAP,CAAyB0P,GAAzB,CAA6BxP,SAAS,CAACvF,GAAvC,CAAxB,CACAmC,SAAS,CAAC,EAAE2S,iBAAiB,EAAIA,iBAAiB,CAACtP,GAAlB,GAA0B,IAAjD,CAAD,CAAyD,2DAA6D,sEAA7D,CAAsI,iEAA/L,CAAT,CACAqP,MAAM,CAACxP,iBAAP,CAAyBsF,GAAzB,CAA6BpF,SAAS,CAACvF,GAAvC,CAA4C,CAC1CwF,GAAG,CAAED,SAAS,CAACC,GAD2B,CAE1CoD,KAAK,CAAE,IAFmC,CAA5C,EAKA,GAAIiM,MAAM,CAACM,cAAX,CAA2B,CACzB5P,SAAS,CAACC,GAAV,CAAcJ,iBAAd,GACD,CACF,CAhBD,CAkBA,KAAKwB,wBAAL,CAAgC,SAAUrB,SAAV,CAAqB,CACnDsP,MAAM,CAACxP,iBAAP,CAAyBsF,GAAzB,CAA6BpF,SAAS,CAACvF,GAAvC,CAA4C,CAC1CwF,GAAG,CAAE,IADqC,CAE1CoD,KAAK,CAAErD,SAAS,CAACqD,KAFyB,CAA5C,EAID,CALD,CAOA,KAAKsC,mBAAL,CAA2B,SAAUoD,IAAV,CAAgBhF,QAAhB,CAA0B,CACnDgF,IAAI,CAAChJ,OAAL,CAAa,SAAUtF,GAAV,CAAe,CAC1B,GAAIwF,CAAAA,GAAG,CAAGxF,GAAG,EAAI,IAAP,EAAe6U,MAAM,CAAChJ,SAAP,CAAiB7L,GAAjB,CAAzB,CACAwF,GAAG,EAAIA,GAAG,CAAC4P,oBAAJ,CAAyB9L,QAAzB,CAAP,CACD,CAHD,EAID,CALD,CAOA,KAAK3E,kBAAL,CAA0B,CAA1B,CACA,KAAKsQ,wBAAL,CAAgC,GAAII,CAAAA,GAAJ,EAAhC,CACA,KAAKxJ,SAAL,CAAiB,EAAjB,CACA,KAAKhD,OAAL,CAAe,EAAf,CACA,KAAKnF,aAAL,CAAqB,CAArB,CACA,KAAK+M,8BAAL,CAAsC,IAAtC,CACA,KAAK0E,cAAL,CAAsB,KAAtB,CACA,KAAKjO,QAAL,CAAgB,KAAhB,CACA,KAAKmH,UAAL,CAAkB,EAAlB,CACA,KAAK5J,0BAAL,CAAkC,CAAlC,CACA,KAAK6Q,aAAL,CAAqB,CAArB,CACA,KAAK5K,cAAL,CAAsB,GAAI2K,CAAAA,GAAJ,EAAtB,CACA,KAAKE,qBAAL,CAA6B,KAA7B,CACA,KAAKlQ,iBAAL,CAAyB,GAAIgQ,CAAAA,GAAJ,EAAzB,CACA,KAAKxD,gCAAL,CAAwC,CAAxC,CACA,KAAK2D,iBAAL,CAAyB,CAAzB,CACA,KAAK7R,cAAL,CAAsB,CACpBmO,aAAa,CAAE,CADK,CAEpB2D,OAAO,CAAE,CAFW,CAGpBC,EAAE,CAAE,EAHgB,CAIpBnS,MAAM,CAAE,CAJY,CAKpBoS,SAAS,CAAE,CALS,CAMpBhC,QAAQ,CAAE,CANU,CAOpB/P,aAAa,CAAE,CAPK,CAAtB,CASA,KAAKC,UAAL,CAAkB,IAAlB,CACA,KAAK2P,wBAAL,CAAgC,CAAhC,CACA,KAAKnC,gBAAL,CAAwB,CAAxB,CACA,KAAKC,mBAAL,CAA2B,CAA3B,CACA,KAAK7L,kBAAL,CAA0B,EAA1B,CAEA,KAAKyK,iBAAL,CAAyB,SAAU1K,GAAV,CAAe,CACtCqP,MAAM,CAAChR,UAAP,CAAoB2B,GAApB,CACD,CAFD,CAIA,KAAKyK,6BAAL,CAAqC,SAAU/M,KAAV,CAAiB,CACpD,GAAI2R,MAAM,CAACpM,4BAAP,EAAJ,CAA2C,CACzC,MAAOhH,CAAAA,KAAK,CAACoJ,aAAN,CAAoB/I,IAApB,CAA0BoB,KAA1B,CAAP,CACD,CAFD,IAEO,IAAIA,KAAK,CAAC0S,SAAV,CAAqB,CAC1BzT,SAAS,CAAC,MAAOe,CAAAA,KAAK,CAAC2S,UAAb,GAA4B,SAA7B,CAAwC,oFAAsFC,IAAI,CAACC,SAAL,CAAe7S,KAAK,CAAC2S,UAArB,CAAtF,CAAyH,GAAjK,CAAT,CACA,MAAOpU,CAAAA,KAAK,CAACoJ,aAAN,CAAoBlJ,UAApB,CAAgCnC,QAAQ,CAAC,EAAD,CAAK0D,KAAL,CAAY,CACzD8S,cAAc,CAIdvU,KAAK,CAACoJ,aAAN,CAAoBnJ,cAApB,CAAoC,CAClCmU,UAAU,CAAE3S,KAAK,CAAC2S,UADgB,CAElCD,SAAS,CAAE1S,KAAK,CAAC0S,SAFiB,CAGlCK,kBAAkB,CAAE/S,KAAK,CAAC+S,kBAHQ,CAApC,CALyD,CAAZ,CAAxC,CAAP,CAWD,CAbM,IAaA,CACL,MAAOxU,CAAAA,KAAK,CAACoJ,aAAN,CAAoBlJ,UAApB,CAAgCuB,KAAhC,CAAP,CACD,CACF,CAnBD,CAqBA,KAAKqI,cAAL,CAAsB,SAAUvE,OAAV,CAAmB,CACvC,GAAIoK,CAAAA,IAAI,CAAGyD,MAAM,CAAChM,OAAP,CAAe7B,OAAf,CAAX,CACA,GAAIoK,IAAJ,CAAU,CACRyD,MAAM,CAAChM,OAAP,CAAe7B,OAAf,EAA0B,UAAc,EAAd,CAAkBoK,IAAlB,CAAwB,CAAED,QAAQ,CAAE,KAAZ,CAAxB,CAA1B,CACD,CACF,CALD,CAOA,KAAK/B,SAAL,CAAiB,SAAUhE,CAAV,CAAa,CAC5B,GAAIyJ,MAAM,CAACpM,4BAAP,EAAJ,CAA2C,CAGzCoM,MAAM,CAACtD,sCAAP,GACD,CAJD,IAIO,CACLsD,MAAM,CAAClR,cAAP,CAAsBC,aAAtB,CAAsCiR,MAAM,CAAC3D,aAAP,CAAqB9F,CAAC,CAAC2F,WAAF,CAAcD,MAAnC,CAAtC,CACD,CACD+D,MAAM,CAAC3R,KAAP,CAAaiI,QAAb,EAAyB0J,MAAM,CAAC3R,KAAP,CAAaiI,QAAb,CAAsBC,CAAtB,CAAzB,CACAyJ,MAAM,CAAClE,4BAAP,GACAkE,MAAM,CAAC1B,sBAAP,GACD,CAXD,CAaA,KAAKrE,cAAL,CAAsB,SAAU1D,CAAV,CAAa,CACjCyJ,MAAM,CAAC3R,KAAP,CAAaiI,QAAb,EAAyB0J,MAAM,CAAC3R,KAAP,CAAaiI,QAAb,CAAsBC,CAAtB,CAAzB,CACD,CAFD,CAIA,KAAK4D,eAAL,CAAuB,SAAU5D,CAAV,CAAa,CAClCyJ,MAAM,CAACnR,aAAP,CAAuBmR,MAAM,CAAC3D,aAAP,CAAqB9F,CAAC,CAAC2F,WAAF,CAAcD,MAAnC,CAAvB,CACD,CAFD,CAIA,KAAK5D,eAAL,CAAuB,SAAU9B,CAAV,CAAa,CAClCyJ,MAAM,CAACS,aAAP,CAAuBT,MAAM,CAAC3D,aAAP,CAAqB9F,CAAC,CAAC2F,WAAF,CAAcD,MAAnC,CAAvB,CACD,CAFD,CAIA,KAAK3B,oBAAL,CAA4B,SAAUwC,KAAV,CAAiBC,MAAjB,CAAyB,CACnD,GAAID,KAAK,CAAG,CAAR,EAAaC,MAAM,CAAG,CAAtB,EAA2BiD,MAAM,CAAC3R,KAAP,CAAamF,kBAAb,EAAmC,IAA9D,EAAsEwM,MAAM,CAAC3R,KAAP,CAAamF,kBAAb,CAAkC,CAAxG,EAA6G,CAACwM,MAAM,CAACU,qBAAzH,CAAgJ,CAC9IV,MAAM,CAAC3Q,aAAP,CAAqB,CACnBlB,QAAQ,CAAE,KADS,CAEnBsB,KAAK,CAAEuQ,MAAM,CAAC3R,KAAP,CAAamF,kBAFD,CAArB,EAIAwM,MAAM,CAACU,qBAAP,CAA+B,IAA/B,CACD,CACD,GAAIV,MAAM,CAAC3R,KAAP,CAAagM,mBAAjB,CAAsC,CACpC2F,MAAM,CAAC3R,KAAP,CAAagM,mBAAb,CAAiCyC,KAAjC,CAAwCC,MAAxC,EACD,CACDiD,MAAM,CAAClR,cAAP,CAAsBmO,aAAtB,CAAsC+C,MAAM,CAAC3D,aAAP,CAAqB,CAAEU,MAAM,CAAEA,MAAV,CAAkBD,KAAK,CAAEA,KAAzB,CAArB,CAAtC,CACAkD,MAAM,CAAClE,4BAAP,GACAkE,MAAM,CAAC1B,sBAAP,GACD,CAdD,CAgBA,KAAKnB,2BAAL,CAAmC,SAAUkB,OAAV,CAAmB,CAEpD,GAAI3P,CAAAA,MAAM,CAAG2P,OAAO,CAAC3P,MAAR,CAAiBsR,MAAM,CAAChD,gCAArC,CAEA,GAAIjO,CAAAA,aAAa,CAAGsP,OAAO,CAACtP,aAA5B,CACA,GAAI6R,CAAAA,OAAO,CAAGlS,MAAM,CAAGsR,MAAM,CAAClR,cAAP,CAAsBJ,MAA7C,CACA,GAAIuO,CAAAA,aAAa,CAAG+C,MAAM,CAAClR,cAAP,CAAsBmO,aAA1C,CAEA,MAAO,CACLlO,aAAa,CAAEA,aADV,CAELkO,aAAa,CAAEA,aAFV,CAGLvO,MAAM,CAAEA,MAHH,CAILkS,OAAO,CAAEA,OAJJ,CAAP,CAMD,CAdD,CAgBA,KAAKpG,SAAL,CAAiB,SAAUjE,CAAV,CAAa,CAC5ByJ,MAAM,CAACxP,iBAAP,CAAyBC,OAAzB,CAAiC,SAAUC,SAAV,CAAqB,CACpDA,SAAS,CAACC,GAAV,EAAiBD,SAAS,CAACC,GAAV,CAAc6J,SAAd,CAAwBjE,CAAxB,CAAjB,CACD,CAFD,EAGA,GAAIyJ,MAAM,CAAC3R,KAAP,CAAamE,QAAjB,CAA2B,CACzBwN,MAAM,CAAC3R,KAAP,CAAamE,QAAb,CAAsB+D,CAAtB,EACD,CACD,GAAIuK,CAAAA,SAAS,CAAGvK,CAAC,CAAC8K,SAAlB,CACA,GAAItS,CAAAA,aAAa,CAAGiR,MAAM,CAAC3D,aAAP,CAAqB9F,CAAC,CAAC2F,WAAF,CAAcoF,iBAAnC,CAApB,CACA,GAAIrE,CAAAA,aAAa,CAAG+C,MAAM,CAAC3D,aAAP,CAAqB9F,CAAC,CAAC2F,WAAF,CAAcqF,WAAnC,CAApB,CACA,GAAI7S,CAAAA,MAAM,CAAGsR,MAAM,CAAC5D,aAAP,CAAqB7F,CAAC,CAAC2F,WAAF,CAAcsF,aAAnC,CAAb,CACA,GAAIZ,CAAAA,OAAO,CAAGlS,MAAM,CAAGsR,MAAM,CAAClR,cAAP,CAAsBJ,MAA7C,CAEA,GAAIsR,MAAM,CAACpM,4BAAP,EAAJ,CAA2C,CACzC,GAAIoM,MAAM,CAAClR,cAAP,CAAsBmO,aAAtB,GAAwC,CAA5C,CAA+C,CAG7C,OACD,CAED,GAAIwE,CAAAA,qBAAqB,CAAGzB,MAAM,CAAC7C,2BAAP,CAAmC,CAC7DpO,aAAa,CAAEA,aAD8C,CAE7DL,MAAM,CAAEA,MAFqD,CAAnC,CAA5B,CAKAK,aAAa,CAAG0S,qBAAqB,CAAC1S,aAAtC,CACAkO,aAAa,CAAGwE,qBAAqB,CAACxE,aAAtC,CACAvO,MAAM,CAAG+S,qBAAqB,CAAC/S,MAA/B,CACAkS,OAAO,CAAGa,qBAAqB,CAACb,OAAhC,CACD,CAED,GAAIC,CAAAA,EAAE,CAAGb,MAAM,CAAClR,cAAP,CAAsBgS,SAAtB,CAAkCnS,IAAI,CAACC,GAAL,CAAS,CAAT,CAAYkS,SAAS,CAAGd,MAAM,CAAClR,cAAP,CAAsBgS,SAA9C,CAAlC,CAA6F,CAAtG,CACA,GAAIhC,CAAAA,QAAQ,CAAG8B,OAAO,CAAGC,EAAzB,CAEA,GAAIA,EAAE,CAAG,GAAL,EAAYb,MAAM,CAAClR,cAAP,CAAsB+R,EAAtB,CAA2B,GAAvC,EAA8C5D,aAAa,CAAG,EAAIlO,aAAlE,EAAmF,CAACiR,MAAM,CAACxG,UAAP,CAAkBkI,IAA1G,CAAgH,CAC9GrU,OAAO,CAAC,kFAAoF,sFAApF,CAA6K,iDAA9K,CAAiO,CAAEwT,EAAE,CAAEA,EAAN,CAAUc,MAAM,CAAE3B,MAAM,CAAClR,cAAP,CAAsB+R,EAAxC,CAA4C5D,aAAa,CAAEA,aAA3D,CAAjO,CAAP,CACA+C,MAAM,CAACxG,UAAP,CAAkBkI,IAAlB,CAAyB,IAAzB,CACD,CACD1B,MAAM,CAAClR,cAAP,CAAwB,CACtBmO,aAAa,CAAEA,aADO,CAEtB4D,EAAE,CAAEA,EAFkB,CAGtBD,OAAO,CAAEA,OAHa,CAItBlS,MAAM,CAAEA,MAJc,CAKtBoS,SAAS,CAAEA,SALW,CAMtBhC,QAAQ,CAAEA,QANY,CAOtB/P,aAAa,CAAEA,aAPO,CAAxB,CASAiR,MAAM,CAACjP,oBAAP,CAA4BiP,MAAM,CAAC3R,KAAP,CAAaE,IAAzC,EACA,GAAI,CAACyR,MAAM,CAAC3R,KAAZ,CAAmB,CACjB,OACD,CACD2R,MAAM,CAAC1B,sBAAP,GACA,GAAIQ,QAAQ,GAAK,CAAjB,CAAoB,CAClBkB,MAAM,CAACrN,eAAP,CAAuBiP,QAAvB,GACD,CACD5B,MAAM,CAACjE,iBAAP,GACAiE,MAAM,CAAClE,4BAAP,GACD,CAzDD,CA2DA,KAAKpB,kBAAL,CAA0B,SAAUnE,CAAV,CAAa,CACrCyJ,MAAM,CAACxP,iBAAP,CAAyBC,OAAzB,CAAiC,SAAUC,SAAV,CAAqB,CACpDA,SAAS,CAACC,GAAV,EAAiBD,SAAS,CAACC,GAAV,CAAc+J,kBAAd,CAAiCnE,CAAjC,CAAjB,CACD,CAFD,EAGAyJ,MAAM,CAACpP,kBAAP,CAA0BH,OAA1B,CAAkC,SAAU6D,KAAV,CAAiB,CACjDA,KAAK,CAACxD,iBAAN,CAAwBP,iBAAxB,GACD,CAFD,EAGAyP,MAAM,CAACM,cAAP,CAAwB,IAAxB,CACAN,MAAM,CAAC3R,KAAP,CAAaoM,iBAAb,EAAkCuF,MAAM,CAAC3R,KAAP,CAAaoM,iBAAb,CAA+BlE,CAA/B,CAAlC,CACD,CATD,CAWA,KAAKqE,gBAAL,CAAwB,SAAUrE,CAAV,CAAa,CACnC,GAAIuI,CAAAA,QAAQ,CAAGvI,CAAC,CAAC2F,WAAF,CAAc4C,QAA7B,CAEA,GAAIA,QAAJ,CAAc,CACZkB,MAAM,CAAClR,cAAP,CAAsBgQ,QAAtB,CAAiCkB,MAAM,CAAC5D,aAAP,CAAqB0C,QAArB,CAAjC,CACD,CACDkB,MAAM,CAACjE,iBAAP,GACAiE,MAAM,CAAC3R,KAAP,CAAasM,eAAb,EAAgCqF,MAAM,CAAC3R,KAAP,CAAasM,eAAb,CAA6BpE,CAA7B,CAAhC,CACD,CARD,CAUA,KAAKuE,oBAAL,CAA4B,SAAUvE,CAAV,CAAa,CACvCyJ,MAAM,CAAClR,cAAP,CAAsBgQ,QAAtB,CAAiC,CAAjC,CACAkB,MAAM,CAACjE,iBAAP,GACAiE,MAAM,CAAC3R,KAAP,CAAawM,mBAAb,EAAoCmF,MAAM,CAAC3R,KAAP,CAAawM,mBAAb,CAAiCtE,CAAjC,CAApC,CACD,CAJD,CAMA,KAAKzD,oBAAL,CAA4B,UAAY,CACtC,GAAI+O,CAAAA,OAAO,CAAG7B,MAAM,CAAC3R,KAArB,CACIE,IAAI,CAAGsT,OAAO,CAACtT,IADnB,CAEID,YAAY,CAAGuT,OAAO,CAACvT,YAF3B,CAGImQ,qBAAqB,CAAGoD,OAAO,CAACpD,qBAHpC,CAKA,GAAI7G,CAAAA,wBAAwB,CAAGoI,MAAM,CAAC/I,yBAAP,EAA/B,CACA+I,MAAM,CAACjP,oBAAP,CAA4BxC,IAA5B,EACA,GAAI,CAACA,IAAL,CAAW,CACT,OACD,CACDyR,MAAM,CAAC8B,QAAP,CAAgB,SAAU/N,KAAV,CAAiB,CAC/B,GAAIgO,CAAAA,QAAQ,CAAG,IAAK,EAApB,CACA,GAAI,CAACnK,wBAAL,CAA+B,CAK7B,GAAIoI,MAAM,CAAClR,cAAP,CAAsBC,aAA1B,CAAyC,CAKvC,GAAI,CAACiR,MAAM,CAAC3R,KAAP,CAAamF,kBAAd,EAAoCwM,MAAM,CAAClR,cAAP,CAAsBJ,MAA9D,CAAsE,CACpEqT,QAAQ,CAAG5U,2BAA2B,CAAC6S,MAAM,CAAC3R,KAAR,CAAe0F,KAAf,CAAsBiM,MAAM,CAACvR,sBAA7B,CAAqDuR,MAAM,CAAClR,cAA5D,CAAtC,CACD,CACF,CACF,CAdD,IAcO,CACL,GAAIkT,CAAAA,eAAe,CAAGhC,MAAM,CAAClR,cAA7B,CACImO,aAAa,CAAG+E,eAAe,CAAC/E,aADpC,CAEIgF,OAAO,CAAGD,eAAe,CAACtT,MAF9B,CAGIK,aAAa,CAAGiT,eAAe,CAACjT,aAHpC,CAKA,GAAImT,CAAAA,gBAAgB,CAAGjF,aAAa,CAAGlO,aAAhB,CAAgCkT,OAAvD,CACA,GAAIE,CAAAA,WAAW,CAIfD,gBAAgB,CAAGzD,qBAAqB,CAAG1P,aAA3C,CAA2DiR,MAAM,CAAC3R,KAAP,CAAauG,mBAAxE,CAA8F,CAJ9F,CAKAmN,QAAQ,CAAG,CACTxO,KAAK,CAAE,CADE,CAETE,IAAI,CAAE9E,IAAI,CAAC+E,GAAL,CAASK,KAAK,CAACN,IAAN,CAAa0O,WAAtB,CAAmC7T,YAAY,CAACC,IAAD,CAAZ,CAAqB,CAAxD,CAFG,CAAX,CAID,CACD,GAAIwT,QAAQ,EAAI/B,MAAM,CAACxP,iBAAP,CAAyBsI,IAAzB,CAAgC,CAAhD,CAAmD,CACjD,GAAIsJ,CAAAA,QAAQ,CAAGL,QAAQ,CAACxO,KAAxB,CACA,GAAI8O,CAAAA,OAAO,CAAGN,QAAQ,CAACtO,IAAvB,CAKA,IAAK,GAAImC,CAAAA,EAAE,CAAGwM,QAAd,CAAwBxM,EAAE,EAAIyM,OAA9B,CAAuCzM,EAAE,EAAzC,CAA6C,CAC3C,GAAI0M,CAAAA,eAAe,CAAGtC,MAAM,CAACnK,cAAP,CAAsBqK,GAAtB,CAA0BtK,EAA1B,CAAtB,CACA,GAAI2M,CAAAA,aAAa,CAAGD,eAAe,EAAItC,MAAM,CAACI,wBAAP,CAAgCF,GAAhC,CAAoCoC,eAApC,CAAvC,CACA,GAAI,CAACC,aAAL,CAAoB,CAClB,SACD,CACD,GAAIC,CAAAA,gBAAgB,CAAG,KAAvB,CAEA,IAAK,GAAIC,CAAAA,SAAS,CAAGF,aAAhB,CAA+BG,QAAQ,CAAGC,KAAK,CAACC,OAAN,CAAcH,SAAd,CAA1C,CAAoEI,EAAE,CAAG,CAAzE,CAA4EJ,SAAS,CAAGC,QAAQ,CAAGD,SAAH,CAAeA,SAAS,4BAACK,MAAM,CAACC,QAAR,cAAT,EAApH,GAAoJ,CAClJ,GAAIC,CAAAA,KAAJ,CAEA,GAAIN,QAAJ,CAAc,CACZ,GAAIG,EAAE,EAAIJ,SAAS,CAACxX,MAApB,CAA4B,MAC5B+X,KAAK,CAAGP,SAAS,CAACI,EAAE,EAAH,CAAjB,CACD,CAHD,IAGO,CACLA,EAAE,CAAGJ,SAAS,CAACtG,IAAV,EAAL,CACA,GAAI0G,EAAE,CAACI,IAAP,CAAa,MACbD,KAAK,CAAGH,EAAE,CAAC1W,KAAX,CACD,CAED,GAAI+W,CAAAA,QAAQ,CAAGF,KAAf,CAEA,GAAItS,CAAAA,SAAS,CAAGsP,MAAM,CAACxP,iBAAP,CAAyB0P,GAAzB,CAA6BgD,QAA7B,CAAhB,CACA,GAAIxS,SAAS,EAAIA,SAAS,CAACC,GAAvB,EAA8BD,SAAS,CAACC,GAAV,CAAcyB,OAAd,EAAlC,CAA2D,CACzDoQ,gBAAgB,CAAG,IAAnB,CACA,MACD,CACF,CACD,GAAIA,gBAAJ,CAAsB,CACpBT,QAAQ,CAACtO,IAAT,CAAgBmC,EAAhB,CACA,MACD,CACF,CACF,CACD,MAAOmM,CAAAA,QAAP,CACD,CA3ED,EA4ED,CAvFD,CAyFA,KAAKzC,gBAAL,CAAwB,SAAU7P,KAAV,CAAiB0T,UAAjB,CAA6B,CACnD,GAAIC,CAAAA,QAAQ,CAAGpD,MAAM,CAAC3R,KAAtB,CACIE,IAAI,CAAG6U,QAAQ,CAAC7U,IADpB,CAEI4B,OAAO,CAAGiT,QAAQ,CAACjT,OAFvB,CAGImF,YAAY,CAAG8N,QAAQ,CAAC9N,YAH5B,CAKA,GAAIrF,CAAAA,IAAI,CAAGE,OAAO,CAAC5B,IAAD,CAAOkB,KAAP,CAAlB,CACA,MAAO,CAAEA,KAAK,CAAEA,KAAT,CAAgBQ,IAAI,CAAEA,IAAtB,CAA4B9E,GAAG,CAAEmK,YAAY,CAACrF,IAAD,CAAOR,KAAP,CAA7C,CAA4D0T,UAAU,CAAEA,UAAxE,CAAP,CACD,CARD,CAUA,KAAK1U,sBAAL,CAA8B,SAAUgB,KAAV,CAAiB,CAC7C,GAAIjB,CAAAA,KAAK,CAAGwR,MAAM,CAACpN,gBAAP,CAAwBnD,KAAxB,CAAZ,CACA,GAAIjB,KAAK,EAAIA,KAAK,CAACiB,KAAN,GAAgBA,KAA7B,CAAoC,CAElC,MAAOjB,CAAAA,KAAP,CACD,CAHD,IAGO,CACL,GAAI6U,CAAAA,cAAc,CAAGrD,MAAM,CAAC3R,KAAP,CAAakB,aAAlC,CAEAjC,SAAS,CAAC,CAAC+V,cAAF,CAAkB,oFAAlB,CAAT,CACA,MAAO,CACLpY,MAAM,CAAE+U,MAAM,CAAClQ,kBADV,CAELpB,MAAM,CAAEsR,MAAM,CAAClQ,kBAAP,CAA4BL,KAF/B,CAAP,CAID,CACF,CAdD,CAgBA,KAAKmD,gBAAL,CAAwB,SAAUnD,KAAV,CAAiB,CACvC,GAAI6T,CAAAA,QAAQ,CAAGtD,MAAM,CAAC3R,KAAtB,CACIE,IAAI,CAAG+U,QAAQ,CAAC/U,IADpB,CAEI4B,OAAO,CAAGmT,QAAQ,CAACnT,OAFvB,CAGI7B,YAAY,CAAGgV,QAAQ,CAAChV,YAH5B,CAIIiB,aAAa,CAAG+T,QAAQ,CAAC/T,aAJ7B,CAKI+F,YAAY,CAAGgO,QAAQ,CAAChO,YAL5B,CAOAhI,SAAS,CAACgB,YAAY,CAACC,IAAD,CAAZ,CAAqBkB,KAAtB,CAA6B,6CAA+CA,KAA5E,CAAT,CACA,GAAIQ,CAAAA,IAAI,CAAGE,OAAO,CAAC5B,IAAD,CAAOkB,KAAP,CAAlB,CACA,GAAIjB,CAAAA,KAAK,CAAGyB,IAAI,EAAI+P,MAAM,CAAChM,OAAP,CAAesB,YAAY,CAACrF,IAAD,CAAOR,KAAP,CAA3B,CAApB,CACA,GAAI,CAACjB,KAAD,EAAUA,KAAK,CAACiB,KAAN,GAAgBA,KAA9B,CAAqC,CACnC,GAAIF,aAAJ,CAAmB,CACjBf,KAAK,CAAGe,aAAa,CAAChB,IAAD,CAAOkB,KAAP,CAArB,CACA,GAAI/B,OAAJ,CAAa,CACX,GAAI6V,CAAAA,SAAS,CAAG5W,SAAS,CAACgT,KAAV,CAAgB,CAC9B1U,MAAM,CAAE0B,SAAS,CAAC6W,MAAV,CAAiBC,UADK,CAE9B/U,MAAM,CAAE/B,SAAS,CAAC6W,MAAV,CAAiBC,UAFK,CAG9BhU,KAAK,CAAE9C,SAAS,CAAC6W,MAAV,CAAiBC,UAHM,CAAhB,EAIbA,UAJH,CAKA9W,SAAS,CAAC+W,cAAV,CAAyB,CAAElV,KAAK,CAAE+U,SAAT,CAAzB,CAA+C,CAAE/U,KAAK,CAAEA,KAAT,CAA/C,CAAiE,OAAjE,CAA0E,+BAA1E,EACD,CACF,CACF,CAID,MAAOA,CAAAA,KAAP,CACD,CA5BD,CA6BD,CAlZD,CAoZA,GAAIyH,CAAAA,YAAY,CAAG,SAAU0N,gBAAV,CAA4B,CAC7C7X,SAAS,CAACmK,YAAD,CAAe0N,gBAAf,CAAT,CAEA,QAAS1N,CAAAA,YAAT,EAAwB,CACtB,GAAI2N,CAAAA,KAAJ,CAAWC,MAAX,CAAmBC,KAAnB,CAEAvY,eAAe,CAAC,IAAD,CAAO0K,YAAP,CAAf,CAEA,IAAK,GAAI8N,CAAAA,IAAI,CAAG/Y,SAAS,CAACC,MAArB,CAA6B+Y,IAAI,CAAGrB,KAAK,CAACoB,IAAD,CAAzC,CAAiDE,IAAI,CAAG,CAA7D,CAAgEA,IAAI,CAAGF,IAAvE,CAA6EE,IAAI,EAAjF,CAAqF,CACnFD,IAAI,CAACC,IAAD,CAAJ,CAAajZ,SAAS,CAACiZ,IAAD,CAAtB,CACD,CAED,MAAOH,CAAAA,KAAK,EAAIF,KAAK,EAAIC,MAAM,CAAGlY,0BAA0B,CAAC,IAAD,CAAOgY,gBAAgB,CAACrY,IAAjB,CAAsBwL,KAAtB,CAA4B6M,gBAA5B,CAA8C,CAAC,IAAD,EAAOO,MAAP,CAAcF,IAAd,CAA9C,CAAP,CAAnC,CAA+GH,MAAnH,CAAL,CAAiIA,MAAM,CAAC9P,KAAP,CAAe,CAC9JoQ,cAAc,CAAE,CACdC,WAAW,CAAE,KADC,CAEdC,WAAW,CAAER,MAAM,CAACxV,KAAP,CAAa4B,IAFZ,CAD8I,CAAhJ,CAKb4T,MAAM,CAACS,WAAP,CAAqB,CACtBC,SAAS,CAAE,QAASA,CAAAA,SAAT,EAAqB,CAC9B,GAAIC,CAAAA,YAAY,CAAGX,MAAM,CAACxV,KAA1B,CACI8D,OAAO,CAAGqS,YAAY,CAACrS,OAD3B,CAEIuD,WAAW,CAAG8O,YAAY,CAAC9O,WAF/B,CAIAmO,MAAM,CAACxV,KAAP,CAAa+H,kBAAb,CAAgC,CAACjE,OAAD,CAAUuD,WAAV,CAAhC,CAAwD,CACtD0O,WAAW,CAAE,IADyC,CAAxD,EAGD,CATqB,CAUtBK,WAAW,CAAE,QAASA,CAAAA,WAAT,EAAuB,CAClC,GAAIC,CAAAA,aAAa,CAAGb,MAAM,CAACxV,KAA3B,CACI8D,OAAO,CAAGuS,aAAa,CAACvS,OAD5B,CAEIuD,WAAW,CAAGgP,aAAa,CAAChP,WAFhC,CAIAmO,MAAM,CAACxV,KAAP,CAAa+H,kBAAb,CAAgC,CAACjE,OAAD,CAAUuD,WAAV,CAAhC,CAAwD,CACtD0O,WAAW,CAAE,KADyC,CAAxD,EAGD,CAlBqB,CAmBtBO,WAAW,CAAE,QAASA,CAAAA,WAAT,CAAqBC,MAArB,CAA6BnQ,QAA7B,CAAuC,CAClD,GAAIoQ,CAAAA,aAAa,CAAGhB,MAAM,CAACxV,KAA3B,CACI8D,OAAO,CAAG0S,aAAa,CAAC1S,OAD5B,CAEIuD,WAAW,CAAGmP,aAAa,CAACnP,WAFhC,CAIAmO,MAAM,CAACxV,KAAP,CAAa+H,kBAAb,CAAgC,CAACwO,MAAM,GAAK,SAAX,CAAuBlP,WAAvB,CAAqCvD,OAAtC,CAAhC,CAAgFsC,QAAhF,EACD,CAzBqB,CALR,CA+BbmP,KA/BS,CAAL,CA+BIjY,0BAA0B,CAACkY,MAAD,CAASC,KAAT,CA/BrC,CAgCD,CAED7N,YAAY,CAAC7K,SAAb,CAAuBgG,eAAvB,CAAyC,QAASA,CAAAA,eAAT,EAA2B,CAClE,MAAO,CACLc,eAAe,CAAE,CACfC,OAAO,CAAE,KAAK9D,KAAL,CAAW8D,OADL,CADZ,CAAP,CAKD,CAND,CAYA8D,YAAY,CAAC7K,SAAb,CAAuBmV,oBAAvB,CAA8C,QAASA,CAAAA,oBAAT,CAA8B9L,QAA9B,CAAwC,CACpF,KAAKqN,QAAL,CAAc,SAAU/N,KAAV,CAAiB,CAC7B,MAAO,CACLoQ,cAAc,CAAE,UAAc,EAAd,CAAkBpQ,KAAK,CAACoQ,cAAxB,CAAwC1P,QAAxC,CADX,CAAP,CAGD,CAJD,EAKD,CAND,CAQAwB,YAAY,CAAC7K,SAAb,CAAuB+I,oBAAvB,CAA8C,QAASA,CAAAA,oBAAT,EAAgC,CAC5E,KAAK9F,KAAL,CAAWoI,SAAX,CAAqB,KAAKpI,KAAL,CAAW8D,OAAhC,EACD,CAFD,CAIA8D,YAAY,CAAC7K,SAAb,CAAuBgM,MAAvB,CAAgC,QAASA,CAAAA,MAAT,EAAkB,CAChD,GAAI0N,CAAAA,OAAO,CAAG,KAAKzW,KAAnB,CACI+G,qBAAqB,CAAG0P,OAAO,CAAC1P,qBADpC,CAEIC,sBAAsB,CAAGyP,OAAO,CAACzP,sBAFrC,CAGIc,cAAc,CAAG2O,OAAO,CAAC3O,cAH7B,CAIIjH,UAAU,CAAG4V,OAAO,CAAC5V,UAJzB,CAKIe,IAAI,CAAG6U,OAAO,CAAC7U,IALnB,CAMIR,KAAK,CAAGqV,OAAO,CAACrV,KANpB,CAOIwF,cAAc,CAAG6P,OAAO,CAAC7P,cAP7B,CAQI0B,WAAW,CAAGmO,OAAO,CAACnO,WAR1B,CASA,GAAIoO,CAAAA,UAAU,CAAGpO,WAAW,CAACoO,UAA7B,CACIxV,aAAa,CAAGoH,WAAW,CAACpH,aADhC,CAGAjC,SAAS,CAACyX,UAAD,CAAa,gBAAb,CAAT,CACA,GAAI7M,CAAAA,OAAO,CAAG6M,UAAU,CAAC,CACvB9U,IAAI,CAAEA,IADiB,CAEvBR,KAAK,CAAEA,KAFgB,CAGvBuV,UAAU,CAAE,KAAKV,WAHM,CAAD,CAAxB,CAKA,GAAIhO,CAAAA,QAAQ,CAAG/G,aAAa,EAAI,CAACoH,WAAW,CAAC2E,KAA9B,EAAuC,CAACnF,cAAc,CAAC8O,OAAf,EAAxC,CAAmE/O,SAAnE,CAA+E,KAAK7H,KAAL,CAAWiI,QAAzG,CAGA,GAAI4O,CAAAA,aAAa,CAAG7P,sBAAsB,EAAIzI,KAAK,CAACoJ,aAAN,CAAoBX,sBAApB,CAA4C,KAAKtB,KAAL,CAAWoQ,cAAvD,CAA9C,CACA,GAAIgB,CAAAA,SAAS,CAAGlQ,cAAc,CAAG/F,UAAU,CAAG,CAAC4I,MAAM,CAACsN,UAAR,CAAoBnQ,cAApB,CAAH,CAAyC,CAAC6C,MAAM,CAACuN,aAAR,CAAuBpQ,cAAvB,CAAtD,CAA+F/F,UAAU,CAAG,CAAC4I,MAAM,CAACwN,GAAR,CAAarQ,cAAb,CAAH,CAAkCA,cAAzK,CACA,GAAI,CAACG,qBAAL,CAA4B,CAC1B,MAAOxI,CAAAA,KAAK,CAACoJ,aAAN,CACL/I,IADK,CAEL,CAAEqL,KAAK,CAAE6M,SAAT,CAAoB7O,QAAQ,CAAEA,QAA9B,CAFK,CAGL4B,OAHK,CAILgN,aAJK,CAAP,CAMD,CACD,MAAOtY,CAAAA,KAAK,CAACoJ,aAAN,CACLZ,qBADK,CAELzK,QAAQ,CAAC,EAAD,CAAK,KAAK0D,KAAV,CAAiB,CACvBiK,KAAK,CAAE6M,SADgB,CAEvB7O,QAAQ,CAAEA,QAFa,CAAjB,CAFH,CAKL4B,OALK,CAMLgN,aANK,CAAP,CAQD,CAxCD,CA0CA,MAAOjP,CAAAA,YAAP,CACD,CAjHkB,CAiHjBrJ,KAAK,CAAC2Y,SAjHW,CAAnB,CAmHAtP,YAAY,CAAC8J,iBAAb,CAAiC,CAC/B7N,eAAe,CAAEvF,SAAS,CAACgT,KAAV,CAAgB,CAC/BxN,OAAO,CAAExF,SAAS,CAACiT,MADY,CAAhB,CADc,CAAjC,CAMA,GAAIxH,CAAAA,sBAAsB,CAAG,SAAUoN,iBAAV,CAA6B,CACxD1Z,SAAS,CAACsM,sBAAD,CAAyBoN,iBAAzB,CAAT,CAEA,QAASpN,CAAAA,sBAAT,EAAkC,CAChC7M,eAAe,CAAC,IAAD,CAAO6M,sBAAP,CAAf,CAEA,MAAOzM,CAAAA,0BAA0B,CAAC,IAAD,CAAO6Z,iBAAiB,CAAC1O,KAAlB,CAAwB,IAAxB,CAA8B9L,SAA9B,CAAP,CAAjC,CACD,CAEDoN,sBAAsB,CAAChN,SAAvB,CAAiCgG,eAAjC,CAAmD,QAASA,CAAAA,eAAT,EAA2B,CAC5E,MAAO,CACLc,eAAe,CAAE,CACfC,OAAO,CAAE,KAAK9D,KAAL,CAAW8D,OADL,CADZ,CAAP,CAKD,CAND,CAQAiG,sBAAsB,CAAChN,SAAvB,CAAiCgM,MAAjC,CAA0C,QAASA,CAAAA,MAAT,EAAkB,CAC1D,MAAO,MAAK/I,KAAL,CAAWoX,QAAlB,CACD,CAFD,CAIA,MAAOrN,CAAAA,sBAAP,CACD,CAtB4B,CAsB3BxL,KAAK,CAAC2Y,SAtBqB,CAA7B,CAwBAnN,sBAAsB,CAAC2H,iBAAvB,CAA2C,CACzC7N,eAAe,CAAEvF,SAAS,CAACgT,KAAV,CAAgB,CAC/BxN,OAAO,CAAExF,SAAS,CAACiT,MADY,CAAhB,CADwB,CAA3C,CAOA,GAAI9H,CAAAA,MAAM,CAAG/K,UAAU,CAACd,MAAX,CAAkB,CAC7B+L,kBAAkB,CAAE,CAClB0N,SAAS,CAAE,CAAC,CAAEC,MAAM,CAAE,CAAC,CAAX,CAAD,CADO,CADS,CAI7B5N,oBAAoB,CAAE,CACpB2N,SAAS,CAAE,CAAC,CAAEE,MAAM,CAAE,CAAC,CAAX,CAAD,CADS,CAJO,CAO7BN,GAAG,CAAE,CACHO,aAAa,CAAE,KADZ,CAPwB,CAU7BT,UAAU,CAAE,CACVS,aAAa,CAAE,aADL,CAViB,CAa7BR,aAAa,CAAE,CACbQ,aAAa,CAAE,gBADF,CAbc,CAAlB,CAAb,CAkBA,cAAe9X,CAAAA,eAAf","sourcesContent":["var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @noflow\n * @format\n */\nimport Batchinator from '../Batchinator';\nimport FillRateHelper from '../FillRateHelper';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport RefreshControl from '../../../exports/RefreshControl';\nimport ScrollView from '../../../exports/ScrollView';\nimport StyleSheet from '../../../exports/StyleSheet';\nimport UIManager from '../../../exports/UIManager';\nimport View from '../../../exports/View';\nimport ViewabilityHelper from '../ViewabilityHelper';\nimport { computeWindowedRenderLimits } from '../VirtualizeUtils';\nimport findNodeHandle from '../../../exports/findNodeHandle';\nimport infoLog from '../infoLog';\nimport invariant from 'fbjs/lib/invariant';\nimport warning from 'fbjs/lib/warning';\n\nvar flattenStyle = StyleSheet.flatten;\nvar __DEV__ = process.env.NODE_ENV !== 'production';\n/* $FlowFixMe - this Props seems to be missing a bunch of stuff. Remove this\n * comment to see the errors */\n\n\nvar _usedIndexForKey = false;\n\n/**\n * Base implementation for the more convenient [`<FlatList>`](/react-native/docs/flatlist.html)\n * and [`<SectionList>`](/react-native/docs/sectionlist.html) components, which are also better\n * documented. In general, this should only really be used if you need more flexibility than\n * `FlatList` provides, e.g. for use with immutable data instead of plain arrays.\n *\n * Virtualization massively improves memory consumption and performance of large lists by\n * maintaining a finite render window of active items and replacing all items outside of the render\n * window with appropriately sized blank space. The window adapts to scrolling behavior, and items\n * are rendered incrementally with low-pri (after any running interactions) if they are far from the\n * visible area, or with hi-pri otherwise to minimize the potential of seeing blank space.\n *\n * Some caveats:\n *\n * - Internal state is not preserved when content scrolls out of the render window. Make sure all\n *   your data is captured in the item data or external stores like Flux, Redux, or Relay.\n * - This is a `PureComponent` which means that it will not re-render if `props` remain shallow-\n *   equal. Make sure that everything your `renderItem` function depends on is passed as a prop\n *   (e.g. `extraData`) that is not `===` after updates, otherwise your UI may not update on\n *   changes. This includes the `data` prop and parent component state.\n * - In order to constrain memory and enable smooth scrolling, content is rendered asynchronously\n *   offscreen. This means it's possible to scroll faster than the fill rate ands momentarily see\n *   blank content. This is a tradeoff that can be adjusted to suit the needs of each application,\n *   and we are working on improving it behind the scenes.\n * - By default, the list looks for a `key` prop on each item and uses that for the React key.\n *   Alternatively, you can provide a custom `keyExtractor` prop.\n *\n */\nvar VirtualizedList = function (_React$PureComponent) {\n  _inherits(VirtualizedList, _React$PureComponent);\n\n  // scrollToEnd may be janky without getItemLayout prop\n  VirtualizedList.prototype.scrollToEnd = function scrollToEnd(params) {\n    var animated = params ? params.animated : true;\n    var veryLast = this.props.getItemCount(this.props.data) - 1;\n    var frame = this._getFrameMetricsApprox(veryLast);\n    var offset = Math.max(0, frame.offset + frame.length + this._footerLength - this._scrollMetrics.visibleLength);\n    /* $FlowFixMe(>=0.53.0 site=react_native_fb,react_native_oss) This comment\n     * suppresses an error when upgrading Flow's support for React. To see the\n     * error delete this comment and run Flow. */\n    this._scrollRef.scrollTo(\n    /* $FlowFixMe(>=0.53.0 site=react_native_fb,react_native_oss) This\n     * comment suppresses an error when upgrading Flow's support for React.\n     * To see the error delete this comment and run Flow. */\n    this.props.horizontal ? { x: offset, animated: animated } : { y: offset, animated: animated });\n  };\n\n  // scrollToIndex may be janky without getItemLayout prop\n\n\n  VirtualizedList.prototype.scrollToIndex = function scrollToIndex(params) {\n    var _props = this.props,\n        data = _props.data,\n        horizontal = _props.horizontal,\n        getItemCount = _props.getItemCount,\n        getItemLayout = _props.getItemLayout,\n        onScrollToIndexFailed = _props.onScrollToIndexFailed;\n    var animated = params.animated,\n        index = params.index,\n        viewOffset = params.viewOffset,\n        viewPosition = params.viewPosition;\n\n    invariant(index >= 0 && index < getItemCount(data), 'scrollToIndex out of range: ' + index + ' vs ' + (getItemCount(data) - 1));\n    if (!getItemLayout && index > this._highestMeasuredFrameIndex) {\n      invariant(!!onScrollToIndexFailed, 'scrollToIndex should be used in conjunction with getItemLayout or onScrollToIndexFailed, ' + 'otherwise there is no way to know the location of offscreen indices or handle failures.');\n      onScrollToIndexFailed({\n        averageItemLength: this._averageCellLength,\n        highestMeasuredFrameIndex: this._highestMeasuredFrameIndex,\n        index: index\n      });\n      return;\n    }\n    var frame = this._getFrameMetricsApprox(index);\n    var offset = Math.max(0, frame.offset - (viewPosition || 0) * (this._scrollMetrics.visibleLength - frame.length)) - (viewOffset || 0);\n    /* $FlowFixMe(>=0.53.0 site=react_native_fb,react_native_oss) This comment\n     * suppresses an error when upgrading Flow's support for React. To see the\n     * error delete this comment and run Flow. */\n    this._scrollRef.scrollTo(\n    /* $FlowFixMe(>=0.53.0 site=react_native_fb,react_native_oss) This\n     * comment suppresses an error when upgrading Flow's support for React.\n     * To see the error delete this comment and run Flow. */\n    horizontal ? { x: offset, animated: animated } : { y: offset, animated: animated });\n  };\n\n  // scrollToItem may be janky without getItemLayout prop. Required linear scan through items -\n  // use scrollToIndex instead if possible.\n\n\n  VirtualizedList.prototype.scrollToItem = function scrollToItem(params) {\n    var item = params.item;\n    var _props2 = this.props,\n        data = _props2.data,\n        getItem = _props2.getItem,\n        getItemCount = _props2.getItemCount;\n\n    var itemCount = getItemCount(data);\n    for (var _index = 0; _index < itemCount; _index++) {\n      if (getItem(data, _index) === item) {\n        this.scrollToIndex(Object.assign({}, params, { index: _index }));\n        break;\n      }\n    }\n  };\n\n  /**\n   * Scroll to a specific content pixel offset in the list.\n   *\n   * Param `offset` expects the offset to scroll to.\n   * In case of `horizontal` is true, the offset is the x-value,\n   * in any other case the offset is the y-value.\n   *\n   * Param `animated` (`true` by default) defines whether the list\n   * should do an animation while scrolling.\n   */\n\n\n  VirtualizedList.prototype.scrollToOffset = function scrollToOffset(params) {\n    var animated = params.animated,\n        offset = params.offset;\n    /* $FlowFixMe(>=0.53.0 site=react_native_fb,react_native_oss) This comment\n     * suppresses an error when upgrading Flow's support for React. To see the\n     * error delete this comment and run Flow. */\n\n    this._scrollRef.scrollTo(\n    /* $FlowFixMe(>=0.53.0 site=react_native_fb,react_native_oss) This\n     * comment suppresses an error when upgrading Flow's support for React.\n     * To see the error delete this comment and run Flow. */\n    this.props.horizontal ? { x: offset, animated: animated } : { y: offset, animated: animated });\n  };\n\n  VirtualizedList.prototype.recordInteraction = function recordInteraction() {\n    this._nestedChildLists.forEach(function (childList) {\n      childList.ref && childList.ref.recordInteraction();\n    });\n    this._viewabilityTuples.forEach(function (t) {\n      t.viewabilityHelper.recordInteraction();\n    });\n    this._updateViewableItems(this.props.data);\n  };\n\n  VirtualizedList.prototype.flashScrollIndicators = function flashScrollIndicators() {\n    /* $FlowFixMe(>=0.53.0 site=react_native_fb,react_native_oss) This comment\n     * suppresses an error when upgrading Flow's support for React. To see the\n     * error delete this comment and run Flow. */\n    this._scrollRef.flashScrollIndicators();\n  };\n\n  /**\n   * Provides a handle to the underlying scroll responder.\n   * Note that `this._scrollRef` might not be a `ScrollView`, so we\n   * need to check that it responds to `getScrollResponder` before calling it.\n   */\n\n\n  VirtualizedList.prototype.getScrollResponder = function getScrollResponder() {\n    if (this._scrollRef && this._scrollRef.getScrollResponder) {\n      return this._scrollRef.getScrollResponder();\n    }\n  };\n\n  VirtualizedList.prototype.getScrollableNode = function getScrollableNode() {\n    if (this._scrollRef && this._scrollRef.getScrollableNode) {\n      return this._scrollRef.getScrollableNode();\n    } else {\n      return findNodeHandle(this._scrollRef);\n    }\n  };\n\n  VirtualizedList.prototype.setNativeProps = function setNativeProps(props) {\n    if (this._scrollRef) {\n      this._scrollRef.setNativeProps(props);\n    }\n  };\n\n  VirtualizedList.prototype.getChildContext = function getChildContext() {\n    return {\n      virtualizedList: {\n        getScrollMetrics: this._getScrollMetrics,\n        horizontal: this.props.horizontal,\n        getOutermostParentListRef: this._getOutermostParentListRef,\n        getNestedChildState: this._getNestedChildState,\n        registerAsNestedChild: this._registerAsNestedChild,\n        unregisterAsNestedChild: this._unregisterAsNestedChild\n      }\n    };\n  };\n\n  VirtualizedList.prototype._getCellKey = function _getCellKey() {\n    return this.context.virtualizedCell && this.context.virtualizedCell.cellKey || 'rootList';\n  };\n\n  VirtualizedList.prototype.hasMore = function hasMore() {\n    return this._hasMore;\n  };\n\n  function VirtualizedList(props, context) {\n    _classCallCheck(this, VirtualizedList);\n\n    var _this = _possibleConstructorReturn(this, _React$PureComponent.call(this, props, context));\n\n    _initialiseProps.call(_this);\n\n    invariant(!props.onScroll || !props.onScroll.__isNative, 'Components based on VirtualizedList must be wrapped with Animated.createAnimatedComponent ' + 'to support native onScroll events with useNativeDriver');\n\n    invariant(props.windowSize > 0, 'VirtualizedList: The windowSize prop must be present and set to a value greater than 0.');\n\n    _this._fillRateHelper = new FillRateHelper(_this._getFrameMetrics);\n    _this._updateCellsToRenderBatcher = new Batchinator(_this._updateCellsToRender, _this.props.updateCellsBatchingPeriod);\n\n    if (_this.props.viewabilityConfigCallbackPairs) {\n      _this._viewabilityTuples = _this.props.viewabilityConfigCallbackPairs.map(function (pair) {\n        return {\n          viewabilityHelper: new ViewabilityHelper(pair.viewabilityConfig),\n          onViewableItemsChanged: pair.onViewableItemsChanged\n        };\n      });\n    } else if (_this.props.onViewableItemsChanged) {\n      _this._viewabilityTuples.push({\n        viewabilityHelper: new ViewabilityHelper(_this.props.viewabilityConfig),\n        onViewableItemsChanged: _this.props.onViewableItemsChanged\n      });\n    }\n\n    var initialState = {\n      first: _this.props.initialScrollIndex || 0,\n      last: Math.min(_this.props.getItemCount(_this.props.data), (_this.props.initialScrollIndex || 0) + _this.props.initialNumToRender) - 1\n    };\n\n    if (_this._isNestedWithSameOrientation()) {\n      var storedState = _this.context.virtualizedList.getNestedChildState(_this.props.listKey || _this._getCellKey());\n      if (storedState) {\n        initialState = storedState;\n        _this.state = storedState;\n        _this._frames = storedState.frames;\n      }\n    }\n\n    _this.state = initialState;\n    return _this;\n  }\n\n  VirtualizedList.prototype.componentDidMount = function componentDidMount() {\n    if (this._isNestedWithSameOrientation()) {\n      this.context.virtualizedList.registerAsNestedChild({\n        cellKey: this._getCellKey(),\n        key: this.props.listKey || this._getCellKey(),\n        ref: this\n      });\n    }\n  };\n\n  VirtualizedList.prototype.componentWillUnmount = function componentWillUnmount() {\n    if (this._isNestedWithSameOrientation()) {\n      this.context.virtualizedList.unregisterAsNestedChild({\n        key: this.props.listKey || this._getCellKey(),\n        state: {\n          first: this.state.first,\n          last: this.state.last,\n          frames: this._frames\n        }\n      });\n    }\n    this._updateViewableItems(null);\n    this._updateCellsToRenderBatcher.dispose({ abort: true });\n    this._viewabilityTuples.forEach(function (tuple) {\n      tuple.viewabilityHelper.dispose();\n    });\n    this._fillRateHelper.deactivateAndFlush();\n  };\n\n  VirtualizedList.getDerivedStateFromProps = function getDerivedStateFromProps(newProps, prevState) {\n    var data = newProps.data,\n        extraData = newProps.extraData,\n        getItemCount = newProps.getItemCount,\n        maxToRenderPerBatch = newProps.maxToRenderPerBatch;\n    // first and last could be stale (e.g. if a new, shorter items props is passed in), so we make\n    // sure we're rendering a reasonable range here.\n\n    return {\n      first: Math.max(0, Math.min(prevState.first, getItemCount(data) - 1 - maxToRenderPerBatch)),\n      last: Math.max(0, Math.min(prevState.last, getItemCount(data) - 1))\n    };\n  };\n\n  VirtualizedList.prototype._pushCells = function _pushCells(cells, stickyHeaderIndices, stickyIndicesFromProps, first, last, inversionStyle) {\n    var _this2 = this;\n\n    var _props3 = this.props,\n        CellRendererComponent = _props3.CellRendererComponent,\n        ItemSeparatorComponent = _props3.ItemSeparatorComponent,\n        data = _props3.data,\n        getItem = _props3.getItem,\n        getItemCount = _props3.getItemCount,\n        horizontal = _props3.horizontal,\n        keyExtractor = _props3.keyExtractor;\n\n    var stickyOffset = this.props.ListHeaderComponent ? 1 : 0;\n    var end = getItemCount(data) - 1;\n    var prevCellKey = void 0;\n    last = Math.min(end, last);\n\n    var _loop = function _loop(ii) {\n      var item = getItem(data, ii);\n      var key = keyExtractor(item, ii);\n      _this2._indicesToKeys.set(ii, key);\n      if (stickyIndicesFromProps.has(ii + stickyOffset)) {\n        stickyHeaderIndices.push(cells.length);\n      }\n      cells.push(React.createElement(CellRenderer, {\n        CellRendererComponent: CellRendererComponent,\n        ItemSeparatorComponent: ii < end ? ItemSeparatorComponent : undefined,\n        cellKey: key,\n        fillRateHelper: _this2._fillRateHelper,\n        horizontal: horizontal,\n        index: ii,\n        inversionStyle: inversionStyle,\n        item: item,\n        key: key,\n        prevCellKey: prevCellKey,\n        onUpdateSeparators: _this2._onUpdateSeparators,\n        onLayout: function onLayout(e) {\n          return _this2._onCellLayout(e, key, ii);\n        },\n        onUnmount: _this2._onCellUnmount,\n        parentProps: _this2.props,\n        ref: function (_ref) {\n          function ref(_x) {\n            return _ref.apply(this, arguments);\n          }\n\n          ref.toString = function () {\n            return _ref.toString();\n          };\n\n          return ref;\n        }(function (ref) {\n          _this2._cellRefs[key] = ref;\n        })\n      }));\n      prevCellKey = key;\n    };\n\n    for (var ii = first; ii <= last; ii++) {\n      _loop(ii);\n    }\n  };\n\n  VirtualizedList.prototype._isVirtualizationDisabled = function _isVirtualizationDisabled() {\n    return this.props.disableVirtualization;\n  };\n\n  VirtualizedList.prototype._isNestedWithSameOrientation = function _isNestedWithSameOrientation() {\n    var nestedContext = this.context.virtualizedList;\n    return !!(nestedContext && !!nestedContext.horizontal === !!this.props.horizontal);\n  };\n\n  VirtualizedList.prototype.render = function render() {\n    if (__DEV__) {\n      var flatStyles = flattenStyle(this.props.contentContainerStyle);\n      warning(flatStyles == null || flatStyles.flexWrap !== 'wrap', '`flexWrap: `wrap`` is not supported with the `VirtualizedList` components.' + 'Consider using `numColumns` with `FlatList` instead.');\n    }\n    var _props4 = this.props,\n        ListEmptyComponent = _props4.ListEmptyComponent,\n        ListFooterComponent = _props4.ListFooterComponent,\n        ListHeaderComponent = _props4.ListHeaderComponent;\n    var _props5 = this.props,\n        data = _props5.data,\n        horizontal = _props5.horizontal;\n\n    var isVirtualizationDisabled = this._isVirtualizationDisabled();\n    var inversionStyle = this.props.inverted ? this.props.horizontal ? styles.horizontallyInverted : styles.verticallyInverted : null;\n    var cells = [];\n    var stickyIndicesFromProps = new Set(this.props.stickyHeaderIndices);\n    var stickyHeaderIndices = [];\n    if (ListHeaderComponent) {\n      if (stickyIndicesFromProps.has(0)) {\n        stickyHeaderIndices.push(0);\n      }\n      var element = React.isValidElement(ListHeaderComponent) ? ListHeaderComponent :\n      // $FlowFixMe\n      React.createElement(ListHeaderComponent, null);\n      cells.push(React.createElement(\n        VirtualizedCellWrapper,\n        {\n          cellKey: this._getCellKey() + '-header',\n          key: '$header' },\n        React.createElement(\n          View,\n          { onLayout: this._onLayoutHeader, style: inversionStyle },\n          element\n        )\n      ));\n    }\n    var itemCount = this.props.getItemCount(data);\n    if (itemCount > 0) {\n      _usedIndexForKey = false;\n      var spacerKey = !horizontal ? 'height' : 'width';\n      var lastInitialIndex = this.props.initialScrollIndex ? -1 : this.props.initialNumToRender - 1;\n      var _state = this.state,\n          _first = _state.first,\n          _last = _state.last;\n\n      this._pushCells(cells, stickyHeaderIndices, stickyIndicesFromProps, 0, lastInitialIndex, inversionStyle);\n      var firstAfterInitial = Math.max(lastInitialIndex + 1, _first);\n      if (!isVirtualizationDisabled && _first > lastInitialIndex + 1) {\n        var insertedStickySpacer = false;\n        if (stickyIndicesFromProps.size > 0) {\n          var stickyOffset = ListHeaderComponent ? 1 : 0;\n          // See if there are any sticky headers in the virtualized space that we need to render.\n          for (var ii = firstAfterInitial - 1; ii > lastInitialIndex; ii--) {\n            if (stickyIndicesFromProps.has(ii + stickyOffset)) {\n              var _ref2, _ref3;\n\n              var initBlock = this._getFrameMetricsApprox(lastInitialIndex);\n              var stickyBlock = this._getFrameMetricsApprox(ii);\n              var leadSpace = stickyBlock.offset - (initBlock.offset + initBlock.length);\n              cells.push(React.createElement(View, { key: '$sticky_lead', style: (_ref2 = {}, _ref2[spacerKey] = leadSpace, _ref2) }));\n              this._pushCells(cells, stickyHeaderIndices, stickyIndicesFromProps, ii, ii, inversionStyle);\n              var trailSpace = this._getFrameMetricsApprox(_first).offset - (stickyBlock.offset + stickyBlock.length);\n              cells.push(React.createElement(View, { key: '$sticky_trail', style: (_ref3 = {}, _ref3[spacerKey] = trailSpace, _ref3) }));\n              insertedStickySpacer = true;\n              break;\n            }\n          }\n        }\n        if (!insertedStickySpacer) {\n          var _ref4;\n\n          var _initBlock = this._getFrameMetricsApprox(lastInitialIndex);\n          var firstSpace = this._getFrameMetricsApprox(_first).offset - (_initBlock.offset + _initBlock.length);\n          cells.push(React.createElement(View, { key: '$lead_spacer', style: (_ref4 = {}, _ref4[spacerKey] = firstSpace, _ref4) }));\n        }\n      }\n      this._pushCells(cells, stickyHeaderIndices, stickyIndicesFromProps, firstAfterInitial, _last, inversionStyle);\n      if (!this._hasWarned.keys && _usedIndexForKey) {\n        console.warn('VirtualizedList: missing keys for items, make sure to specify a key property on each ' + 'item or provide a custom keyExtractor.');\n        this._hasWarned.keys = true;\n      }\n      if (!isVirtualizationDisabled && _last < itemCount - 1) {\n        var _ref5;\n\n        var lastFrame = this._getFrameMetricsApprox(_last);\n        // Without getItemLayout, we limit our tail spacer to the _highestMeasuredFrameIndex to\n        // prevent the user for hyperscrolling into un-measured area because otherwise content will\n        // likely jump around as it renders in above the viewport.\n        var end = this.props.getItemLayout ? itemCount - 1 : Math.min(itemCount - 1, this._highestMeasuredFrameIndex);\n        var endFrame = this._getFrameMetricsApprox(end);\n        var tailSpacerLength = endFrame.offset + endFrame.length - (lastFrame.offset + lastFrame.length);\n        cells.push(React.createElement(View, { key: '$tail_spacer', style: (_ref5 = {}, _ref5[spacerKey] = tailSpacerLength, _ref5) }));\n      }\n    } else if (ListEmptyComponent) {\n      var _element = React.isValidElement(ListEmptyComponent) ? ListEmptyComponent :\n      // $FlowFixMe\n      React.createElement(ListEmptyComponent, null);\n      cells.push(React.createElement(\n        View,\n        {\n          key: '$empty',\n          onLayout: this._onLayoutEmpty,\n          style: inversionStyle },\n        _element\n      ));\n    }\n    if (ListFooterComponent) {\n      var _element2 = React.isValidElement(ListFooterComponent) ? ListFooterComponent :\n      // $FlowFixMe\n      React.createElement(ListFooterComponent, null);\n      cells.push(React.createElement(\n        VirtualizedCellWrapper,\n        {\n          cellKey: this._getCellKey() + '-footer',\n          key: '$footer' },\n        React.createElement(\n          View,\n          { onLayout: this._onLayoutFooter, style: inversionStyle },\n          _element2\n        )\n      ));\n    }\n    var scrollProps = Object.assign({}, this.props, {\n      onContentSizeChange: this._onContentSizeChange,\n      onLayout: this._onLayout,\n      onScroll: this._onScroll,\n      onScrollBeginDrag: this._onScrollBeginDrag,\n      onScrollEndDrag: this._onScrollEndDrag,\n      onMomentumScrollEnd: this._onMomentumScrollEnd,\n      scrollEventThrottle: this.props.scrollEventThrottle, // TODO: Android support\n      invertStickyHeaders: this.props.invertStickyHeaders !== undefined ? this.props.invertStickyHeaders : this.props.inverted,\n      stickyHeaderIndices: stickyHeaderIndices\n    });\n    if (inversionStyle) {\n      scrollProps.style = [inversionStyle, this.props.style];\n    }\n\n    this._hasMore = this.state.last < this.props.getItemCount(this.props.data) - 1;\n\n    var ret = React.cloneElement((this.props.renderScrollComponent || this._defaultRenderScrollComponent)(scrollProps), {\n      ref: this._captureScrollRef\n    }, cells);\n    if (this.props.debug) {\n      return React.createElement(\n        View,\n        { style: { flex: 1 } },\n        ret,\n        this._renderDebugOverlay()\n      );\n    } else {\n      return ret;\n    }\n  };\n\n  VirtualizedList.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var _props6 = this.props,\n        data = _props6.data,\n        extraData = _props6.extraData;\n\n    if (data !== prevProps.data || extraData !== prevProps.extraData) {\n      this._hasDataChangedSinceEndReached = true;\n\n      // clear the viewableIndices cache to also trigger\n      // the onViewableItemsChanged callback with the new data\n      this._viewabilityTuples.forEach(function (tuple) {\n        tuple.viewabilityHelper.resetViewableIndices();\n      });\n    }\n    this._scheduleCellsToRenderUpdate();\n  };\n  // Maps a cell key to the set of keys for all outermost child lists within that cell\n\n\n  VirtualizedList.prototype._computeBlankness = function _computeBlankness() {\n    this._fillRateHelper.computeBlankness(this.props, this.state, this._scrollMetrics);\n  };\n\n  VirtualizedList.prototype._onCellLayout = function _onCellLayout(e, cellKey, index) {\n    var layout = e.nativeEvent.layout;\n    var next = {\n      offset: this._selectOffset(layout),\n      length: this._selectLength(layout),\n      index: index,\n      inLayout: true\n    };\n    var curr = this._frames[cellKey];\n    if (!curr || next.offset !== curr.offset || next.length !== curr.length || index !== curr.index) {\n      this._totalCellLength += next.length - (curr ? curr.length : 0);\n      this._totalCellsMeasured += curr ? 0 : 1;\n      this._averageCellLength = this._totalCellLength / this._totalCellsMeasured;\n      this._frames[cellKey] = next;\n      this._highestMeasuredFrameIndex = Math.max(this._highestMeasuredFrameIndex, index);\n      this._scheduleCellsToRenderUpdate();\n    } else {\n      this._frames[cellKey].inLayout = true;\n    }\n    this._computeBlankness();\n  };\n\n  VirtualizedList.prototype._measureLayoutRelativeToContainingList = function _measureLayoutRelativeToContainingList() {\n    var _this3 = this;\n\n    UIManager.measureLayout(findNodeHandle(this), findNodeHandle(this.context.virtualizedList.getOutermostParentListRef()), function (error) {\n      console.warn(\"VirtualizedList: Encountered an error while measuring a list's\" + ' offset from its containing VirtualizedList.');\n    }, function (x, y, width, height) {\n      _this3._offsetFromParentVirtualizedList = _this3._selectOffset({ x: x, y: y });\n      _this3._scrollMetrics.contentLength = _this3._selectLength({ width: width, height: height });\n\n      var scrollMetrics = _this3._convertParentScrollMetrics(_this3.context.virtualizedList.getScrollMetrics());\n      _this3._scrollMetrics.visibleLength = scrollMetrics.visibleLength;\n      _this3._scrollMetrics.offset = scrollMetrics.offset;\n    });\n  };\n\n  VirtualizedList.prototype._renderDebugOverlay = function _renderDebugOverlay() {\n    var normalize = this._scrollMetrics.visibleLength / this._scrollMetrics.contentLength;\n    var framesInLayout = [];\n    var itemCount = this.props.getItemCount(this.props.data);\n    for (var ii = 0; ii < itemCount; ii++) {\n      var frame = this._getFrameMetricsApprox(ii);\n      if (frame.inLayout) {\n        framesInLayout.push(frame);\n      }\n    }\n    var windowTop = this._getFrameMetricsApprox(this.state.first).offset;\n    var frameLast = this._getFrameMetricsApprox(this.state.last);\n    var windowLen = frameLast.offset + frameLast.length - windowTop;\n    var visTop = this._scrollMetrics.offset;\n    var visLen = this._scrollMetrics.visibleLength;\n    var baseStyle = { position: 'absolute', top: 0, right: 0 };\n    return React.createElement(\n      View,\n      {\n        style: Object.assign({}, baseStyle, {\n          bottom: 0,\n          width: 20,\n          borderColor: 'blue',\n          borderWidth: 1\n        }) },\n      framesInLayout.map(function (f, ii) {\n        return React.createElement(View, {\n          key: 'f' + ii,\n          style: Object.assign({}, baseStyle, {\n            left: 0,\n            top: f.offset * normalize,\n            height: f.length * normalize,\n            backgroundColor: 'orange'\n          })\n        });\n      }),\n      React.createElement(View, {\n        style: Object.assign({}, baseStyle, {\n          left: 0,\n          top: windowTop * normalize,\n          height: windowLen * normalize,\n          borderColor: 'green',\n          borderWidth: 2\n        })\n      }),\n      React.createElement(View, {\n        style: Object.assign({}, baseStyle, {\n          left: 0,\n          top: visTop * normalize,\n          height: visLen * normalize,\n          borderColor: 'red',\n          borderWidth: 2\n        })\n      })\n    );\n  };\n\n  VirtualizedList.prototype._selectLength = function _selectLength(metrics) {\n    return !this.props.horizontal ? metrics.height : metrics.width;\n  };\n\n  VirtualizedList.prototype._selectOffset = function _selectOffset(metrics) {\n    return !this.props.horizontal ? metrics.y : metrics.x;\n  };\n\n  VirtualizedList.prototype._maybeCallOnEndReached = function _maybeCallOnEndReached() {\n    var _props7 = this.props,\n        data = _props7.data,\n        getItemCount = _props7.getItemCount,\n        onEndReached = _props7.onEndReached,\n        onEndReachedThreshold = _props7.onEndReachedThreshold;\n    var _scrollMetrics = this._scrollMetrics,\n        contentLength = _scrollMetrics.contentLength,\n        visibleLength = _scrollMetrics.visibleLength,\n        offset = _scrollMetrics.offset;\n\n    var distanceFromEnd = contentLength - visibleLength - offset;\n    if (onEndReached && this.state.last === getItemCount(data) - 1 &&\n    /* $FlowFixMe(>=0.63.0 site=react_native_fb) This comment suppresses an\n     * error found when Flow v0.63 was deployed. To see the error delete this\n     * comment and run Flow. */\n    distanceFromEnd < onEndReachedThreshold * visibleLength && (this._hasDataChangedSinceEndReached || this._scrollMetrics.contentLength !== this._sentEndForContentLength)) {\n      // Only call onEndReached once for a given dataset + content length.\n      this._hasDataChangedSinceEndReached = false;\n      this._sentEndForContentLength = this._scrollMetrics.contentLength;\n      onEndReached({ distanceFromEnd: distanceFromEnd });\n    }\n  };\n\n  /* Translates metrics from a scroll event in a parent VirtualizedList into\n   * coordinates relative to the child list.\n   */\n\n\n  VirtualizedList.prototype._scheduleCellsToRenderUpdate = function _scheduleCellsToRenderUpdate() {\n    var _state2 = this.state,\n        first = _state2.first,\n        last = _state2.last;\n    var _scrollMetrics2 = this._scrollMetrics,\n        offset = _scrollMetrics2.offset,\n        visibleLength = _scrollMetrics2.visibleLength,\n        velocity = _scrollMetrics2.velocity;\n\n    var itemCount = this.props.getItemCount(this.props.data);\n    var hiPri = false;\n    if (first > 0 || last < itemCount - 1) {\n      var distTop = offset - this._getFrameMetricsApprox(first).offset;\n      var distBottom = this._getFrameMetricsApprox(last).offset - (offset + visibleLength);\n      var scrollingThreshold =\n      /* $FlowFixMe(>=0.63.0 site=react_native_fb) This comment suppresses an\n       * error found when Flow v0.63 was deployed. To see the error delete\n       * this comment and run Flow. */\n      this.props.onEndReachedThreshold * visibleLength / 2;\n      hiPri = Math.min(distTop, distBottom) < 0 || velocity < -2 && distTop < scrollingThreshold || velocity > 2 && distBottom < scrollingThreshold;\n    }\n    // Only trigger high-priority updates if we've actually rendered cells,\n    // and with that size estimate, accurately compute how many cells we should render.\n    // Otherwise, it would just render as many cells as it can (of zero dimension),\n    // each time through attempting to render more (limited by maxToRenderPerBatch),\n    // starving the renderer from actually laying out the objects and computing _averageCellLength.\n    if (hiPri && this._averageCellLength) {\n      // Don't worry about interactions when scrolling quickly; focus on filling content as fast\n      // as possible.\n      this._updateCellsToRenderBatcher.dispose({ abort: true });\n      this._updateCellsToRender();\n      return;\n    } else {\n      this._updateCellsToRenderBatcher.schedule();\n    }\n  };\n\n  VirtualizedList.prototype._updateViewableItems = function _updateViewableItems(data) {\n    var _this4 = this;\n\n    var getItemCount = this.props.getItemCount;\n\n\n    this._viewabilityTuples.forEach(function (tuple) {\n      tuple.viewabilityHelper.onUpdate(getItemCount(data), _this4._scrollMetrics.offset, _this4._scrollMetrics.visibleLength, _this4._getFrameMetrics, _this4._createViewToken, tuple.onViewableItemsChanged, _this4.state);\n    });\n  };\n\n  return VirtualizedList;\n}(React.PureComponent);\n\nVirtualizedList.defaultProps = {\n  disableVirtualization: process.env.NODE_ENV === 'test',\n  horizontal: false,\n  initialNumToRender: 10,\n  keyExtractor: function keyExtractor(item, index) {\n    if (item.key != null) {\n      return item.key;\n    }\n    _usedIndexForKey = true;\n    return String(index);\n  },\n  maxToRenderPerBatch: 10,\n  onEndReachedThreshold: 2, // multiples of length\n  scrollEventThrottle: 50,\n  updateCellsBatchingPeriod: 50,\n  windowSize: 21 // multiples of length\n};\nVirtualizedList.contextTypes = {\n  virtualizedCell: PropTypes.shape({\n    cellKey: PropTypes.string\n  }),\n  virtualizedList: PropTypes.shape({\n    getScrollMetrics: PropTypes.func,\n    horizontal: PropTypes.bool,\n    getOutermostParentListRef: PropTypes.func,\n    getNestedChildState: PropTypes.func,\n    registerAsNestedChild: PropTypes.func,\n    unregisterAsNestedChild: PropTypes.func\n  })\n};\nVirtualizedList.childContextTypes = {\n  virtualizedList: PropTypes.shape({\n    getScrollMetrics: PropTypes.func,\n    horizontal: PropTypes.bool,\n    getOutermostParentListRef: PropTypes.func,\n    getNestedChildState: PropTypes.func,\n    registerAsNestedChild: PropTypes.func,\n    unregisterAsNestedChild: PropTypes.func\n  })\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this7 = this;\n\n  this._getScrollMetrics = function () {\n    return _this7._scrollMetrics;\n  };\n\n  this._getOutermostParentListRef = function () {\n    if (_this7._isNestedWithSameOrientation()) {\n      return _this7.context.virtualizedList.getOutermostParentListRef();\n    } else {\n      return _this7;\n    }\n  };\n\n  this._getNestedChildState = function (key) {\n    var existingChildData = _this7._nestedChildLists.get(key);\n    return existingChildData && existingChildData.state;\n  };\n\n  this._registerAsNestedChild = function (childList) {\n    // Register the mapping between this child key and the cellKey for its cell\n    var childListsInCell = _this7._cellKeysToChildListKeys.get(childList.cellKey) || new Set();\n    childListsInCell.add(childList.key);\n    _this7._cellKeysToChildListKeys.set(childList.cellKey, childListsInCell);\n\n    var existingChildData = _this7._nestedChildLists.get(childList.key);\n    invariant(!(existingChildData && existingChildData.ref !== null), 'A VirtualizedList contains a cell which itself contains ' + 'more than one VirtualizedList of the same orientation as the parent ' + 'list. You must pass a unique listKey prop to each sibling list.');\n    _this7._nestedChildLists.set(childList.key, {\n      ref: childList.ref,\n      state: null\n    });\n\n    if (_this7._hasInteracted) {\n      childList.ref.recordInteraction();\n    }\n  };\n\n  this._unregisterAsNestedChild = function (childList) {\n    _this7._nestedChildLists.set(childList.key, {\n      ref: null,\n      state: childList.state\n    });\n  };\n\n  this._onUpdateSeparators = function (keys, newProps) {\n    keys.forEach(function (key) {\n      var ref = key != null && _this7._cellRefs[key];\n      ref && ref.updateSeparatorProps(newProps);\n    });\n  };\n\n  this._averageCellLength = 0;\n  this._cellKeysToChildListKeys = new Map();\n  this._cellRefs = {};\n  this._frames = {};\n  this._footerLength = 0;\n  this._hasDataChangedSinceEndReached = true;\n  this._hasInteracted = false;\n  this._hasMore = false;\n  this._hasWarned = {};\n  this._highestMeasuredFrameIndex = 0;\n  this._headerLength = 0;\n  this._indicesToKeys = new Map();\n  this._hasDoneInitialScroll = false;\n  this._nestedChildLists = new Map();\n  this._offsetFromParentVirtualizedList = 0;\n  this._prevParentOffset = 0;\n  this._scrollMetrics = {\n    contentLength: 0,\n    dOffset: 0,\n    dt: 10,\n    offset: 0,\n    timestamp: 0,\n    velocity: 0,\n    visibleLength: 0\n  };\n  this._scrollRef = null;\n  this._sentEndForContentLength = 0;\n  this._totalCellLength = 0;\n  this._totalCellsMeasured = 0;\n  this._viewabilityTuples = [];\n\n  this._captureScrollRef = function (ref) {\n    _this7._scrollRef = ref;\n  };\n\n  this._defaultRenderScrollComponent = function (props) {\n    if (_this7._isNestedWithSameOrientation()) {\n      return React.createElement(View, props);\n    } else if (props.onRefresh) {\n      invariant(typeof props.refreshing === 'boolean', '`refreshing` prop must be set as a boolean in order to use `onRefresh`, but got `' + JSON.stringify(props.refreshing) + '`');\n      return React.createElement(ScrollView, _extends({}, props, {\n        refreshControl:\n        /* $FlowFixMe(>=0.53.0 site=react_native_fb,react_native_oss) This\n         * comment suppresses an error when upgrading Flow's support for\n         * React. To see the error delete this comment and run Flow. */\n        React.createElement(RefreshControl, {\n          refreshing: props.refreshing,\n          onRefresh: props.onRefresh,\n          progressViewOffset: props.progressViewOffset\n        })\n      }));\n    } else {\n      return React.createElement(ScrollView, props);\n    }\n  };\n\n  this._onCellUnmount = function (cellKey) {\n    var curr = _this7._frames[cellKey];\n    if (curr) {\n      _this7._frames[cellKey] = Object.assign({}, curr, { inLayout: false });\n    }\n  };\n\n  this._onLayout = function (e) {\n    if (_this7._isNestedWithSameOrientation()) {\n      // Need to adjust our scroll metrics to be relative to our containing\n      // VirtualizedList before we can make claims about list item viewability\n      _this7._measureLayoutRelativeToContainingList();\n    } else {\n      _this7._scrollMetrics.visibleLength = _this7._selectLength(e.nativeEvent.layout);\n    }\n    _this7.props.onLayout && _this7.props.onLayout(e);\n    _this7._scheduleCellsToRenderUpdate();\n    _this7._maybeCallOnEndReached();\n  };\n\n  this._onLayoutEmpty = function (e) {\n    _this7.props.onLayout && _this7.props.onLayout(e);\n  };\n\n  this._onLayoutFooter = function (e) {\n    _this7._footerLength = _this7._selectLength(e.nativeEvent.layout);\n  };\n\n  this._onLayoutHeader = function (e) {\n    _this7._headerLength = _this7._selectLength(e.nativeEvent.layout);\n  };\n\n  this._onContentSizeChange = function (width, height) {\n    if (width > 0 && height > 0 && _this7.props.initialScrollIndex != null && _this7.props.initialScrollIndex > 0 && !_this7._hasDoneInitialScroll) {\n      _this7.scrollToIndex({\n        animated: false,\n        index: _this7.props.initialScrollIndex\n      });\n      _this7._hasDoneInitialScroll = true;\n    }\n    if (_this7.props.onContentSizeChange) {\n      _this7.props.onContentSizeChange(width, height);\n    }\n    _this7._scrollMetrics.contentLength = _this7._selectLength({ height: height, width: width });\n    _this7._scheduleCellsToRenderUpdate();\n    _this7._maybeCallOnEndReached();\n  };\n\n  this._convertParentScrollMetrics = function (metrics) {\n    // Offset of the top of the nested list relative to the top of its parent's viewport\n    var offset = metrics.offset - _this7._offsetFromParentVirtualizedList;\n    // Child's visible length is the same as its parent's\n    var visibleLength = metrics.visibleLength;\n    var dOffset = offset - _this7._scrollMetrics.offset;\n    var contentLength = _this7._scrollMetrics.contentLength;\n\n    return {\n      visibleLength: visibleLength,\n      contentLength: contentLength,\n      offset: offset,\n      dOffset: dOffset\n    };\n  };\n\n  this._onScroll = function (e) {\n    _this7._nestedChildLists.forEach(function (childList) {\n      childList.ref && childList.ref._onScroll(e);\n    });\n    if (_this7.props.onScroll) {\n      _this7.props.onScroll(e);\n    }\n    var timestamp = e.timeStamp;\n    var visibleLength = _this7._selectLength(e.nativeEvent.layoutMeasurement);\n    var contentLength = _this7._selectLength(e.nativeEvent.contentSize);\n    var offset = _this7._selectOffset(e.nativeEvent.contentOffset);\n    var dOffset = offset - _this7._scrollMetrics.offset;\n\n    if (_this7._isNestedWithSameOrientation()) {\n      if (_this7._scrollMetrics.contentLength === 0) {\n        // Ignore scroll events until onLayout has been called and we\n        // know our offset from our offset from our parent\n        return;\n      }\n\n      var _convertParentScrollM = _this7._convertParentScrollMetrics({\n        visibleLength: visibleLength,\n        offset: offset\n      });\n\n      visibleLength = _convertParentScrollM.visibleLength;\n      contentLength = _convertParentScrollM.contentLength;\n      offset = _convertParentScrollM.offset;\n      dOffset = _convertParentScrollM.dOffset;\n    }\n\n    var dt = _this7._scrollMetrics.timestamp ? Math.max(1, timestamp - _this7._scrollMetrics.timestamp) : 1;\n    var velocity = dOffset / dt;\n\n    if (dt > 500 && _this7._scrollMetrics.dt > 500 && contentLength > 5 * visibleLength && !_this7._hasWarned.perf) {\n      infoLog('VirtualizedList: You have a large list that is slow to update - make sure your ' + 'renderItem function renders components that follow React performance best practices ' + 'like PureComponent, shouldComponentUpdate, etc.', { dt: dt, prevDt: _this7._scrollMetrics.dt, contentLength: contentLength });\n      _this7._hasWarned.perf = true;\n    }\n    _this7._scrollMetrics = {\n      contentLength: contentLength,\n      dt: dt,\n      dOffset: dOffset,\n      offset: offset,\n      timestamp: timestamp,\n      velocity: velocity,\n      visibleLength: visibleLength\n    };\n    _this7._updateViewableItems(_this7.props.data);\n    if (!_this7.props) {\n      return;\n    }\n    _this7._maybeCallOnEndReached();\n    if (velocity !== 0) {\n      _this7._fillRateHelper.activate();\n    }\n    _this7._computeBlankness();\n    _this7._scheduleCellsToRenderUpdate();\n  };\n\n  this._onScrollBeginDrag = function (e) {\n    _this7._nestedChildLists.forEach(function (childList) {\n      childList.ref && childList.ref._onScrollBeginDrag(e);\n    });\n    _this7._viewabilityTuples.forEach(function (tuple) {\n      tuple.viewabilityHelper.recordInteraction();\n    });\n    _this7._hasInteracted = true;\n    _this7.props.onScrollBeginDrag && _this7.props.onScrollBeginDrag(e);\n  };\n\n  this._onScrollEndDrag = function (e) {\n    var velocity = e.nativeEvent.velocity;\n\n    if (velocity) {\n      _this7._scrollMetrics.velocity = _this7._selectOffset(velocity);\n    }\n    _this7._computeBlankness();\n    _this7.props.onScrollEndDrag && _this7.props.onScrollEndDrag(e);\n  };\n\n  this._onMomentumScrollEnd = function (e) {\n    _this7._scrollMetrics.velocity = 0;\n    _this7._computeBlankness();\n    _this7.props.onMomentumScrollEnd && _this7.props.onMomentumScrollEnd(e);\n  };\n\n  this._updateCellsToRender = function () {\n    var _props9 = _this7.props,\n        data = _props9.data,\n        getItemCount = _props9.getItemCount,\n        onEndReachedThreshold = _props9.onEndReachedThreshold;\n\n    var isVirtualizationDisabled = _this7._isVirtualizationDisabled();\n    _this7._updateViewableItems(data);\n    if (!data) {\n      return;\n    }\n    _this7.setState(function (state) {\n      var newState = void 0;\n      if (!isVirtualizationDisabled) {\n        // If we run this with bogus data, we'll force-render window {first: 0, last: 0},\n        // and wipe out the initialNumToRender rendered elements.\n        // So let's wait until the scroll view metrics have been set up. And until then,\n        // we will trust the initialNumToRender suggestion\n        if (_this7._scrollMetrics.visibleLength) {\n          // If we have a non-zero initialScrollIndex and run this before we've scrolled,\n          // we'll wipe out the initialNumToRender rendered elements starting at initialScrollIndex.\n          // So let's wait until we've scrolled the view to the right place. And until then,\n          // we will trust the initialScrollIndex suggestion.\n          if (!_this7.props.initialScrollIndex || _this7._scrollMetrics.offset) {\n            newState = computeWindowedRenderLimits(_this7.props, state, _this7._getFrameMetricsApprox, _this7._scrollMetrics);\n          }\n        }\n      } else {\n        var _scrollMetrics3 = _this7._scrollMetrics,\n            contentLength = _scrollMetrics3.contentLength,\n            _offset = _scrollMetrics3.offset,\n            visibleLength = _scrollMetrics3.visibleLength;\n\n        var _distanceFromEnd = contentLength - visibleLength - _offset;\n        var renderAhead =\n        /* $FlowFixMe(>=0.63.0 site=react_native_fb) This comment suppresses\n         * an error found when Flow v0.63 was deployed. To see the error\n         * delete this comment and run Flow. */\n        _distanceFromEnd < onEndReachedThreshold * visibleLength ? _this7.props.maxToRenderPerBatch : 0;\n        newState = {\n          first: 0,\n          last: Math.min(state.last + renderAhead, getItemCount(data) - 1)\n        };\n      }\n      if (newState && _this7._nestedChildLists.size > 0) {\n        var newFirst = newState.first;\n        var newLast = newState.last;\n        // If some cell in the new state has a child list in it, we should only render\n        // up through that item, so that we give that list a chance to render.\n        // Otherwise there's churn from multiple child lists mounting and un-mounting\n        // their items.\n        for (var ii = newFirst; ii <= newLast; ii++) {\n          var cellKeyForIndex = _this7._indicesToKeys.get(ii);\n          var childListKeys = cellKeyForIndex && _this7._cellKeysToChildListKeys.get(cellKeyForIndex);\n          if (!childListKeys) {\n            continue;\n          }\n          var someChildHasMore = false;\n          // For each cell, need to check whether any child list in it has more elements to render\n          for (var _iterator = childListKeys, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n            var _ref6;\n\n            if (_isArray) {\n              if (_i >= _iterator.length) break;\n              _ref6 = _iterator[_i++];\n            } else {\n              _i = _iterator.next();\n              if (_i.done) break;\n              _ref6 = _i.value;\n            }\n\n            var childKey = _ref6;\n\n            var childList = _this7._nestedChildLists.get(childKey);\n            if (childList && childList.ref && childList.ref.hasMore()) {\n              someChildHasMore = true;\n              break;\n            }\n          }\n          if (someChildHasMore) {\n            newState.last = ii;\n            break;\n          }\n        }\n      }\n      return newState;\n    });\n  };\n\n  this._createViewToken = function (index, isViewable) {\n    var _props10 = _this7.props,\n        data = _props10.data,\n        getItem = _props10.getItem,\n        keyExtractor = _props10.keyExtractor;\n\n    var item = getItem(data, index);\n    return { index: index, item: item, key: keyExtractor(item, index), isViewable: isViewable };\n  };\n\n  this._getFrameMetricsApprox = function (index) {\n    var frame = _this7._getFrameMetrics(index);\n    if (frame && frame.index === index) {\n      // check for invalid frames due to row re-ordering\n      return frame;\n    } else {\n      var _getItemLayout = _this7.props.getItemLayout;\n\n      invariant(!_getItemLayout, 'Should not have to estimate frames when a measurement metrics function is provided');\n      return {\n        length: _this7._averageCellLength,\n        offset: _this7._averageCellLength * index\n      };\n    }\n  };\n\n  this._getFrameMetrics = function (index) {\n    var _props11 = _this7.props,\n        data = _props11.data,\n        getItem = _props11.getItem,\n        getItemCount = _props11.getItemCount,\n        getItemLayout = _props11.getItemLayout,\n        keyExtractor = _props11.keyExtractor;\n\n    invariant(getItemCount(data) > index, 'Tried to get frame for out of range index ' + index);\n    var item = getItem(data, index);\n    var frame = item && _this7._frames[keyExtractor(item, index)];\n    if (!frame || frame.index !== index) {\n      if (getItemLayout) {\n        frame = getItemLayout(data, index);\n        if (__DEV__) {\n          var frameType = PropTypes.shape({\n            length: PropTypes.number.isRequired,\n            offset: PropTypes.number.isRequired,\n            index: PropTypes.number.isRequired\n          }).isRequired;\n          PropTypes.checkPropTypes({ frame: frameType }, { frame: frame }, 'frame', 'VirtualizedList.getItemLayout');\n        }\n      }\n    }\n    /* $FlowFixMe(>=0.63.0 site=react_native_fb) This comment suppresses an\n     * error found when Flow v0.63 was deployed. To see the error delete this\n     * comment and run Flow. */\n    return frame;\n  };\n};\n\nvar CellRenderer = function (_React$Component) {\n  _inherits(CellRenderer, _React$Component);\n\n  function CellRenderer() {\n    var _temp, _this5, _ret2;\n\n    _classCallCheck(this, CellRenderer);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret2 = (_temp = (_this5 = _possibleConstructorReturn(this, _React$Component.call.apply(_React$Component, [this].concat(args))), _this5), _this5.state = {\n      separatorProps: {\n        highlighted: false,\n        leadingItem: _this5.props.item\n      }\n    }, _this5._separators = {\n      highlight: function highlight() {\n        var _this5$props = _this5.props,\n            cellKey = _this5$props.cellKey,\n            prevCellKey = _this5$props.prevCellKey;\n\n        _this5.props.onUpdateSeparators([cellKey, prevCellKey], {\n          highlighted: true\n        });\n      },\n      unhighlight: function unhighlight() {\n        var _this5$props2 = _this5.props,\n            cellKey = _this5$props2.cellKey,\n            prevCellKey = _this5$props2.prevCellKey;\n\n        _this5.props.onUpdateSeparators([cellKey, prevCellKey], {\n          highlighted: false\n        });\n      },\n      updateProps: function updateProps(select, newProps) {\n        var _this5$props3 = _this5.props,\n            cellKey = _this5$props3.cellKey,\n            prevCellKey = _this5$props3.prevCellKey;\n\n        _this5.props.onUpdateSeparators([select === 'leading' ? prevCellKey : cellKey], newProps);\n      }\n    }, _temp), _possibleConstructorReturn(_this5, _ret2);\n  }\n\n  CellRenderer.prototype.getChildContext = function getChildContext() {\n    return {\n      virtualizedCell: {\n        cellKey: this.props.cellKey\n      }\n    };\n  };\n\n  // TODO: consider factoring separator stuff out of VirtualizedList into FlatList since it's not\n  // reused by SectionList and we can keep VirtualizedList simpler.\n\n\n  CellRenderer.prototype.updateSeparatorProps = function updateSeparatorProps(newProps) {\n    this.setState(function (state) {\n      return {\n        separatorProps: Object.assign({}, state.separatorProps, newProps)\n      };\n    });\n  };\n\n  CellRenderer.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.props.onUnmount(this.props.cellKey);\n  };\n\n  CellRenderer.prototype.render = function render() {\n    var _props8 = this.props,\n        CellRendererComponent = _props8.CellRendererComponent,\n        ItemSeparatorComponent = _props8.ItemSeparatorComponent,\n        fillRateHelper = _props8.fillRateHelper,\n        horizontal = _props8.horizontal,\n        item = _props8.item,\n        index = _props8.index,\n        inversionStyle = _props8.inversionStyle,\n        parentProps = _props8.parentProps;\n    var renderItem = parentProps.renderItem,\n        getItemLayout = parentProps.getItemLayout;\n\n    invariant(renderItem, 'no renderItem!');\n    var element = renderItem({\n      item: item,\n      index: index,\n      separators: this._separators\n    });\n    var onLayout = getItemLayout && !parentProps.debug && !fillRateHelper.enabled() ? undefined : this.props.onLayout;\n    // NOTE: that when this is a sticky header, `onLayout` will get automatically extracted and\n    // called explicitly by `ScrollViewStickyHeader`.\n    var itemSeparator = ItemSeparatorComponent && React.createElement(ItemSeparatorComponent, this.state.separatorProps);\n    var cellStyle = inversionStyle ? horizontal ? [styles.rowReverse, inversionStyle] : [styles.columnReverse, inversionStyle] : horizontal ? [styles.row, inversionStyle] : inversionStyle;\n    if (!CellRendererComponent) {\n      return React.createElement(\n        View,\n        { style: cellStyle, onLayout: onLayout },\n        element,\n        itemSeparator\n      );\n    }\n    return React.createElement(\n      CellRendererComponent,\n      _extends({}, this.props, {\n        style: cellStyle,\n        onLayout: onLayout }),\n      element,\n      itemSeparator\n    );\n  };\n\n  return CellRenderer;\n}(React.Component);\n\nCellRenderer.childContextTypes = {\n  virtualizedCell: PropTypes.shape({\n    cellKey: PropTypes.string\n  })\n};\n\nvar VirtualizedCellWrapper = function (_React$Component2) {\n  _inherits(VirtualizedCellWrapper, _React$Component2);\n\n  function VirtualizedCellWrapper() {\n    _classCallCheck(this, VirtualizedCellWrapper);\n\n    return _possibleConstructorReturn(this, _React$Component2.apply(this, arguments));\n  }\n\n  VirtualizedCellWrapper.prototype.getChildContext = function getChildContext() {\n    return {\n      virtualizedCell: {\n        cellKey: this.props.cellKey\n      }\n    };\n  };\n\n  VirtualizedCellWrapper.prototype.render = function render() {\n    return this.props.children;\n  };\n\n  return VirtualizedCellWrapper;\n}(React.Component);\n\nVirtualizedCellWrapper.childContextTypes = {\n  virtualizedCell: PropTypes.shape({\n    cellKey: PropTypes.string\n  })\n};\n\n\nvar styles = StyleSheet.create({\n  verticallyInverted: {\n    transform: [{ scaleY: -1 }]\n  },\n  horizontallyInverted: {\n    transform: [{ scaleX: -1 }]\n  },\n  row: {\n    flexDirection: 'row'\n  },\n  rowReverse: {\n    flexDirection: 'row-reverse'\n  },\n  columnReverse: {\n    flexDirection: 'column-reverse'\n  }\n});\n\nexport default VirtualizedList;"]},"metadata":{},"sourceType":"module"}