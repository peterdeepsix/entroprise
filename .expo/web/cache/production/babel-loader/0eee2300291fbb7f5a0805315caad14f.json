{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useState,useEffect}from\"react\";import Loadable from\"@loadable/component\";import firebase from\"gatsby-plugin-firebase\";import{useCollection}from\"react-firebase-hooks/firestore\";import{useAuthState}from\"react-firebase-hooks/auth\";import IndefiniteLoading from\"src/components/Loading/IndefiniteLoading\";import Badge from\"@material-ui/core/Badge\";import Avatar from\"@material-ui/core/Avatar\";import List from\"@material-ui/core/List\";import ListItem from\"@material-ui/core/ListItem\";import ListItemText from\"@material-ui/core/ListItemText\";import ListItemAvatar from\"@material-ui/core/ListItemAvatar\";import{makeStyles,withStyles}from\"@material-ui/core/styles\";import{Container,Box,Card,CardContent,CardHeader,Typography}from\"@material-ui/core\";var StyledBadge=withStyles(function(theme){return{badge:{backgroundColor:\"#44b700\",color:\"#44b700\",boxShadow:\"0 0 0 2px \"+theme.palette.background.paper,\"&::after\":{position:\"absolute\",top:0,left:0,width:\"100%\",height:\"100%\",borderRadius:\"50%\",animation:\"$ripple 1.2s infinite ease-in-out\",border:\"1px solid currentColor\",content:'\"\"'}},\"@keyframes ripple\":{\"0%\":{transform:\"scale(.8)\",opacity:1},\"100%\":{transform:\"scale(2.4)\",opacity:0}}};})(Badge);var useStyles=makeStyles(function(theme){return{root:{width:\"100%\"}};});var UsersList=function UsersList(_ref){var callUser=_ref.callUser;var classes=useStyles();var _useCollection=useCollection(firebase.firestore().collection(\"users\"),{snapshotListenOptions:{includeMetadataChanges:true}}),_useCollection2=_slicedToArray(_useCollection,1),users=_useCollection2[0];return React.createElement(Card,{variant:\"outlined\"},React.createElement(CardHeader,{title:\"User List\"}),React.createElement(CardContent,null,React.createElement(List,{className:classes.root},users&&React.createElement(React.Fragment,null,users.docs.map(function(doc){var data=doc.data();if(data.status){if(data.displayName==null&&data.status.state==\"offline\")return;}return React.createElement(ListItem,{disableGutters:true,key:doc.id,onClick:function onClick(){callUser(doc);}},doc.data().status&&React.createElement(React.Fragment,null,doc.data().status.state==\"online\"&&React.createElement(ListItemAvatar,null,React.createElement(StyledBadge,{overlap:\"circle\",anchorOrigin:{vertical:\"bottom\",horizontal:\"right\"},variant:\"dot\"},React.createElement(Avatar,{src:data.photoURL,alt:data.displayName})))||React.createElement(ListItemAvatar,null,React.createElement(Avatar,{src:data.photoURL,alt:data.displayName}))),React.createElement(ListItemText,{primary:data.isAnonymous&&\"Anonymous User\"||data.displayName,secondary:doc.id}));})))));};export default UsersList;","map":{"version":3,"sources":["C:/Users/arnol/code/entroprise/src/components/UsersPage/UsersList.js"],"names":["React","useState","useEffect","Loadable","firebase","useCollection","useAuthState","IndefiniteLoading","Badge","Avatar","List","ListItem","ListItemText","ListItemAvatar","makeStyles","withStyles","Container","Box","Card","CardContent","CardHeader","Typography","StyledBadge","theme","badge","backgroundColor","color","boxShadow","palette","background","paper","position","top","left","width","height","borderRadius","animation","border","content","transform","opacity","useStyles","root","UsersList","callUser","classes","firestore","collection","snapshotListenOptions","includeMetadataChanges","users","docs","map","doc","data","status","displayName","state","id","vertical","horizontal","photoURL","isAnonymous"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\"\r\nimport Loadable from \"@loadable/component\"\r\nimport firebase from \"gatsby-plugin-firebase\"\r\nimport { useCollection } from \"react-firebase-hooks/firestore\"\r\nimport { useAuthState } from \"react-firebase-hooks/auth\"\r\n\r\nimport IndefiniteLoading from \"src/components/Loading/IndefiniteLoading\"\r\n\r\nimport Badge from \"@material-ui/core/Badge\"\r\nimport Avatar from \"@material-ui/core/Avatar\"\r\nimport List from \"@material-ui/core/List\"\r\nimport ListItem from \"@material-ui/core/ListItem\"\r\nimport ListItemText from \"@material-ui/core/ListItemText\"\r\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\"\r\nimport { makeStyles, withStyles } from \"@material-ui/core/styles\"\r\n\r\nimport {\r\n  Container,\r\n  Box,\r\n  Card,\r\n  CardContent,\r\n  CardHeader,\r\n  Typography,\r\n} from \"@material-ui/core\"\r\n\r\nconst StyledBadge = withStyles(theme => ({\r\n  badge: {\r\n    backgroundColor: \"#44b700\",\r\n    color: \"#44b700\",\r\n    boxShadow: `0 0 0 2px ${theme.palette.background.paper}`,\r\n    \"&::after\": {\r\n      position: \"absolute\",\r\n      top: 0,\r\n      left: 0,\r\n      width: \"100%\",\r\n      height: \"100%\",\r\n      borderRadius: \"50%\",\r\n      animation: \"$ripple 1.2s infinite ease-in-out\",\r\n      border: \"1px solid currentColor\",\r\n      content: '\"\"',\r\n    },\r\n  },\r\n  \"@keyframes ripple\": {\r\n    \"0%\": {\r\n      transform: \"scale(.8)\",\r\n      opacity: 1,\r\n    },\r\n    \"100%\": {\r\n      transform: \"scale(2.4)\",\r\n      opacity: 0,\r\n    },\r\n  },\r\n}))(Badge)\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n}))\r\n\r\nconst UsersList = ({ callUser }) => {\r\n  const classes = useStyles()\r\n\r\n  const [users] = useCollection(firebase.firestore().collection(\"users\"), {\r\n    snapshotListenOptions: { includeMetadataChanges: true },\r\n  })\r\n\r\n  return (\r\n    <Card variant=\"outlined\">\r\n      <CardHeader title=\"User List\" />\r\n      <CardContent>\r\n        <List className={classes.root}>\r\n          {users && (\r\n            <>\r\n              {users.docs.map(doc => {\r\n                const data = doc.data()\r\n                if (data.status) {\r\n                  if (\r\n                    data.displayName == null &&\r\n                    data.status.state == \"offline\"\r\n                  )\r\n                    return\r\n                }\r\n                return (\r\n                  <ListItem\r\n                    disableGutters\r\n                    key={doc.id}\r\n                    onClick={() => {\r\n                      callUser(doc)\r\n                    }}\r\n                  >\r\n                    {doc.data().status && (\r\n                      <>\r\n                        {(doc.data().status.state == \"online\" && (\r\n                          <ListItemAvatar>\r\n                            <StyledBadge\r\n                              overlap=\"circle\"\r\n                              anchorOrigin={{\r\n                                vertical: \"bottom\",\r\n                                horizontal: \"right\",\r\n                              }}\r\n                              variant=\"dot\"\r\n                            >\r\n                              <Avatar\r\n                                src={data.photoURL}\r\n                                alt={data.displayName}\r\n                              />\r\n                            </StyledBadge>\r\n                          </ListItemAvatar>\r\n                        )) || (\r\n                          <ListItemAvatar>\r\n                            <Avatar\r\n                              src={data.photoURL}\r\n                              alt={data.displayName}\r\n                            />\r\n                          </ListItemAvatar>\r\n                        )}\r\n                      </>\r\n                    )}\r\n                    <ListItemText\r\n                      primary={\r\n                        (data.isAnonymous && \"Anonymous User\") ||\r\n                        data.displayName\r\n                      }\r\n                      secondary={doc.id}\r\n                    />\r\n                  </ListItem>\r\n                )\r\n              })}\r\n            </>\r\n          )}\r\n        </List>\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n}\r\nexport default UsersList\r\n"]},"metadata":{},"sourceType":"module"}