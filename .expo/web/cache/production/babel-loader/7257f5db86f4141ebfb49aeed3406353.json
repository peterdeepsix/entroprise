{"ast":null,"code":"import _extends2 from\"@babel/runtime/helpers/extends\";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i];}return target;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}import applyNativeMethods from\"../../modules/applyNativeMethods\";import createElement from\"../createElement\";import{getAssetByID}from\"../../modules/AssetRegistry\";import resolveShadowValue from\"../StyleSheet/resolveShadowValue\";import ImageLoader from\"../../modules/ImageLoader\";import ImageResizeMode from\"./ImageResizeMode\";import ImageSourcePropType from\"./ImageSourcePropType\";import ImageStylePropTypes from\"./ImageStylePropTypes\";import ImageUriCache from\"./ImageUriCache\";import StyleSheet from\"../StyleSheet\";import StyleSheetPropType from\"../../modules/StyleSheetPropType\";import View from\"../View\";import ViewPropTypes from\"../ViewPropTypes\";import{bool,func,number,oneOf,shape}from'prop-types';import React,{Component}from'react';var emptyObject={};var STATUS_ERRORED='ERRORED';var STATUS_LOADED='LOADED';var STATUS_LOADING='LOADING';var STATUS_PENDING='PENDING';var STATUS_IDLE='IDLE';var getImageState=function getImageState(uri,shouldDisplaySource){return shouldDisplaySource?STATUS_LOADED:uri?STATUS_PENDING:STATUS_IDLE;};var resolveAssetDimensions=function resolveAssetDimensions(source){if(typeof source==='number'){var _getAssetByID=getAssetByID(source),height=_getAssetByID.height,width=_getAssetByID.width;return{height:height,width:width};}else if(typeof source==='object'){var _height=source.height,_width=source.width;return{height:_height,width:_width};}};var svgDataUriPattern=/^(data:image\\/svg\\+xml;utf8,)(.*)/;var resolveAssetUri=function resolveAssetUri(source){var uri='';if(typeof source==='number'){var asset=getAssetByID(source);var scale=asset.scales[0];var scaleSuffix=scale!==1?'@'+scale+'x':'';uri=asset?asset.httpServerLocation+'/'+asset.name+scaleSuffix+'.'+asset.type:'';}else if(typeof source==='string'){uri=source;}else if(source&&typeof source.uri==='string'){uri=source.uri;}if(uri){var match=uri.match(svgDataUriPattern);if(match){var prefix=match[1],svg=match[2];var encodedSvg=encodeURIComponent(svg);return''+prefix+encodedSvg;}}return uri;};var filterId=0;var createTintColorSVG=function createTintColorSVG(tintColor,id){return tintColor&&id!=null?React.createElement('svg',{style:{position:'absolute',height:0,visibility:'hidden',width:0}},React.createElement('defs',null,React.createElement('filter',{id:'tint-'+id},React.createElement('feFlood',{floodColor:''+tintColor}),React.createElement('feComposite',{in2:'SourceAlpha',operator:'atop'})))):null;};var Image=function(_Component){_inherits(Image,_Component);Image.getSize=function getSize(uri,success,failure){ImageLoader.getSize(uri,success,failure);};Image.prefetch=function prefetch(uri){return ImageLoader.prefetch(uri);};function Image(props,context){_classCallCheck(this,Image);var _this=_possibleConstructorReturn(this,_Component.call(this,props,context));_this._filterId=0;_this._imageRef=null;_this._imageRequestId=null;_this._imageState=null;_this._isMounted=false;_this._createLayoutHandler=function(resizeMode){var onLayout=_this.props.onLayout;if(resizeMode==='center'||resizeMode==='repeat'||onLayout){return function(e){var layout=e.nativeEvent.layout;onLayout&&onLayout(e);_this.setState(function(){return{layout:layout};});};}};_this._getBackgroundSize=function(resizeMode){if(_this._imageRef&&(resizeMode==='center'||resizeMode==='repeat')){var _this$_imageRef=_this._imageRef,naturalHeight=_this$_imageRef.naturalHeight,naturalWidth=_this$_imageRef.naturalWidth;var _this$state$layout=_this.state.layout,height=_this$state$layout.height,width=_this$state$layout.width;if(naturalHeight&&naturalWidth&&height&&width){var scaleFactor=Math.min(1,width/naturalWidth,height/naturalHeight);var x=Math.ceil(scaleFactor*naturalWidth);var y=Math.ceil(scaleFactor*naturalHeight);return{backgroundSize:x+'px '+y+'px'};}}};_this._onError=function(){var _this$props=_this.props,onError=_this$props.onError,source=_this$props.source;_this._updateImageState(STATUS_ERRORED);if(onError){onError({nativeEvent:{error:'Failed to load resource '+resolveAssetUri(source)+' (404)'}});}_this._onLoadEnd();};_this._onLoad=function(e){var _this$props2=_this.props,onLoad=_this$props2.onLoad,source=_this$props2.source;var event={nativeEvent:e};ImageUriCache.add(resolveAssetUri(source));_this._updateImageState(STATUS_LOADED);if(onLoad){onLoad(event);}_this._onLoadEnd();};_this._setImageRef=function(ref){_this._imageRef=ref;};var uri=resolveAssetUri(props.source);var shouldDisplaySource=ImageUriCache.has(uri);_this.state={layout:{},shouldDisplaySource:shouldDisplaySource};_this._imageState=getImageState(uri,shouldDisplaySource);_this._filterId=filterId;filterId++;return _this;}Image.prototype.componentDidMount=function componentDidMount(){this._isMounted=true;if(this._imageState===STATUS_PENDING){this._createImageLoader();}else if(this._imageState===STATUS_LOADED){this._onLoad({target:this._imageRef});}};Image.prototype.componentDidUpdate=function componentDidUpdate(prevProps){var prevUri=resolveAssetUri(prevProps.source);var uri=resolveAssetUri(this.props.source);if(prevUri!==uri){ImageUriCache.remove(prevUri);var isPreviouslyLoaded=ImageUriCache.has(uri);isPreviouslyLoaded&&ImageUriCache.add(uri);this._updateImageState(getImageState(uri,isPreviouslyLoaded));}if(this._imageState===STATUS_PENDING){this._createImageLoader();}};Image.prototype.componentWillUnmount=function componentWillUnmount(){var uri=resolveAssetUri(this.props.source);ImageUriCache.remove(uri);this._destroyImageLoader();this._isMounted=false;};Image.prototype.render=function render(){var shouldDisplaySource=this.state.shouldDisplaySource;var _props=this.props,accessibilityLabel=_props.accessibilityLabel,accessible=_props.accessible,blurRadius=_props.blurRadius,defaultSource=_props.defaultSource,draggable=_props.draggable,source=_props.source,testID=_props.testID,capInsets=_props.capInsets,onError=_props.onError,onLayout=_props.onLayout,onLoad=_props.onLoad,onLoadEnd=_props.onLoadEnd,onLoadStart=_props.onLoadStart,resizeMethod=_props.resizeMethod,resizeMode=_props.resizeMode,other=_objectWithoutProperties(_props,['accessibilityLabel','accessible','blurRadius','defaultSource','draggable','source','testID','capInsets','onError','onLayout','onLoad','onLoadEnd','onLoadStart','resizeMethod','resizeMode']);if(process.env.NODE_ENV!=='production'){if(this.props.src){console.warn('The <Image> component requires a `source` property rather than `src`.');}if(this.props.children){throw new Error('The <Image> component cannot contain children. If you want to render content on top of the image, consider using the <ImageBackground> component or absolute positioning.');}}var selectedSource=shouldDisplaySource?source:defaultSource;var displayImageUri=resolveAssetUri(selectedSource);var imageSizeStyle=resolveAssetDimensions(selectedSource);var backgroundImage=displayImageUri?'url(\"'+displayImageUri+'\")':null;var flatStyle=_extends2({},StyleSheet.flatten(this.props.style));var finalResizeMode=resizeMode||flatStyle.resizeMode||ImageResizeMode.cover;var filters=[];var tintColor=flatStyle.tintColor;if(flatStyle.filter){filters.push(flatStyle.filter);}if(blurRadius){filters.push('blur('+blurRadius+'px)');}if(flatStyle.shadowOffset){var shadowString=resolveShadowValue(flatStyle);if(shadowString){filters.push('drop-shadow('+shadowString+')');}}if(flatStyle.tintColor){filters.push('url(#tint-'+this._filterId+')');}delete flatStyle.shadowColor;delete flatStyle.shadowOpacity;delete flatStyle.shadowOffset;delete flatStyle.shadowRadius;delete flatStyle.tintColor;delete flatStyle.overlayColor;delete flatStyle.resizeMode;var hiddenImage=displayImageUri?createElement('img',{alt:accessibilityLabel||'',draggable:draggable||false,ref:this._setImageRef,src:displayImageUri,style:styles.accessibilityImage}):null;return React.createElement(View,_extends({},other,{accessibilityLabel:accessibilityLabel,accessible:accessible,onLayout:this._createLayoutHandler(finalResizeMode),style:[styles.root,this.context.isInAParentText&&styles.inline,imageSizeStyle,flatStyle],testID:testID}),React.createElement(View,{style:[styles.image,resizeModeStyles[finalResizeMode],this._getBackgroundSize(finalResizeMode),backgroundImage&&{backgroundImage:backgroundImage},filters.length>0&&{filter:filters.join(' ')}]}),hiddenImage,createTintColorSVG(tintColor,this._filterId));};Image.prototype._createImageLoader=function _createImageLoader(){var source=this.props.source;this._destroyImageLoader();var uri=resolveAssetUri(source);this._imageRequestId=ImageLoader.load(uri,this._onLoad,this._onError);this._onLoadStart();};Image.prototype._destroyImageLoader=function _destroyImageLoader(){if(this._imageRequestId){ImageLoader.abort(this._imageRequestId);this._imageRequestId=null;}};Image.prototype._onLoadEnd=function _onLoadEnd(){var onLoadEnd=this.props.onLoadEnd;if(onLoadEnd){onLoadEnd();}};Image.prototype._onLoadStart=function _onLoadStart(){var onLoadStart=this.props.onLoadStart;this._updateImageState(STATUS_LOADING);if(onLoadStart){onLoadStart();}};Image.prototype._updateImageState=function _updateImageState(status){this._imageState=status;var shouldDisplaySource=this._imageState===STATUS_LOADED||this._imageState===STATUS_LOADING;if(shouldDisplaySource!==this.state.shouldDisplaySource){if(this._isMounted){this.setState(function(){return{shouldDisplaySource:shouldDisplaySource};});}}};return Image;}(Component);Image.displayName='Image';Image.contextTypes={isInAParentText:bool};Image.defaultProps={style:emptyObject};Image.resizeMode=ImageResizeMode;Image.propTypes=process.env.NODE_ENV!==\"production\"?_extends2({},ViewPropTypes,{blurRadius:number,defaultSource:ImageSourcePropType,draggable:bool,onError:func,onLayout:func,onLoad:func,onLoadEnd:func,onLoadStart:func,resizeMode:oneOf(Object.keys(ImageResizeMode)),source:ImageSourcePropType,style:StyleSheetPropType(ImageStylePropTypes),capInsets:shape({top:number,left:number,bottom:number,right:number}),resizeMethod:oneOf(['auto','resize','scale'])}):{};var styles=StyleSheet.create({root:{flexBasis:'auto',overflow:'hidden',zIndex:0},inline:{display:'inline-flex'},image:_extends2({},StyleSheet.absoluteFillObject,{backgroundColor:'transparent',backgroundPosition:'center',backgroundRepeat:'no-repeat',backgroundSize:'cover',height:'100%',width:'100%',zIndex:-1}),accessibilityImage:_extends2({},StyleSheet.absoluteFillObject,{height:'100%',opacity:0,width:'100%',zIndex:-1})});var resizeModeStyles=StyleSheet.create({center:{backgroundSize:'auto'},contain:{backgroundSize:'contain'},cover:{backgroundSize:'cover'},none:{backgroundPosition:'0 0',backgroundSize:'auto'},repeat:{backgroundPosition:'0 0',backgroundRepeat:'repeat',backgroundSize:'auto'},stretch:{backgroundSize:'100% 100%'}});export default applyNativeMethods(Image);","map":{"version":3,"sources":["C:/Users/arnol/code/entroprise/node_modules/react-web-gifted-chat/node_modules/react-native-web/dist/exports/Image/index.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_objectWithoutProperties","obj","keys","indexOf","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","applyNativeMethods","createElement","getAssetByID","resolveShadowValue","ImageLoader","ImageResizeMode","ImageSourcePropType","ImageStylePropTypes","ImageUriCache","StyleSheet","StyleSheetPropType","View","ViewPropTypes","bool","func","number","oneOf","shape","React","Component","emptyObject","STATUS_ERRORED","STATUS_LOADED","STATUS_LOADING","STATUS_PENDING","STATUS_IDLE","getImageState","uri","shouldDisplaySource","resolveAssetDimensions","_getAssetByID","height","width","_height","_width","svgDataUriPattern","resolveAssetUri","asset","scale","scales","scaleSuffix","httpServerLocation","name","type","match","prefix","svg","encodedSvg","encodeURIComponent","filterId","createTintColorSVG","tintColor","id","style","position","visibility","floodColor","in2","operator","Image","_Component","getSize","success","failure","prefetch","props","context","_this","_filterId","_imageRef","_imageRequestId","_imageState","_isMounted","_createLayoutHandler","resizeMode","onLayout","e","layout","nativeEvent","setState","_getBackgroundSize","_this$_imageRef","naturalHeight","naturalWidth","_this$state$layout","state","scaleFactor","Math","min","x","ceil","y","backgroundSize","_onError","_this$props","onError","_updateImageState","error","_onLoadEnd","_onLoad","_this$props2","onLoad","event","add","_setImageRef","ref","has","componentDidMount","_createImageLoader","componentDidUpdate","prevProps","prevUri","remove","isPreviouslyLoaded","componentWillUnmount","_destroyImageLoader","render","_props","accessibilityLabel","accessible","blurRadius","defaultSource","draggable","testID","capInsets","onLoadEnd","onLoadStart","resizeMethod","other","process","env","NODE_ENV","src","console","warn","children","Error","selectedSource","displayImageUri","imageSizeStyle","backgroundImage","flatStyle","flatten","finalResizeMode","cover","filters","filter","push","shadowOffset","shadowString","shadowColor","shadowOpacity","shadowRadius","overlayColor","hiddenImage","alt","styles","accessibilityImage","root","isInAParentText","inline","image","resizeModeStyles","join","load","_onLoadStart","abort","status","displayName","contextTypes","defaultProps","propTypes","top","left","bottom","right","flexBasis","overflow","zIndex","display","absoluteFillObject","backgroundColor","backgroundPosition","backgroundRepeat","opacity","center","contain","none","repeat","stretch"],"mappings":"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","sourcesContent":["var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Copyright (c) 2016-present, Nicolas Gallagher.\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n */\n\nimport applyNativeMethods from '../../modules/applyNativeMethods';\nimport createElement from '../createElement';\nimport { getAssetByID } from '../../modules/AssetRegistry';\nimport resolveShadowValue from '../StyleSheet/resolveShadowValue';\nimport ImageLoader from '../../modules/ImageLoader';\nimport ImageResizeMode from './ImageResizeMode';\nimport ImageSourcePropType from './ImageSourcePropType';\nimport ImageStylePropTypes from './ImageStylePropTypes';\nimport ImageUriCache from './ImageUriCache';\nimport StyleSheet from '../StyleSheet';\nimport StyleSheetPropType from '../../modules/StyleSheetPropType';\nimport View from '../View';\nimport ViewPropTypes from '../ViewPropTypes';\nimport { bool, func, number, oneOf, shape } from 'prop-types';\nimport React, { Component } from 'react';\n\nvar emptyObject = {};\n\nvar STATUS_ERRORED = 'ERRORED';\nvar STATUS_LOADED = 'LOADED';\nvar STATUS_LOADING = 'LOADING';\nvar STATUS_PENDING = 'PENDING';\nvar STATUS_IDLE = 'IDLE';\n\nvar getImageState = function getImageState(uri, shouldDisplaySource) {\n  return shouldDisplaySource ? STATUS_LOADED : uri ? STATUS_PENDING : STATUS_IDLE;\n};\n\nvar resolveAssetDimensions = function resolveAssetDimensions(source) {\n  if (typeof source === 'number') {\n    var _getAssetByID = getAssetByID(source),\n        height = _getAssetByID.height,\n        width = _getAssetByID.width;\n\n    return { height: height, width: width };\n  } else if (typeof source === 'object') {\n    var _height = source.height,\n        _width = source.width;\n\n    return { height: _height, width: _width };\n  }\n};\n\nvar svgDataUriPattern = /^(data:image\\/svg\\+xml;utf8,)(.*)/;\nvar resolveAssetUri = function resolveAssetUri(source) {\n  var uri = '';\n  if (typeof source === 'number') {\n    // get the URI from the packager\n    var asset = getAssetByID(source);\n    var scale = asset.scales[0];\n    var scaleSuffix = scale !== 1 ? '@' + scale + 'x' : '';\n    uri = asset ? asset.httpServerLocation + '/' + asset.name + scaleSuffix + '.' + asset.type : '';\n  } else if (typeof source === 'string') {\n    uri = source;\n  } else if (source && typeof source.uri === 'string') {\n    uri = source.uri;\n  }\n\n  if (uri) {\n    var match = uri.match(svgDataUriPattern);\n    // inline SVG markup may contain characters (e.g., #, \") that need to be escaped\n    if (match) {\n      var prefix = match[1],\n          svg = match[2];\n\n      var encodedSvg = encodeURIComponent(svg);\n      return '' + prefix + encodedSvg;\n    }\n  }\n\n  return uri;\n};\n\nvar filterId = 0;\n\nvar createTintColorSVG = function createTintColorSVG(tintColor, id) {\n  return tintColor && id != null ? React.createElement(\n    'svg',\n    { style: { position: 'absolute', height: 0, visibility: 'hidden', width: 0 } },\n    React.createElement(\n      'defs',\n      null,\n      React.createElement(\n        'filter',\n        { id: 'tint-' + id },\n        React.createElement('feFlood', { floodColor: '' + tintColor }),\n        React.createElement('feComposite', { in2: 'SourceAlpha', operator: 'atop' })\n      )\n    )\n  ) : null;\n};\n\nvar Image = function (_Component) {\n  _inherits(Image, _Component);\n\n  Image.getSize = function getSize(uri, success, failure) {\n    ImageLoader.getSize(uri, success, failure);\n  };\n\n  Image.prefetch = function prefetch(uri) {\n    return ImageLoader.prefetch(uri);\n  };\n\n  function Image(props, context) {\n    _classCallCheck(this, Image);\n\n    // If an image has been loaded before, render it immediately\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props, context));\n\n    _this._filterId = 0;\n    _this._imageRef = null;\n    _this._imageRequestId = null;\n    _this._imageState = null;\n    _this._isMounted = false;\n\n    _this._createLayoutHandler = function (resizeMode) {\n      var onLayout = _this.props.onLayout;\n\n      if (resizeMode === 'center' || resizeMode === 'repeat' || onLayout) {\n        return function (e) {\n          var layout = e.nativeEvent.layout;\n\n          onLayout && onLayout(e);\n          _this.setState(function () {\n            return { layout: layout };\n          });\n        };\n      }\n    };\n\n    _this._getBackgroundSize = function (resizeMode) {\n      if (_this._imageRef && (resizeMode === 'center' || resizeMode === 'repeat')) {\n        var _this$_imageRef = _this._imageRef,\n            naturalHeight = _this$_imageRef.naturalHeight,\n            naturalWidth = _this$_imageRef.naturalWidth;\n        var _this$state$layout = _this.state.layout,\n            height = _this$state$layout.height,\n            width = _this$state$layout.width;\n\n        if (naturalHeight && naturalWidth && height && width) {\n          var scaleFactor = Math.min(1, width / naturalWidth, height / naturalHeight);\n          var x = Math.ceil(scaleFactor * naturalWidth);\n          var y = Math.ceil(scaleFactor * naturalHeight);\n          return {\n            backgroundSize: x + 'px ' + y + 'px'\n          };\n        }\n      }\n    };\n\n    _this._onError = function () {\n      var _this$props = _this.props,\n          onError = _this$props.onError,\n          source = _this$props.source;\n\n      _this._updateImageState(STATUS_ERRORED);\n      if (onError) {\n        onError({\n          nativeEvent: {\n            error: 'Failed to load resource ' + resolveAssetUri(source) + ' (404)'\n          }\n        });\n      }\n      _this._onLoadEnd();\n    };\n\n    _this._onLoad = function (e) {\n      var _this$props2 = _this.props,\n          onLoad = _this$props2.onLoad,\n          source = _this$props2.source;\n\n      var event = { nativeEvent: e };\n      ImageUriCache.add(resolveAssetUri(source));\n      _this._updateImageState(STATUS_LOADED);\n      if (onLoad) {\n        onLoad(event);\n      }\n      _this._onLoadEnd();\n    };\n\n    _this._setImageRef = function (ref) {\n      _this._imageRef = ref;\n    };\n\n    var uri = resolveAssetUri(props.source);\n    var shouldDisplaySource = ImageUriCache.has(uri);\n    _this.state = { layout: {}, shouldDisplaySource: shouldDisplaySource };\n    _this._imageState = getImageState(uri, shouldDisplaySource);\n    _this._filterId = filterId;\n    filterId++;\n    return _this;\n  }\n\n  Image.prototype.componentDidMount = function componentDidMount() {\n    this._isMounted = true;\n    if (this._imageState === STATUS_PENDING) {\n      this._createImageLoader();\n    } else if (this._imageState === STATUS_LOADED) {\n      this._onLoad({ target: this._imageRef });\n    }\n  };\n\n  Image.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var prevUri = resolveAssetUri(prevProps.source);\n    var uri = resolveAssetUri(this.props.source);\n    if (prevUri !== uri) {\n      ImageUriCache.remove(prevUri);\n      var isPreviouslyLoaded = ImageUriCache.has(uri);\n      isPreviouslyLoaded && ImageUriCache.add(uri);\n      this._updateImageState(getImageState(uri, isPreviouslyLoaded));\n    }\n    if (this._imageState === STATUS_PENDING) {\n      this._createImageLoader();\n    }\n  };\n\n  Image.prototype.componentWillUnmount = function componentWillUnmount() {\n    var uri = resolveAssetUri(this.props.source);\n    ImageUriCache.remove(uri);\n    this._destroyImageLoader();\n    this._isMounted = false;\n  };\n\n  Image.prototype.render = function render() {\n    var shouldDisplaySource = this.state.shouldDisplaySource;\n\n    var _props = this.props,\n        accessibilityLabel = _props.accessibilityLabel,\n        accessible = _props.accessible,\n        blurRadius = _props.blurRadius,\n        defaultSource = _props.defaultSource,\n        draggable = _props.draggable,\n        source = _props.source,\n        testID = _props.testID,\n        capInsets = _props.capInsets,\n        onError = _props.onError,\n        onLayout = _props.onLayout,\n        onLoad = _props.onLoad,\n        onLoadEnd = _props.onLoadEnd,\n        onLoadStart = _props.onLoadStart,\n        resizeMethod = _props.resizeMethod,\n        resizeMode = _props.resizeMode,\n        other = _objectWithoutProperties(_props, ['accessibilityLabel', 'accessible', 'blurRadius', 'defaultSource', 'draggable', 'source', 'testID', 'capInsets', 'onError', 'onLayout', 'onLoad', 'onLoadEnd', 'onLoadStart', 'resizeMethod', 'resizeMode']);\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (this.props.src) {\n        console.warn('The <Image> component requires a `source` property rather than `src`.');\n      }\n\n      if (this.props.children) {\n        throw new Error('The <Image> component cannot contain children. If you want to render content on top of the image, consider using the <ImageBackground> component or absolute positioning.');\n      }\n    }\n\n    var selectedSource = shouldDisplaySource ? source : defaultSource;\n    var displayImageUri = resolveAssetUri(selectedSource);\n    var imageSizeStyle = resolveAssetDimensions(selectedSource);\n    var backgroundImage = displayImageUri ? 'url(\"' + displayImageUri + '\")' : null;\n    var flatStyle = Object.assign({}, StyleSheet.flatten(this.props.style));\n    var finalResizeMode = resizeMode || flatStyle.resizeMode || ImageResizeMode.cover;\n\n    // CSS filters\n    var filters = [];\n    var tintColor = flatStyle.tintColor;\n    if (flatStyle.filter) {\n      filters.push(flatStyle.filter);\n    }\n    if (blurRadius) {\n      filters.push('blur(' + blurRadius + 'px)');\n    }\n    if (flatStyle.shadowOffset) {\n      var shadowString = resolveShadowValue(flatStyle);\n      if (shadowString) {\n        filters.push('drop-shadow(' + shadowString + ')');\n      }\n    }\n    if (flatStyle.tintColor) {\n      filters.push('url(#tint-' + this._filterId + ')');\n    }\n\n    // these styles were converted to filters\n    delete flatStyle.shadowColor;\n    delete flatStyle.shadowOpacity;\n    delete flatStyle.shadowOffset;\n    delete flatStyle.shadowRadius;\n    delete flatStyle.tintColor;\n    // these styles are not supported on View\n    delete flatStyle.overlayColor;\n    delete flatStyle.resizeMode;\n\n    // Accessibility image allows users to trigger the browser's image context menu\n    var hiddenImage = displayImageUri ? createElement('img', {\n      alt: accessibilityLabel || '',\n      draggable: draggable || false,\n      ref: this._setImageRef,\n      src: displayImageUri,\n      style: styles.accessibilityImage\n    }) : null;\n\n    return React.createElement(\n      View,\n      _extends({}, other, {\n        accessibilityLabel: accessibilityLabel,\n        accessible: accessible,\n        onLayout: this._createLayoutHandler(finalResizeMode),\n        style: [styles.root, this.context.isInAParentText && styles.inline, imageSizeStyle, flatStyle],\n        testID: testID\n      }),\n      React.createElement(View, {\n        style: [styles.image, resizeModeStyles[finalResizeMode], this._getBackgroundSize(finalResizeMode), backgroundImage && { backgroundImage: backgroundImage }, filters.length > 0 && { filter: filters.join(' ') }]\n      }),\n      hiddenImage,\n      createTintColorSVG(tintColor, this._filterId)\n    );\n  };\n\n  Image.prototype._createImageLoader = function _createImageLoader() {\n    var source = this.props.source;\n\n    this._destroyImageLoader();\n    var uri = resolveAssetUri(source);\n    this._imageRequestId = ImageLoader.load(uri, this._onLoad, this._onError);\n    this._onLoadStart();\n  };\n\n  Image.prototype._destroyImageLoader = function _destroyImageLoader() {\n    if (this._imageRequestId) {\n      ImageLoader.abort(this._imageRequestId);\n      this._imageRequestId = null;\n    }\n  };\n\n  Image.prototype._onLoadEnd = function _onLoadEnd() {\n    var onLoadEnd = this.props.onLoadEnd;\n\n    if (onLoadEnd) {\n      onLoadEnd();\n    }\n  };\n\n  Image.prototype._onLoadStart = function _onLoadStart() {\n    var onLoadStart = this.props.onLoadStart;\n\n    this._updateImageState(STATUS_LOADING);\n    if (onLoadStart) {\n      onLoadStart();\n    }\n  };\n\n  Image.prototype._updateImageState = function _updateImageState(status) {\n    this._imageState = status;\n    var shouldDisplaySource = this._imageState === STATUS_LOADED || this._imageState === STATUS_LOADING;\n    // only triggers a re-render when the image is loading (to support PJEG), loaded, or failed\n    if (shouldDisplaySource !== this.state.shouldDisplaySource) {\n      if (this._isMounted) {\n        this.setState(function () {\n          return { shouldDisplaySource: shouldDisplaySource };\n        });\n      }\n    }\n  };\n\n  return Image;\n}(Component);\n\nImage.displayName = 'Image';\nImage.contextTypes = {\n  isInAParentText: bool\n};\nImage.defaultProps = {\n  style: emptyObject\n};\nImage.resizeMode = ImageResizeMode;\nImage.propTypes = process.env.NODE_ENV !== \"production\" ? Object.assign({}, ViewPropTypes, {\n  blurRadius: number,\n  defaultSource: ImageSourcePropType,\n  draggable: bool,\n  onError: func,\n  onLayout: func,\n  onLoad: func,\n  onLoadEnd: func,\n  onLoadStart: func,\n  resizeMode: oneOf(Object.keys(ImageResizeMode)),\n  source: ImageSourcePropType,\n  style: StyleSheetPropType(ImageStylePropTypes),\n  // compatibility with React Native\n  /* eslint-disable react/sort-prop-types */\n  capInsets: shape({ top: number, left: number, bottom: number, right: number }),\n  resizeMethod: oneOf(['auto', 'resize', 'scale'])\n  /* eslint-enable react/sort-prop-types */\n}) : {};\n\n\nvar styles = StyleSheet.create({\n  root: {\n    flexBasis: 'auto',\n    overflow: 'hidden',\n    zIndex: 0\n  },\n  inline: {\n    display: 'inline-flex'\n  },\n  image: Object.assign({}, StyleSheet.absoluteFillObject, {\n    backgroundColor: 'transparent',\n    backgroundPosition: 'center',\n    backgroundRepeat: 'no-repeat',\n    backgroundSize: 'cover',\n    height: '100%',\n    width: '100%',\n    zIndex: -1\n  }),\n  accessibilityImage: Object.assign({}, StyleSheet.absoluteFillObject, {\n    height: '100%',\n    opacity: 0,\n    width: '100%',\n    zIndex: -1\n  })\n});\n\nvar resizeModeStyles = StyleSheet.create({\n  center: {\n    backgroundSize: 'auto'\n  },\n  contain: {\n    backgroundSize: 'contain'\n  },\n  cover: {\n    backgroundSize: 'cover'\n  },\n  none: {\n    backgroundPosition: '0 0',\n    backgroundSize: 'auto'\n  },\n  repeat: {\n    backgroundPosition: '0 0',\n    backgroundRepeat: 'repeat',\n    backgroundSize: 'auto'\n  },\n  stretch: {\n    backgroundSize: '100% 100%'\n  }\n});\n\nexport default applyNativeMethods(Image);"]},"metadata":{},"sourceType":"module"}